function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{Ak7V:function(e,t,r){"use strict";r.r(t),r.d(t,"CategoryModule",(function(){return Le}));var o=r("ofXK"),a=r("tyNb"),i=r("vkgz"),c=r("/uUt"),s=r("Kj3r"),n=r("eIep"),u=r("chph"),b=r("fXoL"),g=r("9d4Z"),l=r("QJ7G"),d=r("1kSV"),f=r("3Pt+"),y=r("CvK3");function m(e,t){if(1&e&&b.Rb(0,"img",24),2&e){var r=b.mc(3);b.Ic("width",r.imageWidth,"px")("height",r.imageHeight,"px")("margin",r.imageMargin,"px")}}function C(e,t){if(1&e){var r=b.Xb();b.Wb(0,"span",25),b.ic("click",(function(){b.Dc(r);var e=b.mc().$implicit;return b.mc(2).uploadImage(e.store_sub_category_id)})),b.Lc(1," Upload Image "),b.Vb()}}function p(e,t){if(1&e&&b.Rb(0,"img",26),2&e){var r=b.mc().$implicit,o=b.mc(2);b.Ic("height",o.imageHeight,"px")("width",o.imageWidth,"px")("margin",o.imageMargin,"px"),b.uc("src",null==r?null:r.store_sub_category_image_url,b.Ec),b.tc("title",r.store_sub_category)}}function v(e,t){if(1&e){var r=b.Xb();b.Wb(0,"span",25),b.ic("click",(function(){b.Dc(r);var e=b.mc().$implicit;return b.mc(2).uploadImage(e.store_sub_category_id)})),b.Lc(1," Change Image "),b.Vb()}}function h(e,t){if(1&e){var r=b.Xb();b.Wb(0,"i",27),b.ic("click",(function(){b.Dc(r);var e=b.mc().$implicit;return b.mc(2).activesubcategory(null==e?null:e.store_sub_category_id)})),b.Vb()}}var _=function(e){return["/category/storesubcategories",e]};function V(e,t){if(1&e){var r=b.Xb();b.Wb(0,"div",36),b.Wb(1,"div",37),b.Wb(2,"a",19),b.Lc(3),b.Vb(),b.Vb(),b.Wb(4,"div",37),b.Wb(5,"a",19),b.Lc(6),b.nc(7,"upperCaseName"),b.Vb(),b.Vb(),b.Wb(8,"div",37),b.Wb(9,"i",38),b.ic("click",(function(){b.Dc(r);var e=t.$implicit,o=b.mc(3).$implicit;return b.mc(2).addSubCat(null==o?null:o.store_sub_category_id,null==e?null:e.sub_category_id)})),b.Vb(),b.Wb(10,"i",21),b.ic("click",(function(){b.Dc(r);var e=t.$implicit,o=b.mc(3).$implicit;return b.mc(2).deleteSubCategory(null==e?null:e.sub_category_id,null==o?null:o.store_sub_category_id)})),b.Vb(),b.Vb(),b.Vb()}if(2&e){var o=t.$implicit;b.Cb(2),b.tc("routerLink",b.xc(6,_,null==o?null:o.sub_category_id)),b.Cb(1),b.Nc(" ",null==o?null:o.sub_category_id," "),b.Cb(2),b.tc("routerLink",b.xc(8,_,null==o?null:o.sub_category_id)),b.Cb(1),b.Nc(" ",b.oc(7,4,null==o?null:o.sub_category_name)," ")}}function W(e,t){if(1&e){var r=b.Xb();b.Wb(0,"div",30),b.Wb(1,"div",31),b.Wb(2,"div",32),b.Lc(3," Category Id "),b.Vb(),b.Wb(4,"div",32),b.Lc(5," Catergory Name "),b.Vb(),b.Wb(6,"div",32),b.Wb(7,"button",33),b.ic("click",(function(){b.Dc(r);var e=b.mc(2).$implicit;return b.mc(2).addSubCat(null==e?null:e.store_sub_category_id,0)})),b.Lc(8," Add Sub Category "),b.Vb(),b.Vb(),b.Vb(),b.Wb(9,"div",34),b.Jc(10,V,11,10,"div",35),b.Vb(),b.Vb()}if(2&e){var o=b.mc(2).$implicit;b.Cb(10),b.tc("ngForOf",null==o?null:o.sub_category_data)}}function S(e,t){if(1&e){var r=b.Xb();b.Wb(0,"i",28),b.ic("click",(function(){b.Dc(r);var e=b.mc().$implicit;return b.mc(2).activesubcategory(null==e?null:e.store_sub_category_id)})),b.Jc(1,W,11,1,"div",29),b.Vb()}if(2&e){var o=b.mc().$implicit;b.Cb(1),b.tc("ngIf",null==o?null:o.isActive)}}var I=function(e){return["/category/storesubcategories",e,"edit"]};function k(e,t){if(1&e){var r=b.Xb();b.Wb(0,"tr"),b.Wb(1,"td"),b.Jc(2,m,1,6,"img",16),b.Jc(3,C,2,0,"span",17),b.Jc(4,p,1,8,"img",18),b.Jc(5,v,2,0,"span",17),b.Vb(),b.Wb(6,"td"),b.Wb(7,"a",19),b.Lc(8),b.Vb(),b.Vb(),b.Wb(9,"td"),b.Wb(10,"a",19),b.Lc(11),b.nc(12,"upperCaseName"),b.Vb(),b.Vb(),b.Wb(13,"td"),b.Rb(14,"i",20),b.Wb(15,"i",21),b.ic("click",(function(){b.Dc(r);var e=t.$implicit;return b.mc(2).deleteStoreSubCategory(null==e?null:e.store_sub_category_id)})),b.Vb(),b.Jc(16,h,1,0,"i",22),b.Jc(17,S,2,1,"i",23),b.Vb(),b.Vb()}if(2&e){var o=t.$implicit;b.Cb(2),b.tc("ngIf",!(null!=o&&o.store_sub_category_image_url)),b.Cb(1),b.tc("ngIf",!(null!=o&&o.store_sub_category_image_url)),b.Cb(1),b.tc("ngIf",null==o?null:o.store_sub_category_image_url),b.Cb(1),b.tc("ngIf",null==o?null:o.store_sub_category_image_url),b.Cb(2),b.tc("routerLink",b.xc(13,_,null==o?null:o.store_sub_category_id)),b.Cb(1),b.Nc(" ",null==o?null:o.store_sub_category_id," "),b.Cb(2),b.tc("routerLink",b.xc(15,_,null==o?null:o.store_sub_category_id)),b.Cb(1),b.Nc(" ",b.oc(12,11,null==o?null:o.store_sub_category)," "),b.Cb(3),b.tc("routerLink",b.xc(17,I,null==o?null:o.store_sub_category_id)),b.Cb(2),b.tc("ngIf",!(null!=o&&o.isActive)),b.Cb(1),b.tc("ngIf",null==o?null:o.isActive)}}function N(e,t){if(1&e&&(b.Wb(0,"table",14),b.Wb(1,"thead"),b.Wb(2,"tr"),b.Rb(3,"th"),b.Wb(4,"th"),b.Lc(5,"Category Id"),b.Vb(),b.Wb(6,"th"),b.Lc(7,"Category Name"),b.Vb(),b.Rb(8,"th"),b.Vb(),b.Vb(),b.Wb(9,"tbody"),b.Jc(10,k,18,19,"tr",15),b.Vb(),b.Vb()),2&e){var r=b.mc();b.Cb(10),b.tc("ngForOf",r.storeSubCategoryData)}}function F(e,t){1&e&&(b.Wb(0,"div"),b.Lc(1," No Sub Category Data Found "),b.Vb())}function L(e,t){if(1&e&&(b.Wb(0,"div",39),b.Lc(1),b.Vb()),2&e){var r=b.mc();b.Cb(1),b.Nc(" Error: ",r.errorMessage,"\n")}}var w,x,R=function(){return["/category/storesubcategories/",0,"edit"]},O=((x=function(){function e(t,r,o,a,i,c){_classCallCheck(this,e),this.categoryService=t,this.productService=r,this.activatedRoute=o,this.modalService=a,this.formBuilder=i,this.route=c,this.imageWidth=80,this.imageHeight=80,this.imageMargin=2,this.subCategories=[],this.pageTitle="",this.displaytype="AC",this.filterBy="",this.searchCriteriaForm=this.formBuilder.group({searchCriteria:[""]})}return _createClass(e,[{key:"ngOnInit",value:function(){this.categories=this.activatedRoute.snapshot.data.storesubcategorydata.storesubcategorydata[0],this.storeSubCategoryData=this.categories.store_sub_category_name,this.storeSubCategoryData.map((function(e){return e.isActive=!1,e})),console.log(this.storeSubCategoryData),this.pageTitle=this.categories.main_category+" Sub Category",this.errorMessage=this.activatedRoute.snapshot.data.storesubcategorydata.error}},{key:"activesubcategory",value:function(e){this.storeSubCategoryData.map((function(t){t.store_sub_category_id===e&&(t.isActive=!t.isActive)}))}},{key:"onChanges",value:function(){var e=this;this.searchCriteriaForm.get("searchCriteria").valueChanges.pipe(Object(i.a)((function(e){})),Object(c.a)(),Object(s.a)(200),Object(n.a)((function(t){return e.filterBy=t,e.categoryService.getStoreSubCategoryData(e.storeCategoryId,e.filterBy)}))).subscribe((function(t){console.log(t),e.categories=t.store_sub_categories}))}},{key:"addNewCategory",value:function(){this.route.navigate(["category",0,"edit"])}},{key:"deleteStoreSubCategory",value:function(e){var t=this;confirm("Are you sure to delete ")&&this.categoryService.deleteStoreSubCategory(e).subscribe((function(e){console.log(e);for(var r=0;r<t.storeSubCategoryData.length;r++)t.storeSubCategoryData[r].store_sub_category_id===+e.store_sub_category_id&&t.categories.store_sub_category_name.splice(r,1)}))}},{key:"deleteSubCategory",value:function(e,t){var r=this;confirm("Are you sure to delete ")&&this.categoryService.deleteSubCategory(e).subscribe((function(o){200===o.status&&r.storeSubCategoryData.map((function(r){if(r.store_sub_category_id===t){var o=r.sub_category_data.findIndex((function(t){return t.sub_category_id===e}));r.sub_category_data.splice(o,1)}}))}))}},{key:"addSubCat",value:function(e,t){this.route.navigate(["category/storesubcategories/".concat(this.activatedRoute.snapshot.params.id,"/storesub/").concat(e,"/sub/").concat(t,"/edit")])}},{key:"getAllProducts",value:function(){var e=this;this.productService.getProducts(1,25,"").subscribe({next:function(t){e.products=t.products,e.products=e.products},error:function(t){return e.errorMessage=t}})}},{key:"categoryProductInfo",value:function(e){var t=this;this.productService.getcategoryProductInfo(e).subscribe({next:function(e){t.products=e.products,console.log(t.products)},error:function(e){return t.errorMessage=e}})}},{key:"showSubCategories",value:function(e){this.subCategories=e.sub_categories,console.log(this.subCategories)}},{key:"uploadImage",value:function(e){var t=this.modalService.open(u.a);t.componentInstance.title="Image Upload",t.componentInstance.id=e,t.componentInstance.image_type="subcategories",t.componentInstance.productImage.subscribe((function(e){console.log(e)}))}}]),e}()).\u0275fac=function(e){return new(e||x)(b.Qb(g.a),b.Qb(l.a),b.Qb(a.a),b.Qb(d.f),b.Qb(f.d),b.Qb(a.f))},x.\u0275cmp=b.Kb({type:x,selectors:[["app-category-list"]],decls:17,vars:7,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-2"],[1,"col-md-4"],[3,"formGroup"],["formControlName","searchCriteria","type","text","id","keyword","placeholder","Search Subcategory By Name","autocomplete","off","autofocus","",1,"form-control"],[1,"col-md-6"],[1,"btn","btn-outline-secondary",2,"float","right",3,"routerLink"],[1,"table-responsive"],["class","table",4,"ngIf"],[4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["src","assets/product_images/default_image.jpg",3,"width","height","margin",4,"ngIf"],["style","display:block;font-size:14px;cursor:pointer;color:blue",3,"click",4,"ngIf"],[3,"src","title","height","width","margin",4,"ngIf"],[3,"routerLink"],[1,"fa","fa-edit",3,"routerLink"],[1,"fa","fa-trash",3,"click"],["class","fa fa-angle-down",3,"click",4,"ngIf"],["class","fa fa-angle-up",3,"click",4,"ngIf"],["src","assets/product_images/default_image.jpg"],[2,"display","block","font-size","14px","cursor","pointer","color","blue",3,"click"],[3,"src","title"],[1,"fa","fa-angle-down",3,"click"],[1,"fa","fa-angle-up",3,"click"],["id","resp-table","style","background: #eee;",4,"ngIf"],["id","resp-table",2,"background","#eee"],["id","resp-table-header"],[1,"table-header-cell"],[1,"btn","btn-outline-secondary",2,"float","right",3,"click"],["id","resp-table-body"],["class","resp-table-row",4,"ngFor","ngForOf"],[1,"resp-table-row"],[1,"table-body-cell"],[1,"fa","fa-edit",3,"click"],[1,"alert","alert-danger"]],template:function(e,t){1&e&&(b.Wb(0,"div",0),b.Wb(1,"div",1),b.Lc(2),b.Vb(),b.Wb(3,"div",2),b.Wb(4,"div",3),b.Wb(5,"div",4),b.Lc(6,"Filter by:"),b.Vb(),b.Wb(7,"div",5),b.Wb(8,"form",6),b.Rb(9,"input",7),b.Vb(),b.Vb(),b.Wb(10,"div",8),b.Wb(11,"button",9),b.Lc(12," Add Store Sub Category "),b.Vb(),b.Vb(),b.Vb(),b.Wb(13,"div",10),b.Jc(14,N,11,1,"table",11),b.Jc(15,F,2,0,"div",12),b.Vb(),b.Vb(),b.Vb(),b.Jc(16,L,2,1,"div",13)),2&e&&(b.Cb(2),b.Nc(" ",t.pageTitle," "),b.Cb(6),b.tc("formGroup",t.searchCriteriaForm),b.Cb(3),b.tc("routerLink",b.wc(6,R)),b.Cb(3),b.tc("ngIf",null==t.storeSubCategoryData?null:t.storeSubCategoryData.length),b.Cb(1),b.tc("ngIf",0==(null==t.storeSubCategoryData?null:t.storeSubCategoryData.length)),b.Cb(1),b.tc("ngIf",t.errorMessage))},directives:[f.w,f.n,f.f,f.c,f.m,f.e,a.g,o.n,o.m,a.i],pipes:[y.a],styles:["i[_ngcontent-%COMP%]{border:1px solid #000;padding:6px;margin:5px 5px 0 0;float:right}.up[_ngcontent-%COMP%]{transform:rotate(-135deg);-webkit-transform:rotate(-135deg)}#resp-table[_ngcontent-%COMP%]{width:100%;height:200px;display:table;text-align:center;border-bottom:1px solid #000}#resp-table-caption[_ngcontent-%COMP%]{display:table-caption;text-align:center;font-size:20px}#resp-table-header[_ngcontent-%COMP%]{display:table-header-group;font-weight:700;text-align:center;font-size:15px}.table-header-cell[_ngcontent-%COMP%]{text-align:center;display:table-cell;padding:10px;border-bottom:1px solid #000}#resp-table-body[_ngcontent-%COMP%]{text-align:center;display:table-row-group}.resp-table-row[_ngcontent-%COMP%]{text-align:center;display:table-row}.table-body-cell[_ngcontent-%COMP%]{text-align:center;display:table-cell}#resp-table-footer[_ngcontent-%COMP%]{display:table-footer-group;background-color:grey;font-weight:700;font-size:25px;color:hsla(0,0%,100%,.45)}.table-footer-cell[_ngcontent-%COMP%]{display:table-cell;padding:10px;text-align:justify;border-bottom:1px solid #000}"]}),x),M=((w=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||w)},w.\u0275cmp=b.Kb({type:w,selectors:[["app-category-detail"]],decls:2,vars:0,template:function(e,t){1&e&&(b.Wb(0,"p"),b.Lc(1,"category-detail works!"),b.Vb())},styles:[""]}),w);function J(e,t){1&e&&(b.Wb(0,"div"),b.Lc(1,"Category Name is required"),b.Vb())}function D(e,t){if(1&e&&(b.Wb(0,"div",16),b.Jc(1,J,2,0,"div",17),b.Vb()),2&e){var r=b.mc();b.Cb(1),b.tc("ngIf",r.f.categoryName.errors.required)}}function j(e,t){if(1&e&&(b.Wb(0,"option",18),b.Lc(1),b.Vb()),2&e){var r=t.$implicit;b.uc("value",null==r?null:r.store_category_id),b.Cb(1),b.Nc(" ",r.store_category_name," ")}}function A(e,t){1&e&&(b.Wb(0,"div"),b.Lc(1,"Category Ranking is required"),b.Vb())}function Q(e,t){if(1&e&&(b.Wb(0,"div",16),b.Jc(1,A,2,0,"div",17),b.Vb()),2&e){var r=b.mc();b.Cb(1),b.tc("ngIf",r.f.categoryRanking.errors.required)}}var P,q=function(e){return{"is-invalid":e}},$=((P=function(){function e(t,r,o,a){_classCallCheck(this,e),this.categoryService=t,this.router=r,this.activatedRoute=o,this.formBuilder=a,this.disableForm=!1,this.pageTitle="Add Category",this.addCategoryForm=this.formBuilder.group({categoryName:["",f.u.required],storeCategoryName:["",f.u.required],categoryRanking:[""],status:[""]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.categoryId=+this.activatedRoute.snapshot.params.categoryId,0!==this.categoryId&&this.categoryService.getSubCategoryData(this.categoryId).subscribe((function(t){console.log(t),e.addCategoryForm.get("categoryName").setValue(t[0].name),e.addCategoryForm.get("storeCategoryName").setValue(t[0].store_category_id),e.addCategoryForm.get("categoryRanking").setValue(t[0].ranking),e.addCategoryForm.get("status").setValue(t[0].status)})),this.categoryService.storeCategories.subscribe((function(t){e.storeCategories=t.store_categories}))}},{key:"onSubmit",value:function(){var e=this;if(!this.disableForm){if(this.submitted=!0,this.disableForm=!0,this.addCategoryForm.invalid)return void(this.disableForm=!1);0===this.categoryId?this.categoryService.addNewStoreSubCategory(this.addCategoryForm.value).subscribe((function(t){200==+t.status&&e.router.navigate(["category/storesubcategories",e.addCategoryForm.value.storeCategoryName]),400===t.status&&(alert("Category Not Added . Internal Server Error"),e.disableForm=!1)}),(function(t){e.errorMessage=t,e.disableForm=!1})):this.categoryService.editStoreSubCategory(this.addCategoryForm.value,this.categoryId).subscribe((function(t){200===t.status&&e.router.navigate(["category/storecategories"]),400===t.status&&(alert("Category Not Added . Internal Server Error"),e.disableForm=!1)}),(function(t){e.errorMessage=t,e.disableForm=!1}))}}},{key:"f",get:function(){return this.addCategoryForm.controls}}]),e}()).\u0275fac=function(e){return new(e||P)(b.Qb(g.a),b.Qb(a.f),b.Qb(a.a),b.Qb(f.d))},P.\u0275cmp=b.Kb({type:P,selectors:[["app-category-add"]],decls:35,vars:11,consts:[[1,"jumbotron"],[1,"container"],[1,"row"],[1,"col-md-6","offset-md-3"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","formControlName","categoryName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","storeCategoryName",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","categoryRanking",1,"form-control",3,"ngClass"],["for",""],["formControlName","status",1,"form-control"],["value","1"],["value","0"],[1,"btn","btn-primary",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"]],template:function(e,t){1&e&&(b.Wb(0,"div",0),b.Wb(1,"div",1),b.Wb(2,"div",2),b.Wb(3,"div",3),b.Wb(4,"h2"),b.Lc(5,"Add New Sub Category"),b.Vb(),b.Wb(6,"form",4),b.ic("ngSubmit",(function(){return t.onSubmit()})),b.Wb(7,"div",5),b.Wb(8,"label"),b.Lc(9,"Category Name"),b.Vb(),b.Rb(10,"input",6),b.Jc(11,D,2,1,"div",7),b.Vb(),b.Wb(12,"div",5),b.Wb(13,"label"),b.Lc(14,"Store Category Name"),b.Vb(),b.Wb(15,"div"),b.Wb(16,"select",8),b.Jc(17,j,2,2,"option",9),b.Vb(),b.Vb(),b.Vb(),b.Wb(18,"div",5),b.Wb(19,"label"),b.Lc(20,"Category Ranking"),b.Vb(),b.Rb(21,"input",10),b.Jc(22,Q,2,1,"div",7),b.Vb(),b.Wb(23,"div",5),b.Wb(24,"label",11),b.Lc(25,"Status"),b.Vb(),b.Wb(26,"div"),b.Wb(27,"select",12),b.Wb(28,"option",13),b.Lc(29,"Enabled"),b.Vb(),b.Wb(30,"option",14),b.Lc(31,"Disabled"),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Wb(32,"div",5),b.Wb(33,"button",15),b.Lc(34,"Save"),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Vb()),2&e&&(b.Cb(6),b.tc("formGroup",t.addCategoryForm),b.Cb(4),b.tc("ngClass",b.xc(7,q,t.submitted&&t.f.categoryName.errors)),b.Cb(1),b.tc("ngIf",t.submitted&&t.f.categoryName.errors),b.Cb(6),b.tc("ngForOf",t.storeCategories),b.Cb(4),b.tc("ngClass",b.xc(9,q,t.submitted&&t.f.categoryRanking.errors)),b.Cb(1),b.tc("ngIf",t.submitted&&t.f.categoryRanking.errors),b.Cb(11),b.tc("disabled",!t.addCategoryForm.valid||t.disableForm))},directives:[f.w,f.n,f.f,f.c,f.m,f.e,o.l,o.n,f.t,o.m,f.q,f.v],styles:[""]}),P),B=["app-shopper-category-data",""];function E(e,t){if(1&e&&b.Rb(0,"img",9),2&e){var r=b.mc();b.Ic("width",r.imageWidth,"px")("height",r.imageHeight,"px")("margin",r.imageMargin,"px")}}function X(e,t){if(1&e){var r=b.Xb();b.Wb(0,"span",10),b.ic("click",(function(){b.Dc(r);var e=b.mc();return e.uploadImage(e.storeCategory.store_category_id)})),b.Lc(1," Upload Image "),b.Vb()}}function G(e,t){if(1&e&&b.Rb(0,"img",11),2&e){var r=b.mc();b.Ic("height",r.imageHeight,"px")("width",r.imageWidth,"px")("margin",r.imageMargin,"px"),b.uc("src",null==r.storeCategory?null:r.storeCategory.image_url,b.Ec),b.tc("title",r.storeCategory.store_category_name)}}function K(e,t){if(1&e){var r=b.Xb();b.Wb(0,"span",10),b.ic("click",(function(){b.Dc(r);var e=b.mc();return e.uploadImage(e.storeCategory.store_category_id)})),b.Lc(1," Change Image "),b.Vb()}}var z,H=function(e){return["/category/storesubcategories",e]},T=function(e){return["/category/storecategories",e,"edit"]},U=((z=function(){function e(t,r){_classCallCheck(this,e),this.modalService=t,this._categoryService=r,this.deletestorecategory=new b.o,this.imageWidth=80,this.imageHeight=80,this.imageMargin=2}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChange",value:function(){}},{key:"uploadImage",value:function(e){var t=this,r=this.modalService.open(u.a);r.componentInstance.title="Image Upload",r.componentInstance.id=e,r.componentInstance.image_type="category",r.componentInstance.productImage.subscribe((function(e){t.storeCategory.store_image_url=e.image_url}))}},{key:"deleteCategory",value:function(e){var t=this;confirm("Are you sure to delete ")&&this._categoryService.deleteStoreCategory(e).subscribe((function(e){console.log(e),t.deletestorecategory.emit(e)}))}}]),e}()).\u0275fac=function(e){return new(e||z)(b.Qb(d.f),b.Qb(g.a))},z.\u0275cmp=b.Kb({type:z,selectors:[["","app-shopper-category-data",""]],inputs:{storeCategory:["storeCategoryInfo","storeCategory"]},outputs:{deletestorecategory:"deletestorecategory"},attrs:B,decls:25,vars:21,consts:[["src","assets/product_images/default_image.jpg",3,"width","height","margin",4,"ngIf"],["style","display:block;font-size:14px;cursor:pointer;color:blue",3,"click",4,"ngIf"],[3,"src","title","height","width","margin",4,"ngIf"],[3,"routerLink"],[2,"font-weight","bold"],[1,"btn","btn-outline-secondary","mr-3",3,"routerLink"],[1,"fa","fa-edit"],[1,"btn","btn-outline-secondary","mr-3",3,"click"],[1,"fa","fa-trash"],["src","assets/product_images/default_image.jpg"],[2,"display","block","font-size","14px","cursor","pointer","color","blue",3,"click"],[3,"src","title"]],template:function(e,t){1&e&&(b.Wb(0,"td"),b.Jc(1,E,1,6,"img",0),b.Jc(2,X,2,0,"span",1),b.Jc(3,G,1,8,"img",2),b.Jc(4,K,2,0,"span",1),b.Vb(),b.Wb(5,"td"),b.Wb(6,"a",3),b.Lc(7),b.Vb(),b.Vb(),b.Wb(8,"td"),b.Wb(9,"a",3),b.Lc(10),b.Vb(),b.Vb(),b.Wb(11,"td"),b.Lc(12),b.Vb(),b.Wb(13,"td",4),b.Lc(14),b.Vb(),b.Wb(15,"td"),b.Lc(16),b.nc(17,"date"),b.Vb(),b.Wb(18,"td"),b.Wb(19,"button",5),b.Rb(20,"i",6),b.Lc(21,"Edit "),b.Vb(),b.Wb(22,"button",7),b.ic("click",(function(){return t.deleteCategory(null==t.storeCategory?null:t.storeCategory.store_category_id)})),b.Rb(23,"i",8),b.Lc(24," Delete "),b.Vb(),b.Vb()),2&e&&(b.Cb(1),b.tc("ngIf",!(null!=t.storeCategory&&t.storeCategory.image_url)),b.Cb(1),b.tc("ngIf",!(null!=t.storeCategory&&t.storeCategory.image_url)),b.Cb(1),b.tc("ngIf",null==t.storeCategory?null:t.storeCategory.image_url),b.Cb(1),b.tc("ngIf",null==t.storeCategory?null:t.storeCategory.image_url),b.Cb(2),b.tc("routerLink",b.xc(15,H,t.storeCategory.store_category_id)),b.Cb(1),b.Nc(" ",null==t.storeCategory?null:t.storeCategory.store_category_id," "),b.Cb(2),b.tc("routerLink",b.xc(17,H,t.storeCategory.store_category_id)),b.Cb(1),b.Nc(" ",null==t.storeCategory?null:t.storeCategory.store_category_name," "),b.Cb(2),b.Mc(null==t.storeCategory?null:t.storeCategory.store_category_ranking),b.Cb(2),b.Mc(null!=t.storeCategory&&t.storeCategory.status?"Available":"Not Available"),b.Cb(2),b.Mc(b.pc(17,12,t.storeCategory.last_updated,"medium")),b.Cb(3),b.tc("routerLink",b.xc(19,T,null==t.storeCategory?null:t.storeCategory.store_category_id)))},directives:[o.n,a.i,a.g],pipes:[o.e],styles:[""]}),z);function Z(e,t){if(1&e){var r=b.Xb();b.Wb(0,"tr",16),b.ic("deletestorecategory",(function(e){return b.Dc(r),b.mc(2).deletestorecategory(e)})),b.Vb()}2&e&&b.tc("storeCategoryInfo",t.$implicit)}function Y(e,t){if(1&e&&(b.Wb(0,"div",13),b.Wb(1,"table",14),b.Wb(2,"thead"),b.Wb(3,"tr"),b.Rb(4,"th"),b.Wb(5,"th"),b.Lc(6,"SCId"),b.Vb(),b.Wb(7,"th"),b.Lc(8,"Category Name"),b.Vb(),b.Wb(9,"th"),b.Lc(10,"Ranking"),b.Vb(),b.Wb(11,"th"),b.Lc(12,"Status"),b.Vb(),b.Wb(13,"th"),b.Lc(14,"Last Updated"),b.Vb(),b.Rb(15,"th"),b.Vb(),b.Vb(),b.Wb(16,"tbody"),b.Jc(17,Z,1,1,"tr",15),b.Vb(),b.Vb(),b.Vb()),2&e){var r=b.mc();b.Cb(17),b.tc("ngForOf",r.storeCategories)}}function ee(e,t){1&e&&(b.Wb(0,"div"),b.Lc(1," No Store Categories Found "),b.Vb())}function te(e,t){if(1&e&&(b.Wb(0,"div",17),b.Lc(1),b.Vb()),2&e){var r=b.mc();b.Cb(1),b.Nc(" Error: ",r.errorMessage,"\n")}}var re,oe=function(){return["/category/storecategories/",0,"edit"]},ae=((re=function(){function e(t,r,o,a){_classCallCheck(this,e),this._categoryServce=t,this.modalService=r,this.formBuilder=o,this._activatedRoute=a,this.storeCategories=[],this.pageTitle="Store Categories",this.showImage=!1,this.displaytype="SC",this.filterBy="",this.currentPage=1,this.pageSize=20,this.imageWidth=80,this.imageHeight=80,this.imageMargin=2,this.searchCriteriaForm=this.formBuilder.group({searchCriteria:[""]})}return _createClass(e,[{key:"ngOnInit",value:function(){this.storeCategories=this._activatedRoute.snapshot.data.storeCategoriesdata.categories,this.errorMessage=this._activatedRoute.snapshot.data.storeCategoriesdata.error}},{key:"uploadImage",value:function(e){var t=this,r=this.modalService.open(u.a);r.componentInstance.title="Image Upload",r.componentInstance.id=e,r.componentInstance.image_type="category",r.componentInstance.productImage.subscribe((function(e){t.storeCategories.filter((function(t){return t.store_category_id==e.store_category_id})).store_image_url=e.image_url}))}},{key:"deletestorecategory",value:function(e){for(var t=+e.category_id,r=0;r<this.storeCategories.length;r++)this.storeCategories[r].store_category_id===t&&this.storeCategories.splice(r,1)}},{key:"onChanges",value:function(){var e=this;this.searchCriteriaForm.get("searchCriteria").valueChanges.pipe(Object(i.a)((function(e){console.log(e)})),Object(c.a)(),Object(s.a)(200),Object(n.a)((function(t){return e.filterBy=t,e._categoryServce.getAllStoreCategory(t)}))).subscribe((function(t){e.storeCategories=t.store_categories}),(function(t){e.errorMessage=t}))}},{key:"toggleImage",value:function(){this.showImage=!this.showImage}}]),e}()).\u0275fac=function(e){return new(e||re)(b.Qb(g.a),b.Qb(d.f),b.Qb(f.d),b.Qb(a.a))},re.\u0275cmp=b.Kb({type:re,selectors:[["app-shopper-category"]],decls:16,vars:7,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-2"],[1,"col-md-4"],[3,"formGroup"],["formControlName","searchCriteria","type","text","id","searchCriteria","placeholder","Search Category By Name","name","searchCriteria","autocomplete","off","autofocus","",1,"form-control",3,"keyup"],[1,"col-md-6"],[1,"btn","btn-outline-secondary",2,"float","right",3,"routerLink"],["class","table-responsive",4,"ngIf"],[4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"table-responsive"],[1,"table"],["app-shopper-category-data","",3,"storeCategoryInfo","deletestorecategory",4,"ngFor","ngForOf"],["app-shopper-category-data","",3,"storeCategoryInfo","deletestorecategory"],[1,"alert","alert-danger"]],template:function(e,t){1&e&&(b.Wb(0,"div",0),b.Wb(1,"div",1),b.Lc(2),b.Vb(),b.Wb(3,"div",2),b.Wb(4,"div",3),b.Wb(5,"div",4),b.Lc(6,"Filter by:"),b.Vb(),b.Wb(7,"div",5),b.Wb(8,"form",6),b.Wb(9,"input",7),b.ic("keyup",(function(){return t.onChanges()})),b.Vb(),b.Vb(),b.Vb(),b.Wb(10,"div",8),b.Wb(11,"button",9),b.Lc(12," Add Store Category "),b.Vb(),b.Vb(),b.Vb(),b.Jc(13,Y,18,1,"div",10),b.Jc(14,ee,2,0,"div",11),b.Vb(),b.Vb(),b.Jc(15,te,2,1,"div",12)),2&e&&(b.Cb(2),b.Nc(" ",t.pageTitle," "),b.Cb(6),b.tc("formGroup",t.searchCriteriaForm),b.Cb(3),b.tc("routerLink",b.wc(6,oe)),b.Cb(2),b.tc("ngIf",(null==t.storeCategories?null:t.storeCategories.length)>0),b.Cb(1),b.tc("ngIf",0==(null==t.storeCategories?null:t.storeCategories.length)),b.Cb(1),b.tc("ngIf",t.errorMessage))},directives:[f.w,f.n,f.f,f.c,f.m,f.e,a.g,o.n,o.m,U],styles:[""]}),re);function ie(e,t){1&e&&(b.Wb(0,"div"),b.Lc(1,"Store Category Name is required"),b.Vb())}function ce(e,t){if(1&e&&(b.Wb(0,"div",14),b.Jc(1,ie,2,0,"div",15),b.Vb()),2&e){var r=b.mc();b.Cb(1),b.tc("ngIf",r.f.storeCategoryName.errors.required)}}function se(e,t){1&e&&(b.Wb(0,"div"),b.Lc(1,"Store Category Ranking is required"),b.Vb())}function ne(e,t){if(1&e&&(b.Wb(0,"div",14),b.Jc(1,se,2,0,"div",15),b.Vb()),2&e){var r=b.mc();b.Cb(1),b.tc("ngIf",r.f.storeCategoryRanking.errors.required)}}var ue,be,ge,le=function(e){return{"is-invalid":e}},de=((ue=function(){function e(t,r,o,a){_classCallCheck(this,e),this.activatedRoute=t,this.categoryService=r,this.router=o,this.formBuilder=a,this.disableForm=!1,this.addStoreCategoryForm=this.formBuilder.group({storeCategoryName:["",f.u.required],storeCategoryRanking:["",f.u.required],status:[""]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.storeCategoryId=+this.activatedRoute.snapshot.params.storeCategoryId,0!==this.storeCategoryId&&this.categoryService.getStoreCategory(this.storeCategoryId).subscribe((function(t){var r=t.category;console.log(r),e.addStoreCategoryForm.get("storeCategoryName").setValue(r[0].store_category_name),e.addStoreCategoryForm.get("storeCategoryRanking").setValue(r[0].store_category_ranking),e.addStoreCategoryForm.get("status").setValue(r[0].status)}))}},{key:"onSubmit",value:function(){var e=this;if(!this.disableForm){if(this.submitted=!0,this.disableForm=!0,this.addStoreCategoryForm.invalid)return void(this.disableForm=!1);""===this.storeCategoryId?this.categoryService.addNewStoreCategory(this.addStoreCategoryForm.value).subscribe((function(t){200==+t.status&&e.router.navigate(["category/storecategories"]),400==+t.status&&(alert("Category Not Added . Internal Server Error"),e.disableForm=!1)}),(function(t){e.errorMessage=t,e.disableForm=!1})):this.categoryService.editStoreCategory(this.addStoreCategoryForm.value,this.storeCategoryId).subscribe((function(t){200==+t.status&&e.router.navigate(["category/storecategories"]),400==+t.status&&(alert("Category Not Added . Internal Server Error"),e.disableForm=!1)}),(function(t){e.errorMessage=t,e.disableForm=!1}))}}},{key:"f",get:function(){return this.addStoreCategoryForm.controls}}]),e}()).\u0275fac=function(e){return new(e||ue)(b.Qb(a.a),b.Qb(g.a),b.Qb(a.f),b.Qb(f.d))},ue.\u0275cmp=b.Kb({type:ue,selectors:[["app-add-store-category"]],decls:29,vars:10,consts:[[1,"jumbotron"],[1,"container"],[1,"row"],[1,"col-md-6","offset-md-3"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","formControlName","storeCategoryName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","storeCategoryRanking",1,"form-control",3,"ngClass"],["for","productNameId"],["formControlName","status",1,"form-control"],["value","1"],["value","0"],[1,"btn","btn-primary",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){1&e&&(b.Wb(0,"div",0),b.Wb(1,"div",1),b.Wb(2,"div",2),b.Wb(3,"div",3),b.Wb(4,"h2"),b.Lc(5,"Add New Store Category"),b.Vb(),b.Wb(6,"form",4),b.ic("ngSubmit",(function(){return t.onSubmit()})),b.Wb(7,"div",5),b.Wb(8,"label"),b.Lc(9,"Store Category Name"),b.Vb(),b.Rb(10,"input",6),b.Jc(11,ce,2,1,"div",7),b.Vb(),b.Wb(12,"div",5),b.Wb(13,"label"),b.Lc(14,"Store Category Ranking"),b.Vb(),b.Rb(15,"input",8),b.Jc(16,ne,2,1,"div",7),b.Vb(),b.Wb(17,"div",5),b.Wb(18,"label",9),b.Lc(19,"Status"),b.Vb(),b.Wb(20,"div"),b.Wb(21,"select",10),b.Wb(22,"option",11),b.Lc(23,"Enabled"),b.Vb(),b.Wb(24,"option",12),b.Lc(25,"Disabled"),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Wb(26,"div",5),b.Wb(27,"button",13),b.Lc(28,"Save"),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Vb()),2&e&&(b.Cb(6),b.tc("formGroup",t.addStoreCategoryForm),b.Cb(4),b.tc("ngClass",b.xc(6,le,t.submitted&&t.f.storeCategoryName.errors)),b.Cb(1),b.tc("ngIf",t.submitted&&t.f.storeCategoryName.errors),b.Cb(4),b.tc("ngClass",b.xc(8,le,t.submitted&&t.f.storeCategoryRanking.errors)),b.Cb(1),b.tc("ngIf",t.submitted&&t.f.storeCategoryRanking.errors),b.Cb(11),b.tc("disabled",!t.addStoreCategoryForm.valid||t.disableForm))},directives:[f.w,f.n,f.f,f.c,f.m,f.e,o.l,o.n,f.t,f.q,f.v],styles:[""]}),ue),fe=r("LRne"),ye=r("lJxs"),me=r("JIr8"),Ce=((ge=function(){function e(t){_classCallCheck(this,e),this.categoryService=t}return _createClass(e,[{key:"resolve",value:function(e,t){return this.categoryService.getAllStoreCategory("").pipe(Object(ye.a)((function(e){return{categories:e.store_categories,error:""}})),Object(me.a)((function(e){var t="Retrieval error: "+e;return Object(fe.a)({categories:null,error:t})})))}}]),e}()).\u0275fac=function(e){return new(e||ge)(b.ec(g.a))},ge.\u0275prov=b.Mb({token:ge,factory:ge.\u0275fac,providedIn:"root"}),ge),pe=((be=function(){function e(t){_classCallCheck(this,e),this.categoryService=t}return _createClass(e,[{key:"resolve",value:function(e,t){var r=e.paramMap.get("id");return this.categoryService.getStoreSubCategoryData(r,"").pipe(Object(i.a)((function(e){})),Object(ye.a)((function(e){return{storesubcategorydata:e.store_categories,error:""}})),Object(me.a)((function(e){var t="Retrieval error: "+e;return Object(fe.a)({storesubcategorydata:null,error:t})})))}}]),e}()).\u0275fac=function(e){return new(e||be)(b.ec(g.a))},be.\u0275prov=b.Mb({token:be,factory:be.\u0275fac,providedIn:"root"}),be);function ve(e,t){1&e&&(b.Wb(0,"div"),b.Lc(1,"Sub Category Name is required"),b.Vb())}function he(e,t){if(1&e&&(b.Wb(0,"div",11),b.Jc(1,ve,2,0,"div",12),b.Vb()),2&e){var r=b.mc();b.Cb(1),b.tc("ngIf",r.f.subcategoryName.errors.required)}}function _e(e,t){if(1&e&&(b.Wb(0,"option",13),b.Lc(1),b.nc(2,"upperCaseName"),b.Vb()),2&e){var r=t.$implicit;b.uc("value",null==r?null:r.store_sub_category_id),b.Cb(1),b.Nc(" ",b.oc(2,2,r.store_sub_category)," ")}}var Ve,We,Se,Ie=function(e){return{"is-invalid":e}},ke=[{path:"storecategories",component:ae,resolve:{storeCategoriesdata:Ce}},{path:"storecategories/:storeCategoryId/edit",component:de},{path:"storesubcategories/:categoryId/storesub/:storesubcat/sub/:subcategory/edit",component:(Ve=function(){function e(t,r,o,a){_classCallCheck(this,e),this._categoryService=t,this._router=r,this._activatedRoute=o,this.formBuilder=a,this.disableForm=!1,this.addSubCategoryForm=this.formBuilder.group({subcategoryName:["",f.u.required],subcategoryId:[""],storeCategoryName:["",f.u.required]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.categoryId=+this._activatedRoute.snapshot.params.categoryId,this.subcategoryId=+this._activatedRoute.snapshot.params.subcategory,this.storesubcategoryId=+this._activatedRoute.snapshot.params.storesubcat,console.log(this.storesubcategoryId),0!==this.subcategoryId&&this._categoryService.getSubCategoryData(this.subcategoryId).subscribe((function(t){e.addSubCategoryForm.get("subcategoryName").setValue(t[0].name),e.addSubCategoryForm.get("subcategoryId").setValue(t[0].category_id)})),this._categoryService.getStoreSubCategoryData(this.categoryId,"").subscribe((function(t){e.storeSubCategories=t.store_categories[0].store_sub_category_name,e.addSubCategoryForm.get("storeCategoryName").setValue(e.storesubcategoryId)}))}},{key:"onSubmit",value:function(){var e=this;if(!this.disableForm){if(this.submitted=!0,this.disableForm=!0,this.addSubCategoryForm.invalid)return void(this.disableForm=!1);0==+this.subcategoryId?this._categoryService.addNewSubCategory(this.addSubCategoryForm.value).subscribe((function(t){200==+t.status&&e._router.navigate(["category/storesubcategories",e.categoryId]),400==+t.status&&(alert("Category Not Added . Internal Server Error"),e.disableForm=!1)}),(function(t){e.errorMessage=t,e.disableForm=!1})):this._categoryService.editSubCategory(this.addSubCategoryForm.value).subscribe((function(t){200===t.status&&e._router.navigate(["category/storesubcategories",e.categoryId]),400===t.status&&(alert("Category Not Added . Internal Server Error"),e.disableForm=!1)}),(function(t){e.errorMessage=t,e.disableForm=!1}))}}},{key:"f",get:function(){return this.addSubCategoryForm.controls}}]),e}(),Ve.\u0275fac=function(e){return new(e||Ve)(b.Qb(g.a),b.Qb(a.f),b.Qb(a.a),b.Qb(f.d))},Ve.\u0275cmp=b.Kb({type:Ve,selectors:[["app-add-sub-category"]],decls:21,vars:7,consts:[[1,"jumbotron"],[1,"container"],[1,"row"],[1,"col-md-6","offset-md-3"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","formControlName","subcategoryName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","storeCategoryName",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"]],template:function(e,t){1&e&&(b.Wb(0,"div",0),b.Wb(1,"div",1),b.Wb(2,"div",2),b.Wb(3,"div",3),b.Wb(4,"h2"),b.Lc(5,"Add New Sub Category"),b.Vb(),b.Wb(6,"form",4),b.ic("ngSubmit",(function(){return t.onSubmit()})),b.Wb(7,"div",5),b.Wb(8,"label"),b.Lc(9,"Sub Category Name"),b.Vb(),b.Rb(10,"input",6),b.Jc(11,he,2,1,"div",7),b.Vb(),b.Wb(12,"div",5),b.Wb(13,"label"),b.Lc(14,"Store Sub Category"),b.Vb(),b.Wb(15,"div"),b.Wb(16,"select",8),b.Jc(17,_e,3,4,"option",9),b.Vb(),b.Vb(),b.Vb(),b.Wb(18,"div",5),b.Wb(19,"button",10),b.Lc(20,"Save"),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Vb()),2&e&&(b.Cb(6),b.tc("formGroup",t.addSubCategoryForm),b.Cb(4),b.tc("ngClass",b.xc(5,Ie,t.submitted&&t.f.subcategoryName.errors)),b.Cb(1),b.tc("ngIf",t.submitted&&t.f.subcategoryName.errors),b.Cb(6),b.tc("ngForOf",t.storeSubCategories),b.Cb(2),b.tc("disabled",!t.addSubCategoryForm.valid||t.disableForm))},directives:[f.w,f.n,f.f,f.c,f.m,f.e,o.l,o.n,f.t,o.m,f.q,f.v],pipes:[y.a],styles:[""]}),Ve)},{path:"storesubcategories/:id",component:O,resolve:{storesubcategorydata:pe}},{path:"storesubcategories/:categoryId/edit",component:$},{path:"",component:O},{path:":id",component:M},{path:":id/edit",component:$}],Ne=((We=function e(){_classCallCheck(this,e)}).\u0275mod=b.Ob({type:We}),We.\u0275inj=b.Nb({factory:function(e){return new(e||We)},imports:[[a.j.forChild(ke)],a.j]}),We),Fe=r("PCNd"),Le=((Se=function e(){_classCallCheck(this,e)}).\u0275mod=b.Ob({type:Se}),Se.\u0275inj=b.Nb({factory:function(e){return new(e||Se)},imports:[[f.r,o.c,Fe.a,Fe.a,Ne]]}),Se)},PCNd:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var o=r("ofXK"),a=r("3Pt+"),i=r("tyNb"),c=r("fXoL"),s=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=c.Ob({type:e}),e.\u0275inj=c.Nb({factory:function(t){return new(t||e)},imports:[[o.c,a.r,i.j,a.g],o.c,a.g]}),e}()}}]);