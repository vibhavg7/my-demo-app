(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{y0IW:function(n,e,t){"use strict";t.r(e);var r=t("fXoL"),a=t("ofXK"),i=t("z6cu"),c=t("tk/3"),o=t("vkgz"),s=t("lJxs"),b=t("JIr8"),l=t("R5w1");let d=(()=>{class n{constructor(n){this.http=n,this.bannerServiceUrl="https://api.grostep.com/bannerapi/"}fetchAllBanners(n,e,t){const r={};return r.page_number=n,r.page_size=e,r.filterBy=t,console.log(r),this.http.post(`${this.bannerServiceUrl}bannerinfo`,r).pipe(Object(o.a)(n=>{}),Object(s.a)(n=>n),Object(b.a)(this.handleError))}fetchBannerDetails(n){return this.http.get(`${this.bannerServiceUrl}bannerinfo/${n}`).pipe(Object(o.a)(n=>{}),Object(s.a)(n=>n),Object(b.a)(this.handleError))}addNewBanner(n){const e={};e.bannerName=n.bannerName,e.zipCode=n.zipCode,e.status=n.status;const t=`${this.bannerServiceUrl}addnewbanner`,r=new c.c({"Content-Type":"application/json"});return this.http.post(t,e,{headers:r}).pipe(Object(o.a)(n=>{}),Object(s.a)(n=>n),Object(b.a)(n=>this.handleError(n)))}deleteStore(n){const e=new c.c({"Content-Type":"application/json"});return this.http.delete(`${this.bannerServiceUrl}bannerinfo/${n}`,{headers:e}).pipe(Object(o.a)(n=>{}),Object(b.a)(this.handleError))}editBanner(n,e){const t={};t.banner_name=n.bannerName,t.zipCode=n.zipCode,t.status=+n.status;const r=`${this.bannerServiceUrl}bannerinfo/${e}`;console.log(r);const a=new c.c({"Content-Type":"application/json"});return this.http.put(r,t,{headers:a}).pipe(Object(o.a)(n=>{console.log(JSON.stringify(n))}),Object(s.a)(n=>n),Object(b.a)(this.handleError))}handleError(n){const e=new l.a;return e.errorNumber=100,e.errorMessage=`Server returned code: ${n.status}, error message is: ${n.message}`,e.friendlyMessage="An error retriving data",Object(i.a)(e)}}return n.ngInjectableDef=r.Ob({token:n,factory:function(e){return new(e||n)(r.hc(c.a))},providedIn:"root"}),n})();var u=t("tyNb"),g=t("chph"),p=t("1kSV");const h=["app-banner-data",""],m=["src","assets/product_images/default_image.jpg",3,"width","height","margin",4,"ngIf"],f=["style","display:block;font-size:14px;cursor:pointer;color:blue",3,"click",4,"ngIf"],v=[3,"src","title","height","width","margin",4,"ngIf"],C=[3,"routerLink"],W=[2,"font-weight","bold"],I=[1,"btn","btn-outline-secondary",3,"routerLink"],Y=[1,"btn","btn-outline-secondary",2,"margin-left","5px",3,"click"],M=["src","assets/product_images/default_image.jpg"];function y(n,e){if(1&n&&(r.Yb(0,"img",M),r.Ic(),r.Wb()),2&n){const n=r.mc();r.Hc("width",n.imageWidth,"px"),r.Hc("height",n.imageHeight,"px"),r.Hc("margin",n.imageMargin,"px"),r.Jc()}}const S=[2,"display","block","font-size","14px","cursor","pointer","color","blue",3,"click"];function B(n,e){if(1&n){const n=r.Zb();r.Yb(0,"span",S),r.jc("click",(function(e){r.Ac(n);const t=r.mc();return t.uploadImage(t.banner.banner_id)})),r.Mc(1," Upload Image "),r.Wb()}}const j=[3,"src","title"];function w(n,e){if(1&n&&(r.Yb(0,"img",j),r.Ic(),r.Wb()),2&n){const n=r.mc();r.Hc("height",n.imageHeight,"px"),r.Hc("width",n.imageWidth,"px"),r.Hc("margin",n.imageMargin,"px"),r.Jc(),r.tc("src",null==n.banner?null:n.banner.image_url,r.Bc),r.sc("title",null==n.banner?null:n.banner.banner_name)}}function _(n,e){if(1&n){const n=r.Zb();r.Yb(0,"span",S),r.jc("click",(function(e){r.Ac(n);const t=r.mc();return t.uploadImage(t.banner.banner_id)})),r.Mc(1," Change Image "),r.Wb()}}const N=function(n){return["/merchant",n]},O=function(n){return["/banner",n,"edit"]};let k=(()=>{class n{constructor(n,e){this.modalService=n,this.bannerService=e,this.imageWidth=80,this.imageHeight=80,this.imageMargin=2,console.log("dsdsds")}ngOnInit(){console.log("dsdsds")}uploadImage(n){console.log(n);const e=this.modalService.open(g.a);e.componentInstance.title="Image Upload",e.componentInstance.id=n,e.componentInstance.image_type="banners"}deleteBanner(n){confirm("Are you sure to delete")&&this.bannerService.deleteStore(n).subscribe(n=>{console.log(n)})}}return n.ngComponentDef=r.Mb({type:n,selectors:[["","app-banner-data",""]],factory:function(e){return new(e||n)(r.Sb(p.b),r.Sb(d))},inputs:{banner:["bannerInfo","banner"]},attrs:h,consts:20,vars:17,template:function(n,e){1&n&&(r.Yb(0,"td"),r.Kc(1,y,1,3,"img",m),r.Kc(2,B,2,0,"span",f),r.Kc(3,w,1,5,"img",v),r.Kc(4,_,2,0,"span",f),r.Wb(),r.Yb(5,"td"),r.Yb(6,"a",C),r.Mc(7),r.Wb(),r.Wb(),r.Yb(8,"td"),r.Yb(9,"a",C),r.Mc(10),r.Wb(),r.Wb(),r.Yb(11,"td"),r.Mc(12),r.Wb(),r.Yb(13,"td",W),r.Mc(14),r.Wb(),r.Yb(15,"td"),r.Yb(16,"button",I),r.Mc(17,"Edit"),r.Wb(),r.Yb(18,"button",Y),r.jc("click",(function(n){return e.deleteBanner(null==e.banner?null:e.banner.banner_id)})),r.Mc(19," Delete "),r.Wb(),r.Wb()),2&n&&(r.Cc(1),r.sc("ngIf",!(null!=e.banner&&e.banner.image_url)),r.Cc(2),r.sc("ngIf",!(null!=e.banner&&e.banner.image_url)),r.Cc(3),r.sc("ngIf",null==e.banner?null:e.banner.image_url),r.Cc(4),r.sc("ngIf",null==e.banner?null:e.banner.image_url),r.Cc(6),r.sc("routerLink",r.vc(11,N,e.banner.banner_id)),r.Cc(7),r.Oc(" ",null==e.banner?null:e.banner.banner_id," "),r.Cc(9),r.sc("routerLink",r.vc(13,N,e.banner.banner_id)),r.Cc(10),r.Oc(" ",null==e.banner?null:e.banner.banner_name," "),r.Cc(12),r.Oc(" ",null==e.banner?null:e.banner.zipcode,"\n"),r.Cc(14),r.Nc(null==e.banner?null:e.banner.status?"Available":"Not Available"),r.Cc(16),r.sc("routerLink",r.vc(15,O,null==e.banner?null:e.banner.banner_id)))},directives:[a.m,u.i,u.g],styles:[""]}),n})();var z=t("Exvd");const x=[1,"card"],F=[1,"card-header"],A=[1,"card-body"],D=[1,"row"],K=[1,"col-md-2"],T=[1,"col-md-4"],E=[1,"col-md-6"],P=[1,"btn","btn-outline-secondary",2,"float","right",3,"routerLink"],$=[1,"table-responsive"],H=["style","width:1000px !important","class","table",4,"ngIf"],L=[3,"totalItemCount","currentPage",4,"ngIf"],U=[4,"ngIf"],q=["class","alert alert-danger",4,"ngIf"],J=[1,"table",2,"width","1000px !important"],Z=[2,"width","90px !important"],V=["app-banner-data","",3,"bannerInfo",4,"ngFor","ngForOf"],R=["app-banner-data","",3,"bannerInfo"];function G(n,e){1&n&&r.Tb(0,"tr",R),2&n&&r.sc("bannerInfo",e.$implicit)}function Q(n,e){if(1&n&&(r.Yb(0,"table",J),r.Yb(1,"thead"),r.Yb(2,"tr"),r.Tb(3,"th"),r.Yb(4,"th",Z),r.Mc(5,"Banner Id"),r.Wb(),r.Yb(6,"th"),r.Mc(7,"Banner Name"),r.Wb(),r.Yb(8,"th"),r.Mc(9,"ZipCode"),r.Wb(),r.Yb(10,"th"),r.Mc(11,"Status"),r.Wb(),r.Tb(12,"th"),r.Wb(),r.Wb(),r.Yb(13,"tbody"),r.Kc(14,G,1,1,"tr",V),r.Wb(),r.Wb()),2&n){const n=r.mc();r.Cc(14),r.sc("ngForOf",n.banners)}}const X=[3,"totalItemCount","currentPage"];function nn(n,e){if(1&n){const n=r.Zb();r.Yb(0,"app-pagination",X),r.jc("currentPage",(function(e){return r.Ac(n),r.mc().currentPageFn(e)})),r.Wb()}if(2&n){const n=r.mc();r.sc("totalItemCount",n.bannerTotalCount)}}function en(n,e){1&n&&(r.Yb(0,"div"),r.Mc(1," No Banners Data Found "),r.Wb())}const tn=[1,"alert","alert-danger"];function rn(n,e){if(1&n&&(r.Yb(0,"div",tn),r.Mc(1),r.Wb()),2&n){const n=r.mc();r.Cc(1),r.Oc(" Error: ",n.errorMessage,"\n")}}const an=["/banner/",0,"edit"];let cn=(()=>{class n{constructor(n){this.bannerService=n,this.pageTitle="Banners Dashboard",this.displaytype="AM",this.banners=[],this.filterBy="",this.currentPage=1,this.pageSize=20,this.imageWidth=80,this.imageHeight=80,this.imageMargin=2}ngOnInit(){this.bannerService.fetchAllBanners(this.currentPage,this.pageSize,"").subscribe(n=>{console.log(n),this.bannerTotalCount=n.banner_total_count.banners_count,this.banners=n.banner})}onChanges(){}currentPageFn(n){this.bannerService.fetchAllBanners(n,this.pageSize,this.filterBy).subscribe(n=>{this.bannerTotalCount=n.banner_total_count.banner_count,this.banners=n.banner})}}return n.ngComponentDef=r.Mb({type:n,selectors:[["app-banner"]],factory:function(e){return new(e||n)(r.Sb(d))},consts:16,vars:6,template:function(n,e){1&n&&(r.Yb(0,"div",x),r.Yb(1,"div",F),r.Mc(2),r.Wb(),r.Yb(3,"div",A),r.Yb(4,"div",D),r.Yb(5,"div",K),r.Mc(6,"Filter by:"),r.Wb(),r.Tb(7,"div",T),r.Yb(8,"div",E),r.Yb(9,"button",P),r.Mc(10," Add New Banner "),r.Wb(),r.Wb(),r.Wb(),r.Yb(11,"div",$),r.Kc(12,Q,15,1,"table",H),r.Kc(13,nn,1,1,"app-pagination",L),r.Kc(14,en,2,0,"div",U),r.Wb(),r.Wb(),r.Wb(),r.Kc(15,rn,2,1,"div",q)),2&n&&(r.Cc(2),r.Oc(" ",e.pageTitle," "),r.Cc(9),r.sc("routerLink",an),r.Cc(12),r.sc("ngIf",e.banners.length),r.Cc(13),r.sc("ngIf",e.banners.length),r.Cc(14),r.sc("ngIf",0==(null==e.banners?null:e.banners.length)),r.Cc(15),r.sc("ngIf",e.errorMessage))},directives:[u.g,a.m,a.l,k,z.a],styles:[""]}),n})();var on=t("3Pt+");const sn=[1,"jumbotron"],bn=[1,"container"],ln=[1,"row"],dn=[1,"col-md-6","offset-md-3"],un=[3,"formGroup","ngSubmit"],gn=[1,"form-group"],pn=["type","text","formControlName","bannerName",1,"form-control",3,"ngClass"],hn=["class","invalid-feedback",4,"ngIf"],mn=["type","text","formControlName","zipCode",1,"form-control",3,"ngClass"],fn=["for",""],vn=["formControlName","status",1,"form-control"],Cn=["value","1"],Wn=["value","0"],In=[1,"btn","btn-primary"],Yn=[1,"invalid-feedback"],Mn=[4,"ngIf"];function yn(n,e){1&n&&(r.Yb(0,"div"),r.Mc(1,"Banner Name is required"),r.Wb())}function Sn(n,e){if(1&n&&(r.Yb(0,"div",Yn),r.Kc(1,yn,2,0,"div",Mn),r.Wb()),2&n){const n=r.mc();r.Cc(1),r.sc("ngIf",n.f.bannerName.errors.required)}}function Bn(n,e){1&n&&(r.Yb(0,"div"),r.Mc(1,"ZipCode is required"),r.Wb())}function jn(n,e){if(1&n&&(r.Yb(0,"div",Yn),r.Kc(1,Bn,2,0,"div",Mn),r.Wb()),2&n){const n=r.mc();r.Cc(1),r.sc("ngIf",n.f.zipCode.errors.required)}}const wn=function(n){return{"is-invalid":n}},_n=[{path:"",component:cn},{path:":bannerId/edit",component:(()=>{class n{constructor(n,e,t,r){this.formBuilder=n,this.bannerService=e,this.activatedRoute=t,this.router=r,this.addBannerForm=this.formBuilder.group({bannerName:["",on.t.required],zipCode:["",on.t.required],status:[""]})}get f(){return this.addBannerForm.controls}ngOnInit(){this.bannerId=+this.activatedRoute.snapshot.params.bannerId,0!==this.bannerId&&this.bannerService.fetchBannerDetails(this.bannerId).subscribe(n=>{const e=n.banner;console.log(e),this.addBannerForm.get("bannerName").setValue(e.banner_name),this.addBannerForm.get("zipCode").setValue(e.zipcode),this.addBannerForm.get("status").setValue(e.status)})}onSubmit(){this.submitted=!0,this.addBannerForm.invalid||(""==this.bannerId?this.bannerService.addNewBanner(this.addBannerForm.value).subscribe(n=>{console.log(n),"200"==n.status&&this.router.navigate(["banner"]),"400"==n.status&&alert("Banner Not Added . Internal Server Error")},n=>{this.errorMessage=n}):this.bannerService.editBanner(this.addBannerForm.value,this.bannerId).subscribe(n=>{console.log(n),"200"==n.status&&this.router.navigate(["banner"]),"400"==n.status&&alert("Banner Not Added . Internal Server Error")},n=>{this.errorMessage=n}))}}return n.ngComponentDef=r.Mb({type:n,selectors:[["app-banner-edit"]],factory:function(e){return new(e||n)(r.Sb(on.c),r.Sb(d),r.Sb(u.a),r.Sb(u.f))},consts:29,vars:9,template:function(n,e){1&n&&(r.Yb(0,"div",sn),r.Yb(1,"div",bn),r.Yb(2,"div",ln),r.Yb(3,"div",dn),r.Yb(4,"h2"),r.Mc(5,"Add New Banner"),r.Wb(),r.Yb(6,"form",un),r.jc("ngSubmit",(function(n){return e.onSubmit()})),r.Yb(7,"div",gn),r.Yb(8,"label"),r.Mc(9,"Banner Name"),r.Wb(),r.Tb(10,"input",pn),r.Kc(11,Sn,2,1,"div",hn),r.Wb(),r.Yb(12,"div",gn),r.Yb(13,"label"),r.Mc(14,"Zip Code"),r.Wb(),r.Tb(15,"input",mn),r.Kc(16,jn,2,1,"div",hn),r.Wb(),r.Yb(17,"div",gn),r.Yb(18,"label",fn),r.Mc(19,"Status"),r.Wb(),r.Yb(20,"div"),r.Yb(21,"select",vn),r.Yb(22,"option",Cn),r.Mc(23,"Enabled"),r.Wb(),r.Yb(24,"option",Wn),r.Mc(25,"Disabled"),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Yb(26,"div",gn),r.Yb(27,"button",In),r.Mc(28,"Save"),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb()),2&n&&(r.Cc(6),r.sc("formGroup",e.addBannerForm),r.Cc(10),r.sc("ngClass",r.vc(5,wn,e.submitted&&e.f.bannerName.errors)),r.Cc(11),r.sc("ngIf",e.submitted&&e.f.bannerName.errors),r.Cc(15),r.sc("ngClass",r.vc(7,wn,e.submitted&&e.f.zipCode.errors)),r.Cc(16),r.sc("ngIf",e.submitted&&e.f.zipCode.errors))},directives:[on.v,on.l,on.e,on.b,on.k,on.d,a.k,a.m,on.s,on.o,on.u],styles:[""]}),n})()}];let Nn=(()=>{class n{}return n.ngModuleDef=r.Qb({type:n}),n.ngInjectorDef=r.Pb({factory:function(e){return new(e||n)},imports:[[u.j.forChild(_n)],u.j]}),n})();u.j.forChild(_n);var On=t("PCNd");t.d(e,"BannerModule",(function(){return kn}));let kn=(()=>{class n{}return n.ngModuleDef=r.Qb({type:n}),n.ngInjectorDef=r.Pb({factory:function(e){return new(e||n)},imports:[[a.b,on.q,Nn,On.a]]}),n})()}}]);