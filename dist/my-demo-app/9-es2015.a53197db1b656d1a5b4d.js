(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{y0IW:function(n,e,t){"use strict";t.r(e),t.d(e,"BannerModule",(function(){return A}));var r=t("ofXK"),a=t("tyNb"),i=t("fXoL"),b=t("z6cu"),o=t("tk/3"),c=t("vkgz"),s=t("lJxs"),l=t("JIr8"),d=t("R5w1");let u=(()=>{class n{constructor(n){this.http=n,this.bannerServiceUrl="https://api.grostep.com/v2/bannerapi/"}fetchAllBanners(n,e,t){const r={};return r.page_number=n,r.page_size=e,r.filterBy=t,console.log(r),this.http.post(this.bannerServiceUrl+"bannerinfo",r).pipe(Object(c.a)(n=>{}),Object(s.a)(n=>n),Object(l.a)(this.handleError))}fetchBannerDetails(n){return this.http.get(`${this.bannerServiceUrl}bannerinfo/${n}`).pipe(Object(c.a)(n=>{}),Object(s.a)(n=>n),Object(l.a)(this.handleError))}addNewBanner(n){const e={};e.bannerName=n.bannerName,e.zipCode=n.zipCode,e.status=n.status;const t=this.bannerServiceUrl+"addnewbanner",r=new o.e({"Content-Type":"application/json"});return this.http.post(t,e,{headers:r}).pipe(Object(c.a)(n=>{}),Object(s.a)(n=>n),Object(l.a)(n=>this.handleError(n)))}deleteStore(n){const e=new o.e({"Content-Type":"application/json"});return this.http.delete(`${this.bannerServiceUrl}bannerinfo/${n}`,{headers:e}).pipe(Object(c.a)(n=>{}),Object(l.a)(this.handleError))}editBanner(n,e){const t={};t.banner_name=n.bannerName,t.zipCode=n.zipCode,t.status=+n.status;const r=`${this.bannerServiceUrl}bannerinfo/${e}`,a=new o.e({"Content-Type":"application/json"});return this.http.put(r,t,{headers:a}).pipe(Object(c.a)(n=>{console.log(JSON.stringify(n))}),Object(s.a)(n=>n),Object(l.a)(this.handleError))}handleError(n){const e=new d.a;return e.errorNumber=100,e.errorMessage=`Server returned code: ${n.status}, error message is: ${n.message}`,e.friendlyMessage="An error retriving data",Object(b.a)(e)}}return n.\u0275fac=function(e){return new(e||n)(i.ec(o.b))},n.\u0275prov=i.Mb({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var p=t("chph"),g=t("1kSV");const h=["app-banner-data",""];function m(n,e){if(1&n&&i.Rb(0,"img",7),2&n){const n=i.mc();i.Ic("width",n.imageWidth,"px")("height",n.imageHeight,"px")("margin",n.imageMargin,"px")}}function f(n,e){if(1&n){const n=i.Xb();i.Wb(0,"span",8),i.ic("click",(function(){i.Dc(n);const e=i.mc();return e.uploadImage(e.banner.banner_id)})),i.Lc(1," Upload Image "),i.Vb()}}function v(n,e){if(1&n&&i.Rb(0,"img",9),2&n){const n=i.mc();i.Ic("height",n.imageHeight,"px")("width",n.imageWidth,"px")("margin",n.imageMargin,"px"),i.uc("src",null==n.banner?null:n.banner.image_url,i.Ec),i.tc("title",null==n.banner?null:n.banner.banner_name)}}function C(n,e){if(1&n){const n=i.Xb();i.Wb(0,"span",8),i.ic("click",(function(){i.Dc(n);const e=i.mc();return e.uploadImage(e.banner.banner_id)})),i.Lc(1," Change Image "),i.Vb()}}const W=function(n){return["/merchant",n]},V=function(n){return["/banner",n,"edit"]};let I=(()=>{class n{constructor(n,e){this.modalService=n,this.bannerService=e,this.imageWidth=80,this.imageHeight=80,this.imageMargin=2,console.log("dsdsds")}ngOnInit(){console.log("dsdsds")}uploadImage(n){console.log(n);const e=this.modalService.open(p.a);e.componentInstance.title="Image Upload",e.componentInstance.id=n,e.componentInstance.image_type="banners"}deleteBanner(n){confirm("Are you sure to delete")&&this.bannerService.deleteStore(n).subscribe(n=>{console.log(n)})}}return n.\u0275fac=function(e){return new(e||n)(i.Qb(g.f),i.Qb(u))},n.\u0275cmp=i.Kb({type:n,selectors:[["","app-banner-data",""]],inputs:{banner:["bannerInfo","banner"]},attrs:h,decls:20,vars:17,consts:[["src","assets/product_images/default_image.jpg",3,"width","height","margin",4,"ngIf"],["style","display:block;font-size:14px;cursor:pointer;color:blue",3,"click",4,"ngIf"],[3,"src","title","height","width","margin",4,"ngIf"],[3,"routerLink"],[2,"font-weight","bold"],[1,"btn","btn-outline-secondary",3,"routerLink"],[1,"btn","btn-outline-secondary",2,"margin-left","5px",3,"click"],["src","assets/product_images/default_image.jpg"],[2,"display","block","font-size","14px","cursor","pointer","color","blue",3,"click"],[3,"src","title"]],template:function(n,e){1&n&&(i.Wb(0,"td"),i.Jc(1,m,1,6,"img",0),i.Jc(2,f,2,0,"span",1),i.Jc(3,v,1,8,"img",2),i.Jc(4,C,2,0,"span",1),i.Vb(),i.Wb(5,"td"),i.Wb(6,"a",3),i.Lc(7),i.Vb(),i.Vb(),i.Wb(8,"td"),i.Wb(9,"a",3),i.Lc(10),i.Vb(),i.Vb(),i.Wb(11,"td"),i.Lc(12),i.Vb(),i.Wb(13,"td",4),i.Lc(14),i.Vb(),i.Wb(15,"td"),i.Wb(16,"button",5),i.Lc(17,"Edit"),i.Vb(),i.Wb(18,"button",6),i.ic("click",(function(){return e.deleteBanner(null==e.banner?null:e.banner.banner_id)})),i.Lc(19," Delete "),i.Vb(),i.Vb()),2&n&&(i.Cb(1),i.tc("ngIf",!(null!=e.banner&&e.banner.image_url)),i.Cb(1),i.tc("ngIf",!(null!=e.banner&&e.banner.image_url)),i.Cb(1),i.tc("ngIf",null==e.banner?null:e.banner.image_url),i.Cb(1),i.tc("ngIf",null==e.banner?null:e.banner.image_url),i.Cb(2),i.tc("routerLink",i.xc(11,W,e.banner.banner_id)),i.Cb(1),i.Nc(" ",null==e.banner?null:e.banner.banner_id," "),i.Cb(2),i.tc("routerLink",i.xc(13,W,e.banner.banner_id)),i.Cb(1),i.Nc(" ",null==e.banner?null:e.banner.banner_name," "),i.Cb(2),i.Nc(" ",null==e.banner?null:e.banner.zipcode,"\n"),i.Cb(2),i.Mc(null!=e.banner&&e.banner.status?"Available":"Not Available"),i.Cb(2),i.tc("routerLink",i.xc(15,V,null==e.banner?null:e.banner.banner_id)))},directives:[r.n,a.i,a.g],styles:["button[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-size:14px}"]}),n})();var y=t("Exvd");function B(n,e){1&n&&i.Rb(0,"tr",16),2&n&&i.tc("bannerInfo",e.$implicit)}function _(n,e){if(1&n&&(i.Wb(0,"table",13),i.Wb(1,"thead"),i.Wb(2,"tr"),i.Rb(3,"th"),i.Wb(4,"th",14),i.Lc(5,"Banner Id"),i.Vb(),i.Wb(6,"th"),i.Lc(7,"Banner Name"),i.Vb(),i.Wb(8,"th"),i.Lc(9,"ZipCode"),i.Vb(),i.Wb(10,"th"),i.Lc(11,"Status"),i.Vb(),i.Rb(12,"th"),i.Vb(),i.Vb(),i.Wb(13,"tbody"),i.Jc(14,B,1,1,"tr",15),i.Vb(),i.Vb()),2&n){const n=i.mc();i.Cb(14),i.tc("ngForOf",n.banners)}}function w(n,e){if(1&n){const n=i.Xb();i.Wb(0,"app-pagination",17),i.ic("currentPage",(function(e){return i.Dc(n),i.mc().currentPageFn(e)})),i.Vb()}if(2&n){const n=i.mc();i.tc("totalItemCount",n.bannerTotalCount)}}function L(n,e){1&n&&(i.Wb(0,"div"),i.Lc(1," No Banners Data Found "),i.Vb())}function N(n,e){if(1&n&&(i.Wb(0,"div",18),i.Lc(1),i.Vb()),2&n){const n=i.mc();i.Cb(1),i.Nc(" Error: ",n.errorMessage,"\n")}}const S=function(){return["/banner/",0,"edit"]};let O=(()=>{class n{constructor(n){this.bannerService=n,this.pageTitle="Banners Dashboard",this.displaytype="AM",this.banners=[],this.filterBy="",this.currentPage=1,this.pageSize=20,this.imageWidth=80,this.imageHeight=80,this.imageMargin=2}ngOnInit(){this.bannerService.fetchAllBanners(this.currentPage,this.pageSize,"").subscribe(n=>{console.log(n),this.bannerTotalCount=n.banner_total_count.banners_count,this.banners=n.banner})}onChanges(){}currentPageFn(n){this.bannerService.fetchAllBanners(n,this.pageSize,this.filterBy).subscribe(n=>{this.bannerTotalCount=n.banner_total_count.banner_count,this.banners=n.banner})}}return n.\u0275fac=function(e){return new(e||n)(i.Qb(u))},n.\u0275cmp=i.Kb({type:n,selectors:[["app-banner"]],decls:16,vars:7,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-2"],[1,"col-md-4"],[1,"col-md-6"],[1,"btn","btn-outline-secondary",2,"float","right",3,"routerLink"],[1,"table-responsive"],["style","width:1000px !important","class","table",4,"ngIf"],[3,"totalItemCount","currentPage",4,"ngIf"],[4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"table",2,"width","1000px !important"],[2,"width","90px !important"],["app-banner-data","",3,"bannerInfo",4,"ngFor","ngForOf"],["app-banner-data","",3,"bannerInfo"],[3,"totalItemCount","currentPage"],[1,"alert","alert-danger"]],template:function(n,e){1&n&&(i.Wb(0,"div",0),i.Wb(1,"div",1),i.Lc(2),i.Vb(),i.Wb(3,"div",2),i.Wb(4,"div",3),i.Wb(5,"div",4),i.Lc(6,"Filter by:"),i.Vb(),i.Rb(7,"div",5),i.Wb(8,"div",6),i.Wb(9,"button",7),i.Lc(10," Add New Banner "),i.Vb(),i.Vb(),i.Vb(),i.Wb(11,"div",8),i.Jc(12,_,15,1,"table",9),i.Jc(13,w,1,1,"app-pagination",10),i.Jc(14,L,2,0,"div",11),i.Vb(),i.Vb(),i.Vb(),i.Jc(15,N,2,1,"div",12)),2&n&&(i.Cb(2),i.Nc(" ",e.pageTitle," "),i.Cb(7),i.tc("routerLink",i.wc(6,S)),i.Cb(3),i.tc("ngIf",e.banners.length),i.Cb(1),i.tc("ngIf",e.banners.length),i.Cb(1),i.tc("ngIf",0==(null==e.banners?null:e.banners.length)),i.Cb(1),i.tc("ngIf",e.errorMessage))},directives:[a.g,r.n,r.m,I,y.a],styles:["button[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-size:14px}"]}),n})();var j=t("3Pt+");function k(n,e){1&n&&(i.Wb(0,"div"),i.Lc(1,"Banner Name is required"),i.Vb())}function x(n,e){if(1&n&&(i.Wb(0,"div",14),i.Jc(1,k,2,0,"div",15),i.Vb()),2&n){const n=i.mc();i.Cb(1),i.tc("ngIf",n.f.bannerName.errors.required)}}function z(n,e){1&n&&(i.Wb(0,"div"),i.Lc(1,"ZipCode is required"),i.Vb())}function M(n,e){if(1&n&&(i.Wb(0,"div",14),i.Jc(1,z,2,0,"div",15),i.Vb()),2&n){const n=i.mc();i.Cb(1),i.tc("ngIf",n.f.zipCode.errors.required)}}const J=function(n){return{"is-invalid":n}},F=[{path:"",component:O},{path:":bannerId/edit",component:(()=>{class n{constructor(n,e,t,r){this.formBuilder=n,this.bannerService=e,this.activatedRoute=t,this.router=r,this.addBannerForm=this.formBuilder.group({bannerName:["",j.u.required],zipCode:["",j.u.required],status:[""]})}get f(){return this.addBannerForm.controls}ngOnInit(){this.bannerId=+this.activatedRoute.snapshot.params.bannerId,0!==this.bannerId&&this.bannerService.fetchBannerDetails(this.bannerId).subscribe(n=>{const e=n.banner;console.log(e),this.addBannerForm.get("bannerName").setValue(e.banner_name),this.addBannerForm.get("zipCode").setValue(e.zipcode),this.addBannerForm.get("status").setValue(e.status)})}onSubmit(){this.submitted=!0,this.addBannerForm.invalid||(""==this.bannerId?this.bannerService.addNewBanner(this.addBannerForm.value).subscribe(n=>{console.log(n),"200"==n.status&&this.router.navigate(["banner"]),"400"==n.status&&alert("Banner Not Added . Internal Server Error")},n=>{this.errorMessage=n}):this.bannerService.editBanner(this.addBannerForm.value,this.bannerId).subscribe(n=>{console.log(n),"200"==n.status&&this.router.navigate(["banner"]),"400"==n.status&&alert("Banner Not Added . Internal Server Error")},n=>{this.errorMessage=n}))}}return n.\u0275fac=function(e){return new(e||n)(i.Qb(j.d),i.Qb(u),i.Qb(a.a),i.Qb(a.f))},n.\u0275cmp=i.Kb({type:n,selectors:[["app-banner-edit"]],decls:29,vars:9,consts:[[1,"jumbotron"],[1,"container"],[1,"row"],[1,"col-md-6","offset-md-3"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","formControlName","bannerName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","zipCode",1,"form-control",3,"ngClass"],["for",""],["formControlName","status",1,"form-control"],["value","1"],["value","0"],[1,"btn","btn-primary"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(n,e){1&n&&(i.Wb(0,"div",0),i.Wb(1,"div",1),i.Wb(2,"div",2),i.Wb(3,"div",3),i.Wb(4,"h2"),i.Lc(5,"Add New Banner"),i.Vb(),i.Wb(6,"form",4),i.ic("ngSubmit",(function(){return e.onSubmit()})),i.Wb(7,"div",5),i.Wb(8,"label"),i.Lc(9,"Banner Name"),i.Vb(),i.Rb(10,"input",6),i.Jc(11,x,2,1,"div",7),i.Vb(),i.Wb(12,"div",5),i.Wb(13,"label"),i.Lc(14,"Zip Code"),i.Vb(),i.Rb(15,"input",8),i.Jc(16,M,2,1,"div",7),i.Vb(),i.Wb(17,"div",5),i.Wb(18,"label",9),i.Lc(19,"Status"),i.Vb(),i.Wb(20,"div"),i.Wb(21,"select",10),i.Wb(22,"option",11),i.Lc(23,"Enabled"),i.Vb(),i.Wb(24,"option",12),i.Lc(25,"Disabled"),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Wb(26,"div",5),i.Wb(27,"button",13),i.Lc(28,"Save"),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Vb()),2&n&&(i.Cb(6),i.tc("formGroup",e.addBannerForm),i.Cb(4),i.tc("ngClass",i.xc(5,J,e.submitted&&e.f.bannerName.errors)),i.Cb(1),i.tc("ngIf",e.submitted&&e.f.bannerName.errors),i.Cb(4),i.tc("ngClass",i.xc(7,J,e.submitted&&e.f.zipCode.errors)),i.Cb(1),i.tc("ngIf",e.submitted&&e.f.zipCode.errors))},directives:[j.w,j.n,j.f,j.c,j.m,j.e,r.l,r.n,j.t,j.q,j.v],styles:[""]}),n})()}];let P=(()=>{class n{}return n.\u0275mod=i.Ob({type:n}),n.\u0275inj=i.Nb({factory:function(e){return new(e||n)},imports:[[a.j.forChild(F)],a.j]}),n})();var E=t("PCNd");let A=(()=>{class n{}return n.\u0275mod=i.Ob({type:n}),n.\u0275inj=i.Nb({factory:function(e){return new(e||n)},imports:[[r.c,j.r,P,E.a]]}),n})()}}]);