function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var c=0;c<t.length;c++){var n=t[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,c){return t&&_defineProperties(e.prototype,t),c&&_defineProperties(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{AehD:function(e,t,c){"use strict";c.r(t),c.d(t,"FeedbacksModule",(function(){return V}));var n,a,r=c("ofXK"),o=c("tyNb"),i=c("R5w1"),s=c("vkgz"),d=c("/uUt"),b=c("Kj3r"),u=c("eIep"),l=c("fXoL"),f=c("3Pt+"),p=c("z6cu"),m=c("tk/3"),h=c("lJxs"),k=c("JIr8"),v=((n=function(){function e(t){_classCallCheck(this,e),this.httpClient=t,this.customerServiceUrl="https://api.grostep.com/customerapi/"}return _createClass(e,[{key:"fetchAllFeedBacks",value:function(e,t,c){var n={};return n.page_number=e,n.page_size=t,n.filterBy=c,this.httpClient.post(this.customerServiceUrl+"customerFeedback",n).pipe(Object(s.a)((function(e){})),Object(h.a)((function(e){return e})),Object(k.a)(this.handleError))}},{key:"fetchFeedBackDetailById",value:function(e,t,c,n){var a={};return a.page_number=e,a.page_size=t,a.filterBy=c,a.feedbackId=n,this.httpClient.post("".concat(this.customerServiceUrl,"customerFeedbackInfo/").concat(n),a).pipe(Object(s.a)((function(e){})),Object(h.a)((function(e){return e})),Object(k.a)(this.handleError))}},{key:"addNewFeedBack",value:function(e){var t=this,c=JSON.parse(localStorage.getItem("currentUser")),n={};n.customer_id=e.customer_id,n.name=e.name,n.email=e.email,n.phone=e.phone,n.message=e.message,n.parentId=0,n.actionBy=c.employee_id,n.customerCity=e.customerCity,n.ticketMode=2;var a=this.customerServiceUrl+"addCustomerFeedback",r=new m.c({"Content-Type":"application/json"});return this.httpClient.post(a,n,{headers:r}).pipe(Object(s.a)((function(e){})),Object(h.a)((function(e){return e})),Object(k.a)((function(e){return t.handleError(e)})))}},{key:"editFeedBack",value:function(e,t){}},{key:"handleError",value:function(e){var t=new i.a;return t.errorNumber=100,t.errorMessage="Server returned code: ".concat(e.status,", error message is: ").concat(e.message),t.friendlyMessage="An error retriving data",Object(p.a)(t)}}]),e}()).\u0275fac=function(e){return new(e||n)(l.Zb(m.a))},n.\u0275prov=l.Ib({token:n,factory:n.\u0275fac,providedIn:"root"}),n),g=["app-feedback-data",""],C=function(e){return["/feedbacks/feedbackinfo",e]},R=((a=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275cmp=l.Gb({type:a,selectors:[["","app-feedback-data",""]],inputs:{feedBackInfo:"feedBackInfo"},attrs:g,decls:17,vars:13,consts:[["target","_blank",3,"routerLink"],[2,"width","50px"],[2,"font-weight","bold"]],template:function(e,t){1&e&&(l.Rb(0,"td"),l.Rb(1,"a",0),l.Cc(2),l.Qb(),l.Qb(),l.Rb(3,"td",1),l.Rb(4,"a",0),l.Cc(5),l.Qb(),l.Qb(),l.Rb(6,"td"),l.Cc(7),l.Qb(),l.Rb(8,"td"),l.Cc(9),l.Qb(),l.Rb(10,"td"),l.Cc(11),l.Qb(),l.Rb(12,"td"),l.Cc(13),l.Qb(),l.Rb(14,"td",2),l.Cc(15),l.Qb(),l.Nb(16,"td")),2&e&&(l.zb(1),l.lc("routerLink",l.pc(9,C,null==t.feedBackInfo?null:t.feedBackInfo.customer_feedback_id)),l.zb(1),l.Ec(" ",null==t.feedBackInfo?null:t.feedBackInfo.customer_feedback_id," "),l.zb(2),l.lc("routerLink",l.pc(11,C,null==t.feedBackInfo?null:t.feedBackInfo.customer_feedback_id)),l.zb(1),l.Ec(" ",null==t.feedBackInfo?null:t.feedBackInfo.customer_phone," "),l.zb(2),l.Ec(" ",null==t.feedBackInfo?null:t.feedBackInfo.customer_name,"\n"),l.zb(2),l.Ec(" ",null==t.feedBackInfo?null:t.feedBackInfo.city,"\n"),l.zb(2),l.Ec(" ",null==t.feedBackInfo?null:t.feedBackInfo.mode,"\n"),l.zb(2),l.Ec(" ",null==t.feedBackInfo?null:t.feedBackInfo.action_by,"\n"),l.zb(2),l.Ec(" ",1===(null==t.feedBackInfo?null:t.feedBackInfo.status)?"Created":"Completed","\n"))},directives:[o.i],styles:['.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:45px;height:20px;margin:20px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none;background-color:#ccc}.slider[_ngcontent-%COMP%]{cursor:pointer;top:0;bottom:0;background-color:#ccc}.slider[_ngcontent-%COMP%], .slider[_ngcontent-%COMP%]:before{position:absolute;left:0;right:0;transition:.4s}.slider[_ngcontent-%COMP%]:before{content:"";height:26px;width:26px;bottom:-3px;background-color:#2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateX(20px)}.slider.round[_ngcontent-%COMP%]{border-radius:20px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}']}),a),B=c("Exvd");function Q(e,t){1&e&&l.Nb(0,"tr",18),2&e&&l.lc("feedBackInfo",t.$implicit)}function _(e,t){if(1&e&&(l.Rb(0,"table",15),l.Rb(1,"thead"),l.Rb(2,"tr"),l.Rb(3,"th",16),l.Cc(4,"Id"),l.Qb(),l.Rb(5,"th"),l.Cc(6,"Phone"),l.Qb(),l.Rb(7,"th"),l.Cc(8,"Name"),l.Qb(),l.Rb(9,"th"),l.Cc(10,"City"),l.Qb(),l.Rb(11,"th"),l.Cc(12,"Mode"),l.Qb(),l.Rb(13,"th"),l.Cc(14,"Action By"),l.Qb(),l.Rb(15,"th"),l.Cc(16,"Status"),l.Qb(),l.Nb(17,"th"),l.Qb(),l.Qb(),l.Rb(18,"tbody"),l.Ac(19,Q,1,1,"tr",17),l.Qb(),l.Qb()),2&e){var c=l.fc();l.zb(19),l.lc("ngForOf",c.feedBacks)}}function y(e,t){if(1&e){var c=l.Sb();l.Rb(0,"app-pagination",19),l.dc("currentPage",(function(e){return l.uc(c),l.fc().currentPageFn(e)})),l.Qb()}if(2&e){var n=l.fc();l.lc("totalItemCount",n.feedBacktotalcount)}}function I(e,t){1&e&&(l.Rb(0,"div"),l.Cc(1," No FeedBack Data Found "),l.Qb())}function F(e,t){if(1&e&&(l.Rb(0,"div",20),l.Cc(1),l.Qb()),2&e){var c=l.fc();l.zb(1),l.Ec(" Error: ",c.errorMessage,"\n")}}var z,w=function(){return["/feedbacks/",0,"edit"]},M=((z=function(){function e(t,c,n){_classCallCheck(this,e),this.formBuilder=t,this.feedBackService=c,this.activatedRoute=n,this.pageTitle="Feedbacks Dashboard",this.filterBy="",this.currentPage=1,this.pageSize=20,this.searchCriteriaForm=this.formBuilder.group({searchCriteria:[""]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this.activatedRoute.snapshot.data.resolvedFeedBacks;e instanceof i.a?this.errorMessage=e.errorMessage:(this.feedBacktotalcount=e.customer_feedback_count[0].customer_feedback_count,this.feedBacks=e.customer_feedback_info)}},{key:"onChanges",value:function(){var e=this;this.searchCriteriaForm.get("searchCriteria").valueChanges.pipe(Object(s.a)((function(e){})),Object(d.a)(),Object(b.a)(200),Object(u.a)((function(t){return e.filterBy=t,e.feedBackService.fetchAllFeedBacks(e.currentPage,e.pageSize,t)}))).subscribe((function(t){console.log(t),e.feedBacktotalcount=t.customer_feedback_count[0].customer_feedback_count,e.feedBacks=t.customer_feedback_info}))}},{key:"currentPageFn",value:function(e){var t=this;this.feedBackService.fetchAllFeedBacks(e,this.pageSize,this.filterBy).subscribe((function(e){t.feedBacktotalcount=e.customer_feedback_count.customer_feedback_count,t.feedBacks=e.customer_feedback_info}))}}]),e}()).\u0275fac=function(e){return new(e||z)(l.Mb(f.c),l.Mb(v),l.Mb(o.a))},z.\u0275cmp=l.Gb({type:z,selectors:[["app-feedback-dashboard"]],decls:18,vars:8,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-2"],[1,"col-md-4"],[3,"formGroup"],["formControlName","searchCriteria","type","text","id","keyword","placeholder","Search FeedBack By Phone Number","autocomplete","off","autofocus","",1,"form-control",3,"keyup"],[1,"col-md-6"],["type","button",1,"btn","btn-outline-secondary",2,"float","right",3,"routerLink"],[1,"table-responsive"],["style","width:1200px !important","class","table",4,"ngIf"],[3,"totalItemCount","currentPage",4,"ngIf"],[4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"table",2,"width","1200px !important"],[2,"width","90px !important"],["app-feedback-data","",3,"feedBackInfo",4,"ngFor","ngForOf"],["app-feedback-data","",3,"feedBackInfo"],[3,"totalItemCount","currentPage"],[1,"alert","alert-danger"]],template:function(e,t){1&e&&(l.Rb(0,"div",0),l.Rb(1,"div",1),l.Cc(2),l.Qb(),l.Rb(3,"div",2),l.Rb(4,"div",3),l.Rb(5,"div",4),l.Cc(6,"Filter by:"),l.Qb(),l.Rb(7,"div",5),l.Rb(8,"form",6),l.Rb(9,"input",7),l.dc("keyup",(function(){return t.onChanges()})),l.Qb(),l.Qb(),l.Qb(),l.Rb(10,"div",8),l.Rb(11,"a",9),l.Cc(12," Add New FeedBack "),l.Qb(),l.Qb(),l.Qb(),l.Rb(13,"div",10),l.Ac(14,_,20,1,"table",11),l.Ac(15,y,1,1,"app-pagination",12),l.Ac(16,I,2,0,"div",13),l.Qb(),l.Qb(),l.Qb(),l.Ac(17,F,2,1,"div",14)),2&e&&(l.zb(2),l.Ec(" ",t.pageTitle," "),l.zb(6),l.lc("formGroup",t.searchCriteriaForm),l.zb(3),l.lc("routerLink",l.oc(7,w)),l.zb(3),l.lc("ngIf",t.feedBacktotalcount),l.zb(1),l.lc("ngIf",t.feedBacktotalcount),l.zb(1),l.lc("ngIf",0==t.feedBacktotalcount),l.zb(1),l.lc("ngIf",t.errorMessage))},directives:[f.u,f.l,f.e,f.b,f.k,f.d,o.i,r.m,r.l,R,B.a],styles:[""]}),z),O=c("LRne");function N(e,t){1&e&&(l.Rb(0,"div"),l.Cc(1,"Customer Name is required"),l.Qb())}function P(e,t){if(1&e&&(l.Rb(0,"div",19),l.Ac(1,N,2,0,"div",20),l.Qb()),2&e){var c=l.fc();l.zb(1),l.lc("ngIf",c.f.name.errors.required)}}function S(e,t){1&e&&(l.Rb(0,"div"),l.Cc(1,"Phone Number is required"),l.Qb())}function j(e,t){if(1&e&&(l.Rb(0,"div",19),l.Ac(1,S,2,0,"div",20),l.Qb()),2&e){var c=l.fc();l.zb(1),l.lc("ngIf",c.f.phone.errors.required)}}function A(e,t){1&e&&(l.Rb(0,"div"),l.Cc(1,"Feedback message is required"),l.Qb())}function x(e,t){if(1&e&&(l.Rb(0,"div",19),l.Ac(1,A,2,0,"div",20),l.Qb()),2&e){var c=l.fc();l.zb(1),l.lc("ngIf",c.f.message.errors.required)}}var E=function(e){return{"is-invalid":e}};function G(e,t){if(1&e&&(l.Rb(0,"div",2),l.Rb(1,"div",0),l.Rb(2,"div",1),l.Rb(3,"span"),l.Cc(4),l.Rb(5,"span",8),l.Cc(6),l.gc(7,"date"),l.Qb(),l.Qb(),l.Qb(),l.Rb(8,"div",5),l.Cc(9),l.Qb(),l.Qb(),l.Qb()),2&e){var c=t.$implicit;l.zb(4),l.Ec(" Message Id: ",null==c?null:c.message_id," "),l.zb(2),l.Ec(" ",l.ic(7,3,null==c?null:c.last_updated,"medium")," "),l.zb(3),l.Ec(" ",null==c?null:c.feedback_text," ")}}function L(e,t){if(1&e&&(l.Rb(0,"div"),l.Ac(1,G,10,6,"div",7),l.Qb()),2&e){var c=l.fc();l.zb(1),l.lc("ngForOf",c.customerFeedbackMessages)}}var D,J,q,T,U,K,X=function(e){return["/feedbacks/",e,"edit"]},Z=[{path:"",component:M,resolve:{resolvedFeedBacks:(T=function(){function e(t){_classCallCheck(this,e),this.feedBackService=t,this.pagenumber=1,this.pagesize=20,this.filterBy=""}return _createClass(e,[{key:"resolve",value:function(e,t){return this.feedBackService.fetchAllFeedBacks(this.pagenumber,this.pagesize,this.filterBy).pipe(Object(k.a)((function(e){return Object(O.a)(e)})))}}]),e}(),T.\u0275fac=function(e){return new(e||T)(l.Zb(v))},T.\u0275prov=l.Ib({token:T,factory:T.\u0275fac,providedIn:"root"}),T)}},{path:":feedbackId/edit",component:(q=function(){function e(t,c,n,a){_classCallCheck(this,e),this.formBuilder=t,this.activatedRoute=c,this.feedBackService=n,this.router=a,this.addFeedBackForm=this.formBuilder.group({customer_id:[""],name:[""],email:[""],phone:[""],message:[""],customerCity:[""]})}return _createClass(e,[{key:"ngOnInit",value:function(){this.feedbackId=+this.activatedRoute.snapshot.params.feedbackId}},{key:"onSubmit",value:function(){var e=this;this.submitted=!0,this.addFeedBackForm.invalid||0===this.feedbackId&&this.feedBackService.addNewFeedBack(this.addFeedBackForm.value).subscribe((function(t){console.log(t),"200"==t.status&&e.router.navigate(["feedbacks"]),"400"==t.status&&alert("FeedBack Not Added . Internal Server Error")}),(function(t){e.errorMessage=t}))}},{key:"f",get:function(){return this.addFeedBackForm.controls}}]),e}(),q.\u0275fac=function(e){return new(e||q)(l.Mb(f.c),l.Mb(o.a),l.Mb(v),l.Mb(o.f))},q.\u0275cmp=l.Gb({type:q,selectors:[["app-feedback-edit"]],decls:49,vars:14,consts:[[1,"jumbotron"],[1,"container"],[1,"row"],[1,"col-md-6","offset-md-3"],[3,"formGroup","ngSubmit"],[1,"col-md-6"],[1,"form-group"],["type","text","formControlName","customer_id",1,"form-control"],["type","text","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","phone","maxlength","10","minlength","10",1,"form-control",3,"ngClass"],["type","text","formControlName","email",1,"form-control"],["row","3","formControlName","message",1,"form-control",3,"ngClass"],["formControlName","customerCity",1,"form-control"],["selected","","value","Noida"],["selected","","value","Gurgaon"],["selected","","value","Ghaziabad"],["selected","","value","Agra"],[1,"btn","btn-primary",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){1&e&&(l.Rb(0,"div",0),l.Rb(1,"div",1),l.Rb(2,"div",2),l.Rb(3,"div",3),l.Rb(4,"h2"),l.Cc(5,"Add New FeedBack"),l.Qb(),l.Rb(6,"form",4),l.dc("ngSubmit",(function(){return t.onSubmit()})),l.Rb(7,"div",2),l.Rb(8,"div",5),l.Rb(9,"div",6),l.Rb(10,"label"),l.Cc(11,"Customer Id"),l.Qb(),l.Nb(12,"input",7),l.Qb(),l.Qb(),l.Rb(13,"div",5),l.Rb(14,"div",6),l.Rb(15,"label"),l.Cc(16,"Customer Name"),l.Qb(),l.Nb(17,"input",8),l.Ac(18,P,2,1,"div",9),l.Qb(),l.Qb(),l.Qb(),l.Rb(19,"div",6),l.Rb(20,"label"),l.Cc(21,"Customer Phone"),l.Qb(),l.Nb(22,"input",10),l.Ac(23,j,2,1,"div",9),l.Qb(),l.Rb(24,"div",6),l.Rb(25,"label"),l.Cc(26,"Customer Email"),l.Qb(),l.Nb(27,"input",11),l.Qb(),l.Rb(28,"div",6),l.Rb(29,"label"),l.Cc(30,"Customer Feedback"),l.Qb(),l.Nb(31,"textarea",12),l.Ac(32,x,2,1,"div",9),l.Qb(),l.Rb(33,"div",6),l.Rb(34,"label"),l.Cc(35,"City"),l.Qb(),l.Rb(36,"div"),l.Rb(37,"select",13),l.Rb(38,"option",14),l.Cc(39,"Noida"),l.Qb(),l.Rb(40,"option",15),l.Cc(41,"Gurgaon"),l.Qb(),l.Rb(42,"option",16),l.Cc(43,"Ghaziabad"),l.Qb(),l.Rb(44,"option",17),l.Cc(45,"Agra"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(46,"div",6),l.Rb(47,"button",18),l.Cc(48,"Save"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&e&&(l.zb(6),l.lc("formGroup",t.addFeedBackForm),l.zb(11),l.lc("ngClass",l.pc(8,E,t.submitted&&t.f.name.errors)),l.zb(1),l.lc("ngIf",t.submitted&&t.f.name.errors),l.zb(4),l.lc("ngClass",l.pc(10,E,t.submitted&&t.f.phone.errors)),l.zb(1),l.lc("ngIf",t.submitted&&t.f.phone.errors),l.zb(8),l.lc("ngClass",l.pc(12,E,t.submitted&&t.f.message.errors)),l.zb(1),l.lc("ngIf",t.submitted&&t.f.message.errors),l.zb(15),l.lc("disabled",!t.addFeedBackForm.valid))},directives:[f.u,f.l,f.e,f.b,f.k,f.d,r.k,r.m,f.g,f.h,f.r,f.o,f.t],styles:[""]}),q)},{path:"feedbackinfo/:feedbackId",component:(J=function(){function e(t){_classCallCheck(this,e),this.activatedRoute=t,this.pageTitle="Customer Feedback Messages"}return _createClass(e,[{key:"ngOnInit",value:function(){this.feedbackId=this.activatedRoute.snapshot.paramMap.get("feedbackId");var e=this.activatedRoute.snapshot.data.resolvedFeedBackDetail;e instanceof i.a?this.errorMessage=e.errorMessage:(this.customerFeedbackMessages=e.customer_feedback_messages,this.customerInfo=e.customer_feedback_info[0],this.feedBackMessagestotalcount=e.customer_feedback_messages_count[0].customer_feedbacks_count,console.log(this.customerFeedbackMessages),console.log(this.feedBackMessagestotalcount),console.log(this.customerInfo))}}]),e}(),J.\u0275fac=function(e){return new(e||J)(l.Mb(o.a))},J.\u0275cmp=l.Gb({type:J,selectors:[["app-feedback-detail-info"]],decls:10,vars:5,consts:[[1,"card"],[1,"card-header"],[1,"row"],[1,"col-md-6"],["type","button",1,"btn","btn-outline-secondary",2,"float","right",3,"routerLink"],[1,"card-body"],[4,"ngIf"],["class","row",4,"ngFor","ngForOf"],[2,"float","right","margin-left","10px"]],template:function(e,t){1&e&&(l.Rb(0,"div",0),l.Rb(1,"div",1),l.Rb(2,"div",2),l.Rb(3,"div",3),l.Cc(4),l.Qb(),l.Rb(5,"div",3),l.Rb(6,"a",4),l.Cc(7," Add New FeedBack "),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(8,"div",5),l.Ac(9,L,2,1,"div",6),l.Qb(),l.Qb()),2&e&&(l.zb(4),l.Ec(" ",t.pageTitle," "),l.zb(2),l.lc("routerLink",l.pc(3,X,t.feedbackId)),l.zb(3),l.lc("ngIf",t.feedBackMessagestotalcount>0))},directives:[o.i,r.m,r.l],pipes:[r.d],styles:[""]}),J),resolve:{resolvedFeedBackDetail:(D=function(){function e(t){_classCallCheck(this,e),this.feedBackService=t,this.pagenumber=1,this.pagesize=20,this.filterBy=""}return _createClass(e,[{key:"resolve",value:function(e,t){return this.feedBackService.fetchFeedBackDetailById(this.pagenumber,this.pagesize,this.filterBy,+e.params.feedbackId).pipe(Object(k.a)((function(e){return Object(O.a)(e)})))}}]),e}(),D.\u0275fac=function(e){return new(e||D)(l.Zb(v))},D.\u0275prov=l.Ib({token:D,factory:D.\u0275fac,providedIn:"root"}),D)}}],$=((U=function e(){_classCallCheck(this,e)}).\u0275mod=l.Kb({type:U}),U.\u0275inj=l.Jb({factory:function(e){return new(e||U)},imports:[[o.j.forChild(Z)],o.j]}),U),H=c("PCNd"),V=((K=function e(){_classCallCheck(this,e)}).\u0275mod=l.Kb({type:K}),K.\u0275inj=l.Jb({factory:function(e){return new(e||K)},imports:[[r.b,f.p,$,H.a]]}),K)}}]);