(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{lE2P:function(t,r,e){"use strict";e.r(r),e.d(r,"ProductModule",(function(){return ft}));var c=e("PCNd"),o=e("tyNb"),i=e("fXoL"),a=e("QJ7G"),d=e("ofXK"),u=e("Q6/5");const n=function(){return["/products/",0,"edit"]};function s(t,r){if(1&t){const t=i.Xb();i.Wb(0,"div",2),i.Wb(1,"div",3),i.Lc(2),i.Vb(),i.Wb(3,"div",4),i.Wb(4,"div",5),i.Wb(5,"div",6),i.Wb(6,"div",5),i.Wb(7,"div",7),i.Lc(8,"Name:"),i.Vb(),i.Wb(9,"div",6),i.Lc(10),i.Vb(),i.Vb(),i.Wb(11,"div",5),i.Wb(12,"div",7),i.Lc(13,"Code:"),i.Vb(),i.Wb(14,"div",6),i.Lc(15),i.Vb(),i.Vb(),i.Wb(16,"div",5),i.Wb(17,"div",7),i.Lc(18,"Release Date:"),i.Vb(),i.Wb(19,"div",6),i.Lc(20),i.nc(21,"date"),i.Vb(),i.Vb(),i.Wb(22,"div",5),i.Wb(23,"div",7),i.Lc(24,"Last Updated:"),i.Vb(),i.Wb(25,"div",6),i.Lc(26),i.nc(27,"date"),i.Vb(),i.Vb(),i.Wb(28,"div",5),i.Wb(29,"div",7),i.Lc(30,"Description:"),i.Vb(),i.Wb(31,"div",6),i.Lc(32),i.Vb(),i.Vb(),i.Wb(33,"div",5),i.Wb(34,"div",7),i.Lc(35,"Price:"),i.Vb(),i.Wb(36,"div",6),i.Lc(37),i.Vb(),i.Vb(),i.Wb(38,"div",5),i.Wb(39,"div",7),i.Lc(40,"Star Rating:"),i.Vb(),i.Wb(41,"div",6),i.Wb(42,"app-star",8),i.ic("ratingClicked",(function(r){return i.Dc(t),i.mc().onRatingClicked(r)})),i.Vb(),i.Vb(),i.Vb(),i.Wb(43,"div",5),i.Wb(44,"div",7),i.Lc(45,"Category Name:"),i.Vb(),i.Wb(46,"div",6),i.Lc(47),i.Vb(),i.Vb(),i.Wb(48,"div",5),i.Wb(49,"div",7),i.Lc(50,"Available:"),i.Vb(),i.Wb(51,"div",6),i.Lc(52),i.Vb(),i.Vb(),i.Vb(),i.Wb(53,"div",7),i.Rb(54,"img",9),i.Vb(),i.Vb(),i.Vb(),i.Wb(55,"div",10),i.Wb(56,"button",11),i.ic("click",(function(){return i.Dc(t),i.mc().onBack()})),i.Rb(57,"i",12),i.Lc(58," Back "),i.Vb(),i.Wb(59,"a",13),i.Rb(60,"i",12),i.Lc(61," Edit "),i.Vb(),i.Vb(),i.Vb()}if(2&t){const t=i.mc();i.Cb(2),i.Nc(" ",t.pageTitle," "),i.Cb(8),i.Mc(null==t.productData?null:t.productData.productName),i.Cb(5),i.Mc(null==t.productData?null:t.productData.productCode),i.Cb(5),i.Mc(i.pc(21,17,null==t.productData?null:t.productData.releaseDate,"medium")),i.Cb(6),i.Mc(i.pc(27,20,null==t.productData?null:t.productData.lastUpdated,"medium")),i.Cb(6),i.Mc(null==t.productData?null:t.productData.description),i.Cb(5),i.Mc(null==t.productData?null:t.productData.price),i.Cb(5),i.tc("rating",null==t.productData?null:t.productData.starRating),i.Cb(5),i.Mc(null==t.productData?null:t.productData.categoryName),i.Cb(5),i.Mc(null!=t.productData&&t.productData.available?"Available":"Not Available"),i.Cb(2),i.Ic("width",200,"px")("margin",2,"px"),i.vc("src","assets/product_images/",null==t.productData?null:t.productData.image_url,"",i.Ec),i.tc("title",null==t.productData?null:t.productData.productName),i.Cb(5),i.tc("routerLink",i.wc(23,n))}}function b(t,r){if(1&t&&(i.Wb(0,"div",14),i.Lc(1),i.Vb()),2&t){const t=i.mc();i.Cb(1),i.Nc("",t.errorMessage,"\n")}}let l=(()=>{class t{constructor(t,r,e){this._productService=t,this.router=r,this._activatedRoute=e}onBack(){this.router.navigate(["/products"],{queryParamsHandling:"preserve"})}onEdit(){this.router.navigate(["products",this.productId,"edit"])}ngOnInit(){const t=this._activatedRoute.snapshot.data.product;this.errorMessage=t.error,this.onProductRetrieved(t.product)}onRatingClicked(t){console.log(t)}onProductRetrieved(t){this.productData=t,this.pageTitle=this.productData?"Product Detail: "+this.productData.productName:"No product found"}}return t.\u0275fac=function(r){return new(r||t)(i.Qb(a.a),i.Qb(o.f),i.Qb(o.a))},t.\u0275cmp=i.Kb({type:t,selectors:[["ng-component"]],decls:2,vars:2,consts:[["class","card",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-8"],[1,"col-md-4"],[3,"rating","ratingClicked"],[1,"center-block","img-responsive",3,"src","title"],[1,"card-footer"],[1,"btn","btn-outline-secondary",2,"width","80px",3,"click"],[1,"fa","fa-chevron-left"],["type","button","target","_blank",1,"btn","btn-outline-secondary",2,"width","80px",3,"routerLink"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(i.Jc(0,s,62,24,"div",0),i.Jc(1,b,2,1,"div",1)),2&t&&(i.tc("ngIf",r.productData),i.Cb(1),i.tc("ngIf",r.errorMessage))},directives:[d.n,u.a,o.i],pipes:[d.e],styles:[""]}),t})();var p=e("LRne"),g=e("lJxs"),m=e("JIr8");let v=(()=>{class t{constructor(t){this.productDataService=t}resolve(t,r){const e=+t.paramMap.get("id");if(isNaN(e)){const t="Product id is not a number:"+e;return console.error(t),Object(p.a)({product:null,error:t})}return this.productDataService.getProduct(e).pipe(Object(g.a)(t=>({product:t,error:""})),Object(m.a)(t=>{const r="Retrieval error: "+t;return Object(p.a)({product:null,error:r})}))}}return t.\u0275fac=function(r){return new(r||t)(i.ec(a.a))},t.\u0275prov=i.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),f=(()=>{class t{constructor(t){this.productDataService=t}resolve(t,r){return this.productDataService.getProducts(1,20,"").pipe(Object(g.a)(t=>({product:t.products,product_total_count:t.productCount,error:""})),Object(m.a)(t=>{const r="Retrieval error: "+t;return Object(p.a)({product:null,error:r})}))}}return t.\u0275fac=function(r){return new(r||t)(i.ec(a.a))},t.\u0275prov=i.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=e("vkgz"),C=e("/uUt"),V=e("Kj3r"),W=e("eIep"),D=e("kt0X");const y={showProductCode:!0,currentProduct:null,products:[]};function P(t=y,r){switch(r.type){case"TOGGLE_PRODUCT_CODE":return Object.assign(Object.assign({},t),{showProductCode:r.payload});default:return t}}const L=Object(D.k)("products"),I=Object(D.l)(L,t=>t.showProductCode);var N=e("3Pt+"),_=e("Exvd"),k=e("CvK3");function R(t,r){if(1&t&&(i.Ub(0),i.Lc(1),i.Tb()),2&t){const t=i.mc();i.Cb(1),i.Nc(" - ",null==t.productData?null:t.productData.productCode,"\n")}}let S=(()=>{class t{constructor(t){this.store=t,this.showProductCode=!1}ngOnInit(){this.store.pipe(Object(D.m)(I)).subscribe(t=>{this.showProductCode=t})}}return t.\u0275fac=function(r){return new(r||t)(i.Qb(D.h))},t.\u0275cmp=i.Kb({type:t,selectors:[["app-product-shell-list-item"]],inputs:{productData:["productInfo1","productData"]},decls:3,vars:4,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(i.Lc(0),i.nc(1,"upperCaseName"),i.Jc(2,R,2,1,"ng-container",0)),2&t&&(i.Nc("",i.oc(1,2,null==r.productData?null:r.productData.productName),"\n"),i.Cb(2),i.tc("ngIf",r.showProductCode))},directives:[d.n],pipes:[k.a],styles:[""]}),t})();function w(t,r){if(1&t){const t=i.Xb();i.Wb(0,"app-pagination",17),i.ic("currentPage",(function(r){return i.Dc(t),i.mc(2).currentPageFn(r)})),i.Vb()}if(2&t){const t=i.mc(2);i.tc("totalItemCount",t.productsCount)}}const O=function(t){return{active:t}};function F(t,r){if(1&t){const t=i.Xb();i.Wb(0,"button",18),i.ic("click",(function(){i.Dc(t);const e=r.$implicit;return i.mc(2).onSelected(e)})),i.Rb(1,"app-product-shell-list-item",19),i.Vb()}if(2&t){const t=r.$implicit,e=i.mc(2);i.tc("ngClass",i.xc(2,O,(null==e.selectedProduct?null:e.selectedProduct.productId)==(null==t?null:t.productId))),i.Cb(1),i.tc("productInfo1",t)}}function x(t,r){if(1&t&&(i.Wb(0,"div"),i.Jc(1,w,1,1,"app-pagination",14),i.Wb(2,"div",15),i.Jc(3,F,2,4,"button",16),i.Vb(),i.Vb()),2&t){const t=i.mc();i.Cb(1),i.tc("ngIf",t.productsCount>0),i.Cb(2),i.tc("ngForOf",t.products)}}function J(t,r){1&t&&(i.Wb(0,"div"),i.Wb(1,"span"),i.Lc(2,"No Products Found in catelog"),i.Vb(),i.Vb())}function M(t,r){if(1&t&&(i.Wb(0,"div",20),i.Lc(1),i.Vb()),2&t){const t=i.mc();i.Cb(1),i.Nc(" Error: ",t.errorMessage," ")}}const j=function(){return["/products/",0,"edit"]};let q=(()=>{class t{constructor(t,r,e,c,o){this._productService=t,this.router=r,this.formBuilder=e,this.store=c,this._activatedRoute=o,this.filterBy="",this.pageTitle="Products Listing",this.productsCount=0,this.Pages=[],this.pageSize=20,this.searchCriteriaForm=this.formBuilder.group({searchCriteria:[""]})}ngOnInit(){this.currentPage=1,this.sub=this._productService.selectProductChanges$.subscribe(t=>{this.selectedProduct=t}),this.store.pipe(Object(D.m)(I)).subscribe(t=>{this.displayCode=t});const t=this._activatedRoute.snapshot.data.products.product;this.productsCount=+this._activatedRoute.snapshot.data.products.product_total_count,this.onProductRetrieved(t)}onChanges(){this.searchCriteriaForm.get("searchCriteria").valueChanges.pipe(Object(h.a)(t=>{console.log(t)}),Object(C.a)(),Object(V.a)(2e3),Object(W.a)(t=>(this.filterBy=t,console.log(this.filterBy),this._productService.getProducts(this.currentPage,this.pageSize,this.filterBy)))).subscribe(t=>{this.onProductRetrieved(t.products),this.productsCount=t.productCount})}currentPageFn(t){this.currentPage=t,this._productService.getProducts(this.currentPage,this.pageSize,this.filterBy).subscribe(t=>{this.onProductRetrieved(t.products)})}checkChanged(t){this.store.dispatch({type:"TOGGLE_PRODUCT_CODE",payload:t})}onSelected(t){this._productService.changeSelectedProduct(t.productId)}onProductRetrieved(t){this.products=t}addProduct(){this.router.navigate(["products","0","edit"])}ngOnDestroy(){this.sub.unsubscribe()}}return t.\u0275fac=function(r){return new(r||t)(i.Qb(a.a),i.Qb(o.f),i.Qb(N.d),i.Qb(D.h),i.Qb(o.a))},t.\u0275cmp=i.Kb({type:t,selectors:[["app-product-shell-list"]],decls:20,vars:8,consts:[[1,"card"],[1,"card-header"],["type","button",1,"btn","btn-outline-secondary",2,"float","right",3,"routerLink"],[1,"card-body"],[3,"formGroup"],[1,"form-group"],["formControlName","searchCriteria","type","text","id","inputError","autocomplete","off","autofocus","","placeholder","Search Products",1,"form-control",3,"keyup"],[1,"glyphicon","glyphicon-remove","form-control-feedback"],[4,"ngIf"],[1,"card-footer"],[1,"row"],[1,"form-check","col-md-12"],["type","checkbox",1,"form-check-input",3,"checked","change"],["class","alert alert-danger",4,"ngIf"],[3,"totalItemCount","currentPage",4,"ngIf"],[1,"list-group"],["type","button","class","list-group-item",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"totalItemCount","currentPage"],["type","button",1,"list-group-item",3,"ngClass","click"],[3,"productInfo1"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(i.Wb(0,"div",0),i.Wb(1,"div",1),i.Lc(2),i.Wb(3,"a",2),i.Lc(4," Add New Product "),i.Vb(),i.Vb(),i.Wb(5,"div",3),i.Wb(6,"form",4),i.Wb(7,"div",5),i.Wb(8,"div"),i.Wb(9,"input",6),i.ic("keyup",(function(){return r.onChanges()})),i.Vb(),i.Rb(10,"span",7),i.Vb(),i.Vb(),i.Vb(),i.Jc(11,x,4,2,"div",8),i.Jc(12,J,3,0,"div",8),i.Vb(),i.Wb(13,"div",9),i.Wb(14,"div",10),i.Wb(15,"div",11),i.Wb(16,"label"),i.Wb(17,"input",12),i.ic("change",(function(t){return r.checkChanged(t.target.checked)})),i.Vb(),i.Lc(18," Display Product Code "),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Jc(19,M,2,1,"div",13),i.Vb()),2&t&&(i.Cb(2),i.Nc(" ",r.pageTitle," "),i.Cb(1),i.tc("routerLink",i.wc(7,j)),i.Cb(3),i.tc("formGroup",r.searchCriteriaForm),i.Cb(5),i.tc("ngIf",r.productsCount>0),i.Cb(1),i.tc("ngIf",0==r.productsCount),i.Cb(5),i.tc("checked",r.displayCode),i.Cb(2),i.tc("ngIf",r.errorMessage))},directives:[o.i,N.w,N.n,N.f,N.c,N.m,N.e,d.n,d.m,_.a,d.l,S],styles:[""]}),t})();var Q=e("chph"),E=e("1kSV");function T(t,r){if(1&t&&i.Rb(0,"img",17),2&t){const t=i.mc(2);i.Ic("width",200,"px")("margin",2,"px"),i.tc("title",null==t.productData?null:t.productData.productName)}}function A(t,r){if(1&t&&i.Rb(0,"img",18),2&t){const t=i.mc(2);i.Ic("width",200,"px")("margin",2,"px"),i.uc("src",t.imageurl,i.Ec),i.tc("title",null==t.productData?null:t.productData.productName)}}function B(t,r){if(1&t){const t=i.Xb();i.Wb(0,"span",19),i.ic("click",(function(){return i.Dc(t),i.mc(2).uploadImage()})),i.Lc(1," Upload Image "),i.Vb()}}function U(t,r){if(1&t){const t=i.Xb();i.Wb(0,"span",19),i.ic("click",(function(){return i.Dc(t),i.mc(2).uploadImage()})),i.Lc(1," Change Image "),i.Vb()}}function X(t,r){if(1&t&&(i.Wb(0,"div",20),i.Lc(1),i.Vb()),2&t){const t=i.mc(2);i.Cb(1),i.Nc("",t.errorMessage," ")}}const G=function(t){return["/products",t,"edit"]};function K(t,r){if(1&t){const t=i.Xb();i.Wb(0,"div",1),i.Wb(1,"div",2),i.Lc(2),i.Vb(),i.Wb(3,"div",3),i.Wb(4,"div",4),i.Wb(5,"div",5),i.Wb(6,"div",4),i.Wb(7,"div",6),i.Lc(8,"Name:"),i.Vb(),i.Wb(9,"div",5),i.Lc(10),i.nc(11,"upperCaseName"),i.Vb(),i.Vb(),i.Wb(12,"div",4),i.Wb(13,"div",6),i.Lc(14,"Code:"),i.Vb(),i.Wb(15,"div",5),i.Lc(16),i.nc(17,"upperCaseName"),i.Vb(),i.Vb(),i.Wb(18,"div",4),i.Wb(19,"div",6),i.Lc(20,"Weight:"),i.Vb(),i.Wb(21,"div",5),i.Lc(22),i.Vb(),i.Vb(),i.Wb(23,"div",4),i.Wb(24,"div",6),i.Lc(25,"Release Date:"),i.Vb(),i.Wb(26,"div",5),i.Lc(27),i.nc(28,"date"),i.Vb(),i.Vb(),i.Wb(29,"div",4),i.Wb(30,"div",6),i.Lc(31,"Last Updated:"),i.Vb(),i.Wb(32,"div",5),i.Lc(33),i.nc(34,"date"),i.Vb(),i.Vb(),i.Wb(35,"div",4),i.Wb(36,"div",6),i.Lc(37,"Description:"),i.Vb(),i.Wb(38,"div",5),i.Lc(39),i.Vb(),i.Vb(),i.Wb(40,"div",4),i.Wb(41,"div",6),i.Lc(42,"Price:"),i.Vb(),i.Wb(43,"div",5),i.Lc(44),i.Vb(),i.Vb(),i.Wb(45,"div",4),i.Wb(46,"div",6),i.Lc(47,"Star Rating:"),i.Vb(),i.Wb(48,"div",5),i.Wb(49,"app-star",7),i.ic("ratingClicked",(function(r){return i.Dc(t),i.mc().onRatingClicked(r)})),i.Vb(),i.Vb(),i.Vb(),i.Wb(50,"div",4),i.Wb(51,"div",6),i.Lc(52,"Category Name:"),i.Vb(),i.Wb(53,"div",5),i.Lc(54),i.nc(55,"upperCaseName"),i.Vb(),i.Vb(),i.Wb(56,"div",4),i.Wb(57,"div",6),i.Lc(58,"Available:"),i.Vb(),i.Wb(59,"div",5),i.Lc(60),i.Vb(),i.Vb(),i.Vb(),i.Wb(61,"div",8),i.Jc(62,T,1,5,"img",9),i.Jc(63,A,1,6,"img",10),i.Jc(64,B,2,0,"span",11),i.Jc(65,U,2,0,"span",11),i.Vb(),i.Vb(),i.Vb(),i.Wb(66,"div",12),i.Wb(67,"div",13),i.Wb(68,"div",5),i.Wb(69,"button",14),i.Rb(70,"i",15),i.Lc(71," Edit "),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Jc(72,X,2,1,"div",16),i.Vb()}if(2&t){const t=i.mc();i.Cb(2),i.Nc(" ",null==t.productData?null:t.productData.productName," "),i.Cb(8),i.Mc(i.oc(11,17,null==t.productData?null:t.productData.productName)),i.Cb(6),i.Mc(i.oc(17,19,null==t.productData?null:t.productData.productCode)),i.Cb(6),i.Nc(" ",null!=t.productData&&t.productData.product_weight?(null==t.productData?null:t.productData.product_weight)+" "+(null==t.productData?null:t.productData.weight_text):"Not Available"," "),i.Cb(5),i.Mc(i.pc(28,21,null==t.productData?null:t.productData.releaseDate,"short")),i.Cb(6),i.Mc(i.pc(34,24,null==t.productData?null:t.productData.lastUpdated,"short")),i.Cb(6),i.Mc(null==t.productData?null:t.productData.description),i.Cb(5),i.Nc("\u20b9 ",null==t.productData?null:t.productData.price,""),i.Cb(5),i.tc("rating",null==t.productData?null:t.productData.starRating),i.Cb(5),i.Mc(i.oc(55,27,null==t.productData?null:t.productData.categoryName)),i.Cb(6),i.Mc(null!=t.productData&&t.productData.available?"Available":"Not Available"),i.Cb(2),i.tc("ngIf",!t.imageurl),i.Cb(1),i.tc("ngIf",t.imageurl),i.Cb(1),i.tc("ngIf",!t.imageurl),i.Cb(1),i.tc("ngIf",t.imageurl),i.Cb(4),i.tc("routerLink",i.xc(29,G,t.productData.productId)),i.Cb(3),i.tc("ngIf",t.errorMessage)}}let $=(()=>{class t{constructor(t,r){this.productService=t,this.modalService=r,this.pageTitle="Product Detail",this.imageurl="",this.productid=""}ngOnInit(){this.sub=this.productService.selectProductChanges$.subscribe(t=>{t&&(this.imageurl=t.image_url,this.productid=t.productId),this.productData=t})}onRatingClicked(t){}ngOnChanges(){}uploadImage(){const t=this.modalService.open(Q.a);t.componentInstance.title="Image Upload",t.componentInstance.image_type="products",t.componentInstance.id=this.productid,t.componentInstance.productImage.subscribe(t=>{this.imageurl=t.image_url,this.productService.updateProductImageUrl(this.imageurl,this.productid)})}ngOnDestroy(){this.sub.unsubscribe()}}return t.\u0275fac=function(r){return new(r||t)(i.Qb(a.a),i.Qb(E.f))},t.\u0275cmp=i.Kb({type:t,selectors:[["app-product-shell-detail"]],features:[i.Ab],decls:1,vars:1,consts:[["class","card card-primary",4,"ngIf"],[1,"card","card-primary"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-8"],[1,"col-md-4","product-detail-label"],[3,"rating","ratingClicked"],[1,"col-md-4"],["class","center-block img-responsive","src","assets/product_images/default_image.jpg",3,"title","width","margin",4,"ngIf"],["class","center-block img-responsive",3,"src","title","width","margin",4,"ngIf"],["style","display:block;text-align:center;cursor:pointer;color:blue",3,"click",4,"ngIf"],[1,"card-footer"],[1,"row","mb-2"],[1,"btn","btn-primary","mr-3",3,"routerLink"],[1,"fa","fa-edit"],["class","alert alert-danger",4,"ngIf"],["src","assets/product_images/default_image.jpg",1,"center-block","img-responsive",3,"title"],[1,"center-block","img-responsive",3,"src","title"],[2,"display","block","text-align","center","cursor","pointer","color","blue",3,"click"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&i.Jc(0,K,73,31,"div",0),2&t&&i.tc("ngIf",r.productData)},directives:[d.n,u.a,o.g],pipes:[k.a,d.e],styles:[".product-detail-label[_ngcontent-%COMP%]{font-weight:700}"]}),t})(),z=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=i.Kb({type:t,selectors:[["app-product-shell"]],decls:5,vars:0,consts:[[1,"row"],[1,"scroll"],[1,"col-md-8"]],template:function(t,r){1&t&&(i.Wb(0,"div",0),i.Wb(1,"div",1),i.Rb(2,"app-product-shell-list"),i.Vb(),i.Wb(3,"div",2),i.Rb(4,"app-product-shell-detail"),i.Vb(),i.Vb())},directives:[q,$],styles:["div.scroll[_ngcontent-%COMP%]{margin:4px,4px;padding:4px;width:350px;height:500px;overflow-x:hidden;overflow-x:auto;text-align:justify}"]}),t})();var H=e("9d4Z");function Z(t,r){1&t&&(i.Wb(0,"div"),i.Lc(1,"Product Name is required"),i.Vb())}function Y(t,r){if(1&t&&(i.Wb(0,"div",32),i.Jc(1,Z,2,0,"div",33),i.Vb()),2&t){const t=i.mc();i.Cb(1),i.tc("ngIf",t.f.productName.errors.required)}}function tt(t,r){if(1&t&&(i.Wb(0,"option",34),i.Lc(1),i.Vb()),2&t){const t=r.$implicit;i.uc("value",null==t?null:t.store_category_id),i.Cb(1),i.Nc(" ",t.store_category_name," ")}}function rt(t,r){if(1&t&&(i.Wb(0,"option",34),i.Lc(1),i.nc(2,"upperCaseName"),i.Vb()),2&t){const t=r.$implicit;i.uc("value",null==t?null:t.store_sub_category_id),i.Cb(1),i.Nc(" ",i.oc(2,2,t.store_sub_category)," ")}}function et(t,r){if(1&t&&(i.Wb(0,"option",34),i.Lc(1),i.nc(2,"upperCaseName"),i.Vb()),2&t){const t=r.$implicit;i.uc("value",null==t?null:t.sub_category_id),i.Cb(1),i.Nc(" ",i.oc(2,2,t.sub_category_name)," ")}}function ct(t,r){1&t&&(i.Wb(0,"div"),i.Lc(1,"Product Price is required"),i.Vb())}function ot(t,r){if(1&t&&(i.Wb(0,"div",32),i.Jc(1,ct,2,0,"div",33),i.Vb()),2&t){const t=i.mc();i.Cb(1),i.tc("ngIf",t.f.productPrice.errors.required)}}function it(t,r){1&t&&(i.Wb(0,"div"),i.Lc(1,"Product weight is required"),i.Vb())}function at(t,r){if(1&t&&(i.Wb(0,"div",32),i.Jc(1,it,2,0,"div",33),i.Vb()),2&t){const t=i.mc();i.Cb(1),i.tc("ngIf",t.f.productWeight.errors.required)}}function dt(t,r){1&t&&(i.Wb(0,"div"),i.Lc(1,"Product Code is required"),i.Vb())}function ut(t,r){if(1&t&&(i.Wb(0,"div",32),i.Jc(1,dt,2,0,"div",33),i.Vb()),2&t){const t=i.mc();i.Cb(1),i.tc("ngIf",t.f.productCode.errors.required)}}function nt(t,r){1&t&&(i.Wb(0,"div"),i.Lc(1,"Product Description is required"),i.Vb())}function st(t,r){if(1&t&&(i.Wb(0,"div",32),i.Jc(1,nt,2,0,"div",33),i.Vb()),2&t){const t=i.mc();i.Cb(1),i.tc("ngIf",t.f.productDescription.errors.required)}}function bt(t,r){1&t&&(i.Wb(0,"div"),i.Lc(1,"Product Rating is required"),i.Vb())}function lt(t,r){if(1&t&&(i.Wb(0,"div",32),i.Jc(1,bt,2,0,"div",33),i.Vb()),2&t){const t=i.mc();i.Cb(1),i.tc("ngIf",t.f.productRating.errors.required)}}function pt(t,r){if(1&t){const t=i.Xb();i.Wb(0,"button",35),i.ic("click",(function(){return i.Dc(t),i.mc().deleteProduct()})),i.Rb(1,"i",36),i.Lc(2," Delete "),i.Vb()}}const gt=function(t){return{"is-invalid":t}},mt=[{path:"",component:z,resolve:{products:f}},{path:":id",component:l,resolve:{product:v}},{path:":id/edit",component:(()=>{class t{constructor(t,r,e,c,o){this.formBuilder=t,this.router=r,this.activatedRoute=e,this.categoryService=c,this.productService=o,this.disableForm=!1,this.addProductForm=this.formBuilder.group({productName:["",N.u.required],storeCategoryName:["",N.u.required],storeSubCategoryName:["",N.u.required],subCategoryName:[""],productWeightType:[""],productPrice:["",N.u.required],productWeight:[""],productCode:["",N.u.required],productDescription:["",N.u.required],productRating:["",N.u.required],status:["",N.u.required]})}get f(){return this.addProductForm.controls}ngOnInit(){this.categoryService.getAllStoreCategory("").subscribe(t=>{this.storeCategories=t.store_categories,this.productId=this.activatedRoute.snapshot.paramMap.get("id"),0!==this.productId&&(this.productData=this.activatedRoute.snapshot.data.productData.product,this.addProductForm.get("storeCategoryName").setValue(this.productData.store_category_id),this.addProductForm.get("storeSubCategoryName").setValue(this.productData.store_sub_category_id),this.addProductForm.get("subCategoryName").setValue(this.productData.sub_category_id),this.addProductForm.get("productName").setValue(this.productData.productName),this.addProductForm.get("productPrice").setValue(this.productData.price),this.addProductForm.get("productCode").setValue(this.productData.productCode),this.addProductForm.get("productWeightType").setValue(this.productData.productWeightType),this.addProductForm.get("productWeight").setValue(this.productData.product_weight),this.addProductForm.get("productDescription").setValue(this.productData.description),this.addProductForm.get("productRating").setValue(this.productData.starRating),this.addProductForm.get("status").setValue(this.productData.available),this.storeCategoryChange(this.productData.store_category_id,+this.productData.store_sub_category_id))})}deleteProduct(){0!==this.productId&&confirm("Are you sure to delete ")&&this.productService.deleteProduct(this.productId).subscribe(t=>{console.log(t),this.router.navigate(["products"])})}onSubmit(){if(!this.disableForm){if(this.submitted=!0,this.disableForm=!0,this.addProductForm.invalid)return void(this.disableForm=!1);0==+this.productId?this.productService.createProduct(this.addProductForm.value).subscribe(t=>{200===t.status?this.router.navigate(["products"]):400===t.status&&(alert("Product Not Added . Internal Server Error"),this.disableForm=!1)},t=>{this.disableForm=!1,console.log(t)}):this.productService.updateProduct(this.addProductForm.value,this.productId).subscribe(t=>{200===t.status?this.router.navigate(["products"]):400===t.status&&(alert("Product Not Added . Internal Server Error"),this.disableForm=!1)},t=>{this.disableForm=!1,this.errorMessage=t})}}storeCategoryChange(t,r){this.storeSubCategoryData=[],this.subCategoryData=[],this.categoryService.getStoreCategoryData(+t).subscribe(t=>{this.storeSubCategoryData=t.store_categories[0].store_sub_category_name,0==+r||(this.subCategoryData=this.storeSubCategoryData.filter(t=>t.store_sub_category_id===r)[0].sub_category_data)})}storeSubCategoryChange(t){this.storeSubCategoryData.filter(r=>{r.store_sub_category_id===+t&&(this.subCategoryData=r.sub_category_data,this.subCategoryData.length<1&&(this.addProductForm.patchValue({subCategoryName:""}),this.subCategoryData=[]))})}}return t.\u0275fac=function(r){return new(r||t)(i.Qb(N.d),i.Qb(o.f),i.Qb(o.a),i.Qb(H.a),i.Qb(a.a))},t.\u0275cmp=i.Kb({type:t,selectors:[["app-product-shell-add"]],decls:89,vars:30,consts:[[1,"jumbotron"],[1,"container"],[1,"row"],[1,"col-md-6","offset-md-3"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","formControlName","productName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","storeCategoryName",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6"],["formControlName","storeSubCategoryName",1,"form-control",3,"change"],["formControlName","subCategoryName",1,"form-control"],["type","text","formControlName","productPrice",1,"form-control",3,"ngClass"],["formControlName","productWeightType",1,"form-control"],["selected","","value","1"],["value","2"],["value","3"],["value","5"],["value","4"],["value","6"],["type","text","formControlName","productWeight",1,"form-control",3,"ngClass"],["type","text","formControlName","productCode",1,"form-control",3,"ngClass"],["row","3","formControlName","productDescription",1,"form-control",3,"ngClass"],["type","text","formControlName","productRating",1,"form-control",3,"ngClass"],["for",""],["formControlName","status",1,"form-control"],["value","1"],["value","0"],[1,"btn","btn-primary","mr-3",3,"disabled"],[1,"fa","fa-save"],["class","btn btn-primary mr-3",3,"click",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"],[1,"btn","btn-primary","mr-3",3,"click"],[1,"fa","fa-trash"]],template:function(t,r){1&t&&(i.Wb(0,"div",0),i.Wb(1,"div",1),i.Wb(2,"div",2),i.Wb(3,"div",3),i.Wb(4,"h2"),i.Lc(5,"Add New Product"),i.Vb(),i.Wb(6,"form",4),i.ic("ngSubmit",(function(){return r.onSubmit()})),i.Wb(7,"div",5),i.Wb(8,"label"),i.Lc(9,"Product Name"),i.Vb(),i.Rb(10,"input",6),i.Jc(11,Y,2,1,"div",7),i.Vb(),i.Wb(12,"div",5),i.Wb(13,"label"),i.Lc(14,"Store Category Name"),i.Vb(),i.Wb(15,"div"),i.Wb(16,"select",8),i.ic("change",(function(t){return r.storeCategoryChange(t.target.value,0)})),i.Jc(17,tt,2,2,"option",9),i.Vb(),i.Vb(),i.Vb(),i.Wb(18,"div",2),i.Wb(19,"div",10),i.Wb(20,"div",5),i.Wb(21,"label"),i.Lc(22,"Store Sub Category"),i.Vb(),i.Wb(23,"div"),i.Wb(24,"select",11),i.ic("change",(function(t){return r.storeSubCategoryChange(t.target.value)})),i.Jc(25,rt,3,4,"option",9),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Wb(26,"div",10),i.Wb(27,"div",5),i.Wb(28,"label"),i.Lc(29,"Sub Category"),i.Vb(),i.Wb(30,"div"),i.Wb(31,"select",12),i.Jc(32,et,3,4,"option",9),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Wb(33,"div",5),i.Wb(34,"label"),i.Lc(35,"Orignal Price(M.R.P)"),i.Vb(),i.Rb(36,"input",13),i.Jc(37,ot,2,1,"div",7),i.Vb(),i.Wb(38,"div",5),i.Wb(39,"label"),i.Lc(40,"Weight Type"),i.Vb(),i.Wb(41,"div"),i.Wb(42,"select",14),i.Wb(43,"option",15),i.Lc(44,"kg"),i.Vb(),i.Wb(45,"option",16),i.Lc(46,"gms"),i.Vb(),i.Wb(47,"option",17),i.Lc(48,"litre"),i.Vb(),i.Wb(49,"option",18),i.Lc(50,"ml"),i.Vb(),i.Wb(51,"option",19),i.Lc(52,"packet"),i.Vb(),i.Wb(53,"option",20),i.Lc(54,"pieces"),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Wb(55,"div",5),i.Wb(56,"label"),i.Lc(57,"Product Weight"),i.Vb(),i.Rb(58,"input",21),i.Jc(59,at,2,1,"div",7),i.Vb(),i.Wb(60,"div",5),i.Wb(61,"label"),i.Lc(62,"Product Code"),i.Vb(),i.Rb(63,"input",22),i.Jc(64,ut,2,1,"div",7),i.Vb(),i.Wb(65,"div",5),i.Wb(66,"label"),i.Lc(67,"Product Desciption"),i.Vb(),i.Rb(68,"textarea",23),i.Jc(69,st,2,1,"div",7),i.Vb(),i.Wb(70,"div",5),i.Wb(71,"label"),i.Lc(72,"Product Rating"),i.Vb(),i.Rb(73,"input",24),i.Jc(74,lt,2,1,"div",7),i.Vb(),i.Wb(75,"div",5),i.Wb(76,"label",25),i.Lc(77,"Status"),i.Vb(),i.Wb(78,"div"),i.Wb(79,"select",26),i.Wb(80,"option",27),i.Lc(81,"Enabled"),i.Vb(),i.Wb(82,"option",28),i.Lc(83,"Disabled"),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Wb(84,"div",5),i.Wb(85,"button",29),i.Rb(86,"i",30),i.Lc(87," Save"),i.Vb(),i.Jc(88,pt,3,0,"button",31),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Vb()),2&t&&(i.Cb(6),i.tc("formGroup",r.addProductForm),i.Cb(4),i.tc("ngClass",i.xc(18,gt,r.submitted&&r.f.productName.errors)),i.Cb(1),i.tc("ngIf",r.submitted&&r.f.productName.errors),i.Cb(6),i.tc("ngForOf",r.storeCategories),i.Cb(8),i.tc("ngForOf",r.storeSubCategoryData),i.Cb(7),i.tc("ngForOf",r.subCategoryData),i.Cb(4),i.tc("ngClass",i.xc(20,gt,r.submitted&&r.f.productPrice.errors)),i.Cb(1),i.tc("ngIf",r.submitted&&r.f.productPrice.errors),i.Cb(21),i.tc("ngClass",i.xc(22,gt,r.submitted&&r.f.productWeight.errors)),i.Cb(1),i.tc("ngIf",r.submitted&&r.f.productWeight.errors),i.Cb(4),i.tc("ngClass",i.xc(24,gt,r.submitted&&r.f.productCode.errors)),i.Cb(1),i.tc("ngIf",r.submitted&&r.f.productCode.errors),i.Cb(4),i.tc("ngClass",i.xc(26,gt,r.submitted&&r.f.productDescription.errors)),i.Cb(1),i.tc("ngIf",r.submitted&&r.f.productDescription.errors),i.Cb(4),i.tc("ngClass",i.xc(28,gt,r.submitted&&r.f.productRating.errors)),i.Cb(1),i.tc("ngIf",r.submitted&&r.f.productRating.errors),i.Cb(11),i.tc("disabled",r.disableForm),i.Cb(3),i.tc("ngIf",0!=r.productId))},directives:[N.w,N.n,N.f,N.c,N.m,N.e,d.l,d.n,N.t,d.m,N.q,N.v],pipes:[k.a],styles:[""]}),t})(),resolve:{productData:v}}];let vt=(()=>{class t{}return t.\u0275mod=i.Ob({type:t}),t.\u0275inj=i.Nb({factory:function(r){return new(r||t)},imports:[[o.j.forChild(mt)],o.j]}),t})(),ft=(()=>{class t{}return t.\u0275mod=i.Ob({type:t}),t.\u0275inj=i.Nb({factory:function(r){return new(r||t)},providers:[],imports:[[D.i.forFeature("products",P),vt,N.r,c.a]]}),t})()}}]);