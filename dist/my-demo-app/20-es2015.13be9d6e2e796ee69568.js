(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"la9/":function(t,n,i){"use strict";i.r(n),i.d(n,"SubscriptionsModule",(function(){return E}));var s=i("ofXK"),o=i("tyNb"),r=i("R5w1"),e=i("vkgz"),c=i("/uUt"),b=i("Kj3r"),u=i("eIep"),a=i("fXoL"),l=i("3Pt+"),p=i("z6cu"),d=i("lJxs"),f=i("JIr8"),h=i("tk/3");let g=(()=>{class t{constructor(t){this.httpClient=t,this.subscriptionServiceUrl="https://api.grostep.com/customerapi/"}fetchAllSubscriptons(t,n,i){const s={};return s.pageNumber=t,s.pageSize=n,s.filterBy=i,console.log(s),this.httpClient.post(this.subscriptionServiceUrl+"subscriptioninfo",s).pipe(Object(e.a)(t=>{}),Object(d.a)(t=>t),Object(f.a)(this.handleError))}handleError(t){const n=new r.a;return n.errorNumber=100,n.errorMessage=`Server returned code: ${t.status}, error message is: ${t.message}`,n.friendlyMessage="An error retriving data",Object(p.a)(n)}}return t.\u0275fac=function(n){return new(n||t)(a.Zb(h.a))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const m=["app-subscription-data",""],C=function(t){return["/customer",t]};function I(t,n){if(1&t&&(a.Rb(0,"a",3),a.Cc(1),a.Qb()),2&t){const t=a.fc();a.lc("routerLink",a.pc(2,C,null==t.subscriptionInfo?null:t.subscriptionInfo.customer_id)),a.zb(1),a.Ec(" ",null==t.subscriptionInfo?null:t.subscriptionInfo.customer_id," ")}}const v=function(t,n){return{"text-success":t,"text-danger":n}};let R=(()=>{class t{constructor(){}ngOnInit(){console.log(this.subscriptionInfo)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=a.Gb({type:t,selectors:[["","app-subscription-data",""]],inputs:{subscriptionInfo:"subscriptionInfo"},attrs:m,decls:18,vars:18,consts:[["target","_blank",3,"routerLink",4,"ngIf"],[2,"width","50px"],[2,"font-weight","bold",3,"ngClass"],["target","_blank",3,"routerLink"]],template:function(t,n){1&t&&(a.Rb(0,"td"),a.Cc(1),a.Qb(),a.Rb(2,"td"),a.Ac(3,I,2,4,"a",0),a.Qb(),a.Rb(4,"td",1),a.Cc(5),a.Qb(),a.Rb(6,"td"),a.Cc(7),a.Qb(),a.Rb(8,"td",2),a.Cc(9),a.Qb(),a.Rb(10,"td"),a.Cc(11),a.Qb(),a.Rb(12,"td"),a.Cc(13),a.gc(14,"date"),a.Qb(),a.Rb(15,"td"),a.Cc(16),a.gc(17,"date"),a.Qb()),2&t&&(a.zb(1),a.Ec(" ",null==n.subscriptionInfo?null:n.subscriptionInfo.user_subscribed_id,"\n"),a.zb(2),a.lc("ngIf",null==n.subscriptionInfo?null:n.subscriptionInfo.customer_id),a.zb(2),a.Ec(" ",null==n.subscriptionInfo?null:n.subscriptionInfo.customer_phone," "),a.zb(2),a.Ec(" ",null==n.subscriptionInfo?null:n.subscriptionInfo.customer_name,"\n"),a.zb(1),a.lc("ngClass",a.qc(15,v,1===(null==n.subscriptionInfo?null:n.subscriptionInfo.subscribed),0===(null==n.subscriptionInfo?null:n.subscriptionInfo.subscribed))),a.zb(1),a.Ec(" ",1===(null==n.subscriptionInfo?null:n.subscriptionInfo.subscribed)?"Subscribed":"Not Subscribed","\n"),a.zb(2),a.Ec(" ",1===(null==n.subscriptionInfo?null:n.subscriptionInfo.channel)?"Web":"Others","\n"),a.zb(2),a.Ec(" ",a.ic(14,9,null==n.subscriptionInfo?null:n.subscriptionInfo.added_date,"medium"),"\n"),a.zb(3),a.Ec(" ",a.ic(17,12,null==n.subscriptionInfo?null:n.subscriptionInfo.registered_date,"medium"),"\n"))},directives:[s.m,s.k,o.i],pipes:[s.d],styles:['td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-size:14px}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:45px;height:20px;margin:20px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none;background-color:#ccc}.slider[_ngcontent-%COMP%]{cursor:pointer;top:0;bottom:0;background-color:#ccc}.slider[_ngcontent-%COMP%], .slider[_ngcontent-%COMP%]:before{position:absolute;left:0;right:0;transition:.4s}.slider[_ngcontent-%COMP%]:before{content:"";height:26px;width:26px;bottom:-3px;background-color:#2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateX(20px)}.slider.round[_ngcontent-%COMP%]{border-radius:20px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}']}),t})();var Q=i("Exvd");function _(t,n){1&t&&a.Nb(0,"tr",18),2&t&&a.lc("subscriptionInfo",n.$implicit)}function y(t,n){if(1&t&&(a.Rb(0,"table",15),a.Rb(1,"thead"),a.Rb(2,"tr"),a.Rb(3,"th",16),a.Cc(4,"Id"),a.Qb(),a.Rb(5,"th"),a.Cc(6,"Customer Id"),a.Qb(),a.Rb(7,"th"),a.Cc(8,"Phone"),a.Qb(),a.Rb(9,"th"),a.Cc(10,"Name"),a.Qb(),a.Rb(11,"th"),a.Cc(12,"Subscribed"),a.Qb(),a.Rb(13,"th"),a.Cc(14,"Channel"),a.Qb(),a.Rb(15,"th"),a.Cc(16,"Added Date"),a.Qb(),a.Rb(17,"th"),a.Cc(18,"Registration Date"),a.Qb(),a.Qb(),a.Qb(),a.Rb(19,"tbody"),a.Ac(20,_,1,1,"tr",17),a.Qb(),a.Qb()),2&t){const t=a.fc();a.zb(20),a.lc("ngForOf",t.subscriptions)}}function z(t,n){if(1&t){const t=a.Sb();a.Rb(0,"app-pagination",19),a.dc("currentPage",(function(n){return a.uc(t),a.fc().currentPageFn(n)})),a.Qb()}if(2&t){const t=a.fc();a.lc("totalItemCount",t.subscriptiontotalcount)}}function O(t,n){1&t&&(a.Rb(0,"div"),a.Cc(1," No Subscription Data Found "),a.Qb())}function S(t,n){if(1&t&&(a.Rb(0,"div",20),a.Cc(1),a.Qb()),2&t){const t=a.fc();a.zb(1),a.Ec(" Error: ",t.errorMessage,"\n")}}const w=function(){return["/subscriptions/",0,"edit"]};let P=(()=>{class t{constructor(t,n,i){this.activatedRoute=t,this.formBuilder=n,this.subscriptionService=i,this.filterBy="",this.pageTitle="Subscription Dashboard",this.currentPage=1,this.pageSize=20,this.searchCriteriaForm=this.formBuilder.group({searchCriteria:[""]})}ngOnInit(){const t=this.activatedRoute.snapshot.data.resolvedSubscriptions;t instanceof r.a?this.errorMessage=t.errorMessage:(this.subscriptiontotalcount=t.subscriptions_count[0].subscriptions_count,this.subscriptions=t.subscriptions_info,console.log(this.subscriptiontotalcount),console.log(this.subscriptions))}onChanges(){this.searchCriteriaForm.get("searchCriteria").valueChanges.pipe(Object(e.a)(t=>{}),Object(c.a)(),Object(b.a)(200),Object(u.a)(t=>(this.filterBy=t,this.subscriptionService.fetchAllSubscriptons(this.currentPage,this.pageSize,t)))).subscribe(t=>{console.log(t),this.subscriptiontotalcount=t.subscriptions_count[0].subscriptions_count,this.subscriptions=t.subscriptions_info})}currentPageFn(t){console.log(t),this.subscriptionService.fetchAllSubscriptons(t,this.pageSize,this.filterBy).subscribe(t=>{this.subscriptiontotalcount=t.subscriptions_count[0].subscriptions_count,this.subscriptions=t.subscriptions_info})}}return t.\u0275fac=function(n){return new(n||t)(a.Mb(o.a),a.Mb(l.c),a.Mb(g))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-subscription-dashboard"]],decls:18,vars:8,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-2"],[1,"col-md-4"],[3,"formGroup"],["formControlName","searchCriteria","type","text","id","keyword","placeholder","Search By Phone Number","autocomplete","off","autofocus","",1,"form-control",3,"keyup"],[1,"col-md-6"],["type","button",1,"btn","btn-outline-secondary",2,"float","right","font-size","14px",3,"routerLink"],[1,"table-responsive"],["style","width:1200px !important","class","table",4,"ngIf"],[3,"totalItemCount","currentPage",4,"ngIf"],[4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"table",2,"width","1200px !important"],[2,"width","90px !important"],["app-subscription-data","",3,"subscriptionInfo",4,"ngFor","ngForOf"],["app-subscription-data","",3,"subscriptionInfo"],[3,"totalItemCount","currentPage"],[1,"alert","alert-danger"]],template:function(t,n){1&t&&(a.Rb(0,"div",0),a.Rb(1,"div",1),a.Cc(2),a.Qb(),a.Rb(3,"div",2),a.Rb(4,"div",3),a.Rb(5,"div",4),a.Cc(6,"Filter by:"),a.Qb(),a.Rb(7,"div",5),a.Rb(8,"form",6),a.Rb(9,"input",7),a.dc("keyup",(function(){return n.onChanges()})),a.Qb(),a.Qb(),a.Qb(),a.Rb(10,"div",8),a.Rb(11,"a",9),a.Cc(12," Add New Subscriber "),a.Qb(),a.Qb(),a.Qb(),a.Rb(13,"div",10),a.Ac(14,y,21,1,"table",11),a.Ac(15,z,1,1,"app-pagination",12),a.Ac(16,O,2,0,"div",13),a.Qb(),a.Qb(),a.Qb(),a.Ac(17,S,2,1,"div",14)),2&t&&(a.zb(2),a.Ec(" ",n.pageTitle," "),a.zb(6),a.lc("formGroup",n.searchCriteriaForm),a.zb(3),a.lc("routerLink",a.oc(7,w)),a.zb(3),a.lc("ngIf",n.subscriptiontotalcount),a.zb(1),a.lc("ngIf",n.subscriptiontotalcount),a.zb(1),a.lc("ngIf",0==n.subscriptiontotalcount),a.zb(1),a.lc("ngIf",n.errorMessage))},directives:[l.u,l.l,l.e,l.b,l.k,l.d,o.i,s.m,s.l,R,Q.a],styles:["td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-size:14px}"]}),t})();var M=i("LRne");const k=[{path:"",component:P,resolve:{resolvedSubscriptions:(()=>{class t{constructor(t){this.subscriptionService=t,this.pagenumber=1,this.pagesize=20,this.filterBy=""}resolve(t,n){return this.subscriptionService.fetchAllSubscriptons(this.pagenumber,this.pagesize,this.filterBy).pipe(Object(f.a)(t=>Object(M.a)(t)))}}return t.\u0275fac=function(n){return new(n||t)(a.Zb(g))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}];let x=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(n){return new(n||t)},imports:[[o.j.forChild(k)],o.j]}),t})();var j=i("PCNd");let E=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(n){return new(n||t)},imports:[[s.b,x,l.p,j.a]]}),t})()}}]);