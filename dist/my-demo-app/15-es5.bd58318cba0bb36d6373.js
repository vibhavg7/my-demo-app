function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var c=e[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{lE2P:function(t,e,r){"use strict";r.r(e);var c=r("fXoL"),o=r("QJ7G"),a=r("tyNb"),i=r("ofXK"),n=r("Q6/5"),u=["class","card",4,"ngIf"],d=["class","alert alert-danger",4,"ngIf"],s=[1,"card"],l=[1,"card-header"],b=[1,"card-body"],p=[1,"row"],v=[1,"col-md-8"],g=[1,"col-md-4"],f=[3,"rating","ratingClicked"],m=[1,"center-block","img-responsive",3,"src","title"],C=[1,"card-footer"],h=[1,"btn","btn-outline-secondary",2,"width","80px",3,"click"],W=[1,"fa","fa-chevron-left"];function Y(t,e){if(1&t){var r=c.Zb();c.Yb(0,"div",s),c.Yb(1,"div",l),c.Mc(2),c.Wb(),c.Yb(3,"div",b),c.Yb(4,"div",p),c.Yb(5,"div",v),c.Yb(6,"div",p),c.Yb(7,"div",g),c.Mc(8,"Name:"),c.Wb(),c.Yb(9,"div",v),c.Mc(10),c.Wb(),c.Wb(),c.Yb(11,"div",p),c.Yb(12,"div",g),c.Mc(13,"Code:"),c.Wb(),c.Yb(14,"div",v),c.Mc(15),c.Wb(),c.Wb(),c.Yb(16,"div",p),c.Yb(17,"div",g),c.Mc(18,"Release Date:"),c.Wb(),c.Yb(19,"div",v),c.Mc(20),c.nc(21,"date"),c.Wb(),c.Wb(),c.Yb(22,"div",p),c.Yb(23,"div",g),c.Mc(24,"Last Updated:"),c.Wb(),c.Yb(25,"div",v),c.Mc(26),c.nc(27,"date"),c.Wb(),c.Wb(),c.Yb(28,"div",p),c.Yb(29,"div",g),c.Mc(30,"Description:"),c.Wb(),c.Yb(31,"div",v),c.Mc(32),c.Wb(),c.Wb(),c.Yb(33,"div",p),c.Yb(34,"div",g),c.Mc(35,"Price:"),c.Wb(),c.Yb(36,"div",v),c.Mc(37),c.Wb(),c.Wb(),c.Yb(38,"div",p),c.Yb(39,"div",g),c.Mc(40,"Star Rating:"),c.Wb(),c.Yb(41,"div",v),c.Yb(42,"app-star",f),c.jc("ratingClicked",(function(t){return c.Ac(r),c.mc().onRatingClicked(t)})),c.Wb(),c.Wb(),c.Wb(),c.Yb(43,"div",p),c.Yb(44,"div",g),c.Mc(45,"Category Name:"),c.Wb(),c.Yb(46,"div",v),c.Mc(47),c.Wb(),c.Wb(),c.Yb(48,"div",p),c.Yb(49,"div",g),c.Mc(50,"Available:"),c.Wb(),c.Yb(51,"div",v),c.Mc(52),c.Wb(),c.Wb(),c.Wb(),c.Yb(53,"div",g),c.Yb(54,"img",m),c.Ic(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Yb(55,"div",C),c.Yb(56,"button",h),c.jc("click",(function(t){return c.Ac(r),c.mc().onBack()})),c.Tb(57,"i",W),c.Mc(58," Back "),c.Wb(),c.Yb(59,"button",h),c.jc("click",(function(t){return c.Ac(r),c.mc().onEdit()})),c.Tb(60,"i",W),c.Mc(61," Edit "),c.Wb(),c.Wb(),c.Wb()}if(2&t){var o=c.mc();c.Cc(2),c.Oc(" ",o.pageTitle," "),c.Cc(10),c.Nc(null==o.productData?null:o.productData.productName),c.Cc(15),c.Nc(null==o.productData?null:o.productData.productCode),c.Cc(20),c.Nc(c.pc(21,14,null==o.productData?null:o.productData.releaseDate,"medium")),c.Cc(26),c.Nc(c.pc(27,17,null==o.productData?null:o.productData.lastUpdated,"medium")),c.Cc(32),c.Nc(null==o.productData?null:o.productData.description),c.Cc(37),c.Nc(null==o.productData?null:o.productData.price),c.Cc(42),c.sc("rating",null==o.productData?null:o.productData.starRating),c.Cc(47),c.Nc(null==o.productData?null:o.productData.categoryName),c.Cc(52),c.Nc(null==o.productData?null:o.productData.available?"Available":"Not Available"),c.Cc(54),c.Hc("width",200,"px"),c.Hc("margin",2,"px"),c.Jc(),c.uc("src","assets/product_images/",null==o.productData?null:o.productData.image_url,"",c.Bc),c.sc("title",null==o.productData?null:o.productData.productName)}}var y=[1,"alert","alert-danger"];function D(t,e){if(1&t&&(c.Yb(0,"div",y),c.Mc(1),c.Wb()),2&t){var r=c.mc();c.Cc(1),c.Oc("",r.errorMessage,"\n")}}var _,P,M,k=((_=function(){function t(e,r,c){_classCallCheck(this,t),this._productService=e,this.router=r,this._activatedRoute=c}return _createClass(t,[{key:"onBack",value:function(){this.router.navigate(["/products"],{queryParamsHandling:"preserve"})}},{key:"onEdit",value:function(){this.router.navigate(["products",this.productId,"edit"])}},{key:"ngOnInit",value:function(){var t=this._activatedRoute.snapshot.data.product;this.errorMessage=t.error,this.onProductRetrieved(t.product)}},{key:"onRatingClicked",value:function(t){console.log(t)}},{key:"onProductRetrieved",value:function(t){this.productData=t,this.pageTitle=this.productData?"Product Detail: ".concat(this.productData.productName):"No product found"}}]),t}()).ngComponentDef=c.Mb({type:_,selectors:[["ng-component"]],factory:function(t){return new(t||_)(c.Sb(o.a),c.Sb(a.f),c.Sb(a.a))},consts:2,vars:2,template:function(t,e){1&t&&(c.Kc(0,Y,62,20,"div",u),c.Kc(1,D,2,1,"div",d)),2&t&&(c.sc("ngIf",e.productData),c.Cc(1),c.sc("ngIf",e.errorMessage))},directives:[i.m,n.a],pipes:[i.d],styles:[""]}),_),I=r("PCNd"),N=r("LRne"),S=r("lJxs"),O=r("JIr8"),w=((M=function(){function t(e){_classCallCheck(this,t),this.productDataService=e}return _createClass(t,[{key:"resolve",value:function(t,e){var r=+t.paramMap.get("id");if(isNaN(r)){var c="Product id is not a number:".concat(r);return console.error(c),Object(N.a)({product:null,error:c})}return this.productDataService.getProduct(r).pipe(Object(S.a)((function(t){return{product:t,error:""}})),Object(O.a)((function(t){var e="Retrieval error: ".concat(t);return Object(N.a)({product:null,error:e})})))}}]),t}()).ngInjectableDef=c.Ob({token:M,factory:function(t){return new(t||M)(c.hc(o.a))},providedIn:"root"}),M),j=((P=function(){function t(e){_classCallCheck(this,t),this.productDataService=e}return _createClass(t,[{key:"resolve",value:function(t,e){return this.productDataService.getProducts(1,20,"").pipe(Object(S.a)((function(t){return{product:t.products,product_total_count:t.productCount,error:""}})),Object(O.a)((function(t){var e="Retrieval error: ".concat(t);return Object(N.a)({product:null,error:e})})))}}]),t}()).ngInjectableDef=c.Ob({token:P,factory:function(t){return new(t||P)(c.hc(o.a))},providedIn:"root"}),P),R=r("vkgz"),F=r("/uUt"),K=r("Kj3r"),T=r("eIep"),x=r("kt0X"),q={showProductCode:!0,currentProduct:null,products:[]};function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TOGGLE_PRODUCT_CODE":return Object.assign({},t,{showProductCode:e.payload});default:return t}}var E=Object(x.m)("products"),B=Object(x.n)(E,(function(t){return t.showProductCode})),V=r("3Pt+"),U=r("Exvd"),G=r("CvK3"),L=[4,"ngIf"];function J(t,e){if(1&t&&(c.Vb(0),c.Mc(1),c.Ub()),2&t){var r=c.mc();c.Cc(1),c.Oc(" - ",null==r.productData?null:r.productData.productCode,"\n")}}var Z,H=((Z=function(){function t(e){_classCallCheck(this,t),this.store=e,this.showProductCode=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.store.pipe(Object(x.o)(B)).subscribe((function(e){t.showProductCode=e}))}}]),t}()).ngComponentDef=c.Mb({type:Z,selectors:[["app-product-shell-list-item"]],factory:function(t){return new(t||Z)(c.Sb(x.h))},inputs:{productData:["productInfo1","productData"]},consts:3,vars:4,template:function(t,e){1&t&&(c.Mc(0),c.nc(1,"upperCaseName"),c.Kc(2,J,2,1,"ng-container",L)),2&t&&(c.Oc("",c.oc(1,2,null==e.productData?null:e.productData.productName),"\n"),c.Cc(2),c.sc("ngIf",e.showProductCode))},directives:[i.m],pipes:[G.a],styles:[""]}),Z),$=[1,"card"],z=[1,"card-header"],Q=[1,"btn","btn-outline-secondary",2,"float","right",3,"click"],X=[1,"card-body"],tt=[3,"formGroup"],et=[1,"form-group"],rt=["formControlName","searchCriteria","type","text","id","inputError","autocomplete","off","autofocus","","placeholder","Search Products",1,"form-control",3,"keyup"],ct=[1,"glyphicon","glyphicon-remove","form-control-feedback"],ot=[4,"ngIf"],at=[1,"card-footer"],it=[1,"row"],nt=[1,"form-check","col-md-12"],ut=["type","checkbox",1,"form-check-input",3,"checked","change"],dt=["class","alert alert-danger",4,"ngIf"],st=[3,"totalItemCount","currentPage",4,"ngIf"],lt=[1,"list-group"],bt=["type","button","class","list-group-item",3,"ngClass","click",4,"ngFor","ngForOf"],pt=[3,"totalItemCount","currentPage"];function vt(t,e){if(1&t){var r=c.Zb();c.Yb(0,"app-pagination",pt),c.jc("currentPage",(function(t){return c.Ac(r),c.mc(2).currentPageFn(t)})),c.Wb()}if(2&t){var o=c.mc(2);c.sc("totalItemCount",o.productsCount)}}var gt=["type","button",1,"list-group-item",3,"ngClass","click"],ft=[3,"productInfo1"],mt=function(t){return{active:t}};function Ct(t,e){if(1&t){var r=c.Zb();c.Yb(0,"button",gt),c.jc("click",(function(t){c.Ac(r);var o=e.$implicit;return c.mc(2).onSelected(o)})),c.Tb(1,"app-product-shell-list-item",ft),c.Wb()}if(2&t){var o=e.$implicit,a=c.mc(2);c.sc("ngClass",c.vc(2,mt,(null==a.selectedProduct?null:a.selectedProduct.productId)==(null==o?null:o.productId))),c.Cc(1),c.sc("productInfo1",o)}}function ht(t,e){if(1&t&&(c.Yb(0,"div"),c.Kc(1,vt,1,1,"app-pagination",st),c.Yb(2,"div",lt),c.Kc(3,Ct,2,4,"button",bt),c.Wb(),c.Wb()),2&t){var r=c.mc();c.Cc(1),c.sc("ngIf",r.productsCount>0),c.Cc(3),c.sc("ngForOf",r.products)}}function Wt(t,e){1&t&&(c.Yb(0,"div"),c.Yb(1,"span"),c.Mc(2,"No Products Found in catelog"),c.Wb(),c.Wb())}var Yt=[1,"alert","alert-danger"];function yt(t,e){if(1&t&&(c.Yb(0,"div",Yt),c.Mc(1),c.Wb()),2&t){var r=c.mc();c.Cc(1),c.Oc(" Error: ",r.errorMessage," ")}}var Dt,_t=((Dt=function(){function t(e,r,c,o,a){_classCallCheck(this,t),this._productService=e,this.router=r,this.formBuilder=c,this.store=o,this._activatedRoute=a,this.filterBy="",this.pageTitle="Products Listing",this.productsCount=0,this.Pages=[],this.pageSize=20,this.searchCriteriaForm=this.formBuilder.group({searchCriteria:[""]})}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.currentPage=1,this.sub=this._productService.selectProductChanges$.subscribe((function(e){t.selectedProduct=e})),this.store.pipe(Object(x.o)(B)).subscribe((function(e){t.displayCode=e}));var e=this._activatedRoute.snapshot.data.products.product;this.productsCount=+this._activatedRoute.snapshot.data.products.product_total_count,this.onProductRetrieved(e)}},{key:"onChanges",value:function(){var t=this;this.searchCriteriaForm.get("searchCriteria").valueChanges.pipe(Object(R.a)((function(t){console.log(t)})),Object(F.a)(),Object(K.a)(2e3),Object(T.a)((function(e){return t.filterBy=e,console.log(t.filterBy),t._productService.getProducts(t.currentPage,t.pageSize,t.filterBy)}))).subscribe((function(e){t.onProductRetrieved(e.products),t.productsCount=e.productCount}))}},{key:"currentPageFn",value:function(t){var e=this;this.currentPage=t,this._productService.getProducts(this.currentPage,this.pageSize,this.filterBy).subscribe((function(t){e.onProductRetrieved(t.products)}))}},{key:"checkChanged",value:function(t){this.store.dispatch({type:"TOGGLE_PRODUCT_CODE",payload:t})}},{key:"onSelected",value:function(t){this._productService.changeSelectedProduct(t.productId)}},{key:"onProductRetrieved",value:function(t){this.products=t}},{key:"addProduct",value:function(){this.router.navigate(["products","0","edit"])}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe()}}]),t}()).ngComponentDef=c.Mb({type:Dt,selectors:[["app-product-shell-list"]],factory:function(t){return new(t||Dt)(c.Sb(o.a),c.Sb(a.f),c.Sb(V.c),c.Sb(x.h),c.Sb(a.a))},consts:20,vars:6,template:function(t,e){1&t&&(c.Yb(0,"div",$),c.Yb(1,"div",z),c.Mc(2),c.Yb(3,"button",Q),c.jc("click",(function(t){return e.addProduct()})),c.Mc(4," Add Product "),c.Wb(),c.Wb(),c.Yb(5,"div",X),c.Yb(6,"form",tt),c.Yb(7,"div",et),c.Yb(8,"div"),c.Yb(9,"input",rt),c.jc("keyup",(function(t){return e.onChanges()})),c.Wb(),c.Tb(10,"span",ct),c.Wb(),c.Wb(),c.Wb(),c.Kc(11,ht,4,2,"div",ot),c.Kc(12,Wt,3,0,"div",ot),c.Wb(),c.Yb(13,"div",at),c.Yb(14,"div",it),c.Yb(15,"div",nt),c.Yb(16,"label"),c.Yb(17,"input",ut),c.jc("change",(function(t){return e.checkChanged(t.target.checked)})),c.Wb(),c.Mc(18," Display Product Code "),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Kc(19,yt,2,1,"div",dt),c.Wb()),2&t&&(c.Cc(2),c.Oc(" ",e.pageTitle," "),c.Cc(6),c.sc("formGroup",e.searchCriteriaForm),c.Cc(11),c.sc("ngIf",e.productsCount>0),c.Cc(12),c.sc("ngIf",0==e.productsCount),c.Cc(17),c.sc("checked",e.displayCode),c.Cc(19),c.sc("ngIf",e.errorMessage))},directives:[V.v,V.l,V.e,V.b,V.k,V.d,i.m,i.l,U.a,i.k,H],styles:[""]}),Dt),Pt=r("chph"),Mt=r("1kSV"),kt=["class","card card-primary",4,"ngIf"],It=[1,"card","card-primary"],Nt=[1,"card-header"],St=[1,"card-body"],Ot=[1,"row"],wt=[1,"col-md-8"],jt=[1,"col-md-4","product-detail-label"],Rt=[3,"rating","ratingClicked"],Ft=[1,"col-md-4"],Kt=["class","center-block img-responsive","src","assets/product_images/default_image.jpg",3,"title","width","margin",4,"ngIf"],Tt=["class","center-block img-responsive",3,"src","title","width","margin",4,"ngIf"],xt=["style","display:block;text-align:center;cursor:pointer;color:blue",3,"click",4,"ngIf"],qt=[1,"card-footer"],At=[1,"row","mb-2"],Et=[1,"btn","btn-primary","mr-3",3,"routerLink"],Bt=[1,"fa","fa-edit"],Vt=["class","alert alert-danger",4,"ngIf"],Ut=["src","assets/product_images/default_image.jpg",1,"center-block","img-responsive",3,"title"];function Gt(t,e){if(1&t&&(c.Yb(0,"img",Ut),c.Ic(),c.Wb()),2&t){var r=c.mc(2);c.Hc("width",200,"px"),c.Hc("margin",2,"px"),c.Jc(),c.sc("title",null==r.productData?null:r.productData.productName)}}var Lt=[1,"center-block","img-responsive",3,"src","title"];function Jt(t,e){if(1&t&&(c.Yb(0,"img",Lt),c.Ic(),c.Wb()),2&t){var r=c.mc(2);c.Hc("width",200,"px"),c.Hc("margin",2,"px"),c.Jc(),c.tc("src",r.imageurl,c.Bc),c.sc("title",null==r.productData?null:r.productData.productName)}}var Zt=[2,"display","block","text-align","center","cursor","pointer","color","blue",3,"click"];function Ht(t,e){if(1&t){var r=c.Zb();c.Yb(0,"span",Zt),c.jc("click",(function(t){return c.Ac(r),c.mc(2).uploadImage()})),c.Mc(1," Upload Image "),c.Wb()}}function $t(t,e){if(1&t){var r=c.Zb();c.Yb(0,"span",Zt),c.jc("click",(function(t){return c.Ac(r),c.mc(2).uploadImage()})),c.Mc(1," Change Image "),c.Wb()}}var zt=[1,"alert","alert-danger"];function Qt(t,e){if(1&t&&(c.Yb(0,"div",zt),c.Mc(1),c.Wb()),2&t){var r=c.mc(2);c.Cc(1),c.Oc("",r.errorMessage," ")}}var Xt=function(t){return["/products",t,"edit"]};function te(t,e){if(1&t){var r=c.Zb();c.Yb(0,"div",It),c.Yb(1,"div",Nt),c.Mc(2),c.Wb(),c.Yb(3,"div",St),c.Yb(4,"div",Ot),c.Yb(5,"div",wt),c.Yb(6,"div",Ot),c.Yb(7,"div",jt),c.Mc(8,"Name:"),c.Wb(),c.Yb(9,"div",wt),c.Mc(10),c.nc(11,"upperCaseName"),c.Wb(),c.Wb(),c.Yb(12,"div",Ot),c.Yb(13,"div",jt),c.Mc(14,"Code:"),c.Wb(),c.Yb(15,"div",wt),c.Mc(16),c.nc(17,"upperCaseName"),c.Wb(),c.Wb(),c.Yb(18,"div",Ot),c.Yb(19,"div",jt),c.Mc(20,"Weight:"),c.Wb(),c.Yb(21,"div",wt),c.Mc(22),c.Wb(),c.Wb(),c.Yb(23,"div",Ot),c.Yb(24,"div",jt),c.Mc(25,"Release Date:"),c.Wb(),c.Yb(26,"div",wt),c.Mc(27),c.nc(28,"date"),c.Wb(),c.Wb(),c.Yb(29,"div",Ot),c.Yb(30,"div",jt),c.Mc(31,"Last Updated:"),c.Wb(),c.Yb(32,"div",wt),c.Mc(33),c.nc(34,"date"),c.Wb(),c.Wb(),c.Yb(35,"div",Ot),c.Yb(36,"div",jt),c.Mc(37,"Description:"),c.Wb(),c.Yb(38,"div",wt),c.Mc(39),c.Wb(),c.Wb(),c.Yb(40,"div",Ot),c.Yb(41,"div",jt),c.Mc(42,"Price:"),c.Wb(),c.Yb(43,"div",wt),c.Mc(44),c.Wb(),c.Wb(),c.Yb(45,"div",Ot),c.Yb(46,"div",jt),c.Mc(47,"Star Rating:"),c.Wb(),c.Yb(48,"div",wt),c.Yb(49,"app-star",Rt),c.jc("ratingClicked",(function(t){return c.Ac(r),c.mc().onRatingClicked(t)})),c.Wb(),c.Wb(),c.Wb(),c.Yb(50,"div",Ot),c.Yb(51,"div",jt),c.Mc(52,"Category Name:"),c.Wb(),c.Yb(53,"div",wt),c.Mc(54),c.nc(55,"upperCaseName"),c.Wb(),c.Wb(),c.Yb(56,"div",Ot),c.Yb(57,"div",jt),c.Mc(58,"Available:"),c.Wb(),c.Yb(59,"div",wt),c.Mc(60),c.Wb(),c.Wb(),c.Wb(),c.Yb(61,"div",Ft),c.Kc(62,Gt,1,3,"img",Kt),c.Kc(63,Jt,1,4,"img",Tt),c.Kc(64,Ht,2,0,"span",xt),c.Kc(65,$t,2,0,"span",xt),c.Wb(),c.Wb(),c.Wb(),c.Yb(66,"div",qt),c.Yb(67,"div",At),c.Yb(68,"div",wt),c.Yb(69,"button",Et),c.Tb(70,"i",Bt),c.Mc(71," Edit "),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Kc(72,Qt,2,1,"div",Vt),c.Wb()}if(2&t){var o=c.mc();c.Cc(2),c.Oc(" ",null==o.productData?null:o.productData.productName," "),c.Cc(10),c.Nc(c.oc(11,18,null==o.productData?null:o.productData.productName)),c.Cc(16),c.Nc(c.oc(17,20,null==o.productData?null:o.productData.productCode)),c.Cc(22),c.Pc("",null==o.productData?null:o.productData.product_weight," ",null==o.productData?null:o.productData.weight_text,""),c.Cc(27),c.Nc(c.pc(28,22,null==o.productData?null:o.productData.releaseDate,"short")),c.Cc(33),c.Nc(c.pc(34,25,null==o.productData?null:o.productData.lastUpdated,"short")),c.Cc(39),c.Nc(null==o.productData?null:o.productData.description),c.Cc(44),c.Nc(null==o.productData?null:o.productData.price),c.Cc(49),c.sc("rating",null==o.productData?null:o.productData.starRating),c.Cc(54),c.Nc(c.oc(55,28,null==o.productData?null:o.productData.categoryName)),c.Cc(60),c.Nc(null==o.productData?null:o.productData.available?"Available":"Not Available"),c.Cc(62),c.sc("ngIf",!o.imageurl),c.Cc(63),c.sc("ngIf",o.imageurl),c.Cc(64),c.sc("ngIf",!o.imageurl),c.Cc(65),c.sc("ngIf",o.imageurl),c.Cc(69),c.sc("routerLink",c.vc(30,Xt,o.productData.productId)),c.Cc(72),c.sc("ngIf",o.errorMessage)}}var ee,re,ce=((ee=function(){function t(e,r){_classCallCheck(this,t),this.productService=e,this.modalService=r,this.pageTitle="Product Detail",this.imageurl="",this.productid=""}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.sub=this.productService.selectProductChanges$.subscribe((function(e){e&&(t.imageurl=e.image_url,t.productid=e.productId),t.productData=e,console.log(t.productData)}))}},{key:"onRatingClicked",value:function(t){}},{key:"uploadImage",value:function(){var t=this,e=this.modalService.open(Pt.a);e.componentInstance.title="Image Upload",e.componentInstance.image_type="products",e.componentInstance.id=this.productid,e.componentInstance.productImage.subscribe((function(e){t.imageurl=e.image_url,t.productService.updateProductImageUrl(t.imageurl,t.productid)}))}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe()}}]),t}()).ngComponentDef=c.Mb({type:ee,selectors:[["app-product-shell-detail"]],factory:function(t){return new(t||ee)(c.Sb(o.a),c.Sb(Mt.b))},consts:1,vars:1,template:function(t,e){1&t&&c.Kc(0,te,73,32,"div",kt),2&t&&c.sc("ngIf",e.productData)},directives:[i.m,n.a,a.g],pipes:[G.a,i.d],styles:[".product-detail-label[_ngcontent-%COMP%]{font-weight:700}"]}),ee),oe=[1,"row"],ae=[1,"scroll"],ie=[1,"col-md-8"],ne=((re=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).ngComponentDef=c.Mb({type:re,selectors:[["app-product-shell"]],factory:function(t){return new(t||re)},consts:5,vars:0,template:function(t,e){1&t&&(c.Yb(0,"div",oe),c.Yb(1,"div",ae),c.Tb(2,"app-product-shell-list"),c.Wb(),c.Yb(3,"div",ie),c.Tb(4,"app-product-shell-detail"),c.Wb(),c.Wb())},directives:[_t,ce],styles:["div.scroll[_ngcontent-%COMP%]{margin:4px,;padding:4px;width:350px;height:500px;overflow-x:auto;text-align:justify}"]}),re),ue=r("9d4Z"),de=[1,"jumbotron"],se=[1,"container"],le=[1,"row"],be=[1,"col-md-6","offset-md-3"],pe=[3,"formGroup","ngSubmit"],ve=[1,"form-group"],ge=["type","text","formControlName","productName",1,"form-control",3,"ngClass"],fe=["class","invalid-feedback",4,"ngIf"],me=["formControlName","storeCategoryName",1,"form-control",3,"change"],Ce=[3,"value",4,"ngFor","ngForOf"],he=[1,"col-md-6"],We=["formControlName","storeSubCategoryName",1,"form-control",3,"change"],Ye=["formControlName","subCategoryName",1,"form-control"],ye=["formControlName","productWeightType",1,"form-control"],De=["selected","","value","1"],_e=["value","2"],Pe=["value","3"],Me=["value","5"],ke=["value","4"],Ie=["value","6"],Ne=["type","text","formControlName","productPrice",1,"form-control",3,"ngClass"],Se=["type","text","formControlName","productWeight",1,"form-control",3,"ngClass"],Oe=["type","text","formControlName","productCode",1,"form-control",3,"ngClass"],we=["row","3","formControlName","productDescription",1,"form-control",3,"ngClass"],je=["type","text","formControlName","productRating",1,"form-control",3,"ngClass"],Re=["for",""],Fe=["formControlName","status",1,"form-control"],Ke=["value","1"],Te=["value","0"],xe=[1,"btn","btn-primary","mr-3"],qe=[1,"fa","fa-save"],Ae=["class","btn btn-primary mr-3",3,"click",4,"ngIf"],Ee=[1,"invalid-feedback"],Be=[4,"ngIf"];function Ve(t,e){1&t&&(c.Yb(0,"div"),c.Mc(1,"Product Name is required"),c.Wb())}function Ue(t,e){if(1&t&&(c.Yb(0,"div",Ee),c.Kc(1,Ve,2,0,"div",Be),c.Wb()),2&t){var r=c.mc();c.Cc(1),c.sc("ngIf",r.f.productName.errors.required)}}var Ge=[3,"value"];function Le(t,e){if(1&t&&(c.Yb(0,"option",Ge),c.Mc(1),c.Wb()),2&t){var r=e.$implicit;c.tc("value",null==r?null:r.store_category_id),c.Cc(1),c.Oc(" ",r.store_category_name," ")}}function Je(t,e){if(1&t&&(c.Yb(0,"option",Ge),c.Mc(1),c.nc(2,"upperCaseName"),c.Wb()),2&t){var r=e.$implicit;c.tc("value",null==r?null:r.store_sub_category_id),c.Cc(1),c.Oc(" ",c.oc(2,2,r.store_sub_category)," ")}}function Ze(t,e){if(1&t&&(c.Yb(0,"option",Ge),c.Mc(1),c.nc(2,"upperCaseName"),c.Wb()),2&t){var r=e.$implicit;c.tc("value",null==r?null:r.sub_category_id),c.Cc(1),c.Oc(" ",c.oc(2,2,r.sub_category_name)," ")}}function He(t,e){1&t&&(c.Yb(0,"div"),c.Mc(1,"Product Price is required"),c.Wb())}function $e(t,e){if(1&t&&(c.Yb(0,"div",Ee),c.Kc(1,He,2,0,"div",Be),c.Wb()),2&t){var r=c.mc();c.Cc(1),c.sc("ngIf",r.f.productPrice.errors.required)}}function ze(t,e){1&t&&(c.Yb(0,"div"),c.Mc(1,"Product weight is required"),c.Wb())}function Qe(t,e){if(1&t&&(c.Yb(0,"div",Ee),c.Kc(1,ze,2,0,"div",Be),c.Wb()),2&t){var r=c.mc();c.Cc(1),c.sc("ngIf",r.f.productWeight.errors.required)}}function Xe(t,e){1&t&&(c.Yb(0,"div"),c.Mc(1,"Product Code is required"),c.Wb())}function tr(t,e){if(1&t&&(c.Yb(0,"div",Ee),c.Kc(1,Xe,2,0,"div",Be),c.Wb()),2&t){var r=c.mc();c.Cc(1),c.sc("ngIf",r.f.productCode.errors.required)}}function er(t,e){1&t&&(c.Yb(0,"div"),c.Mc(1,"Product Description is required"),c.Wb())}function rr(t,e){if(1&t&&(c.Yb(0,"div",Ee),c.Kc(1,er,2,0,"div",Be),c.Wb()),2&t){var r=c.mc();c.Cc(1),c.sc("ngIf",r.f.productDescription.errors.required)}}function cr(t,e){1&t&&(c.Yb(0,"div"),c.Mc(1,"Product Rating is required"),c.Wb())}function or(t,e){if(1&t&&(c.Yb(0,"div",Ee),c.Kc(1,cr,2,0,"div",Be),c.Wb()),2&t){var r=c.mc();c.Cc(1),c.sc("ngIf",r.f.productRating.errors.required)}}var ar=[1,"btn","btn-primary","mr-3",3,"click"],ir=[1,"fa","fa-trash"];function nr(t,e){if(1&t){var r=c.Zb();c.Yb(0,"button",ar),c.jc("click",(function(t){return c.Ac(r),c.mc().deleteProduct()})),c.Tb(1,"i",ir),c.Mc(2," Delete "),c.Wb()}}var ur,dr,sr=function(t){return{"is-invalid":t}},lr=[{path:"",component:ne,resolve:{products:j}},{path:":id",component:k,resolve:{product:w}},{path:":id/edit",component:(ur=function(){function t(e,r,c,o,a){_classCallCheck(this,t),this.formBuilder=e,this._router=r,this._activatedRoute=c,this._categoryService=o,this._productService=a,this.addProductForm=this.formBuilder.group({productName:["",V.t.required],storeCategoryName:["",V.t.required],storeSubCategoryName:["",V.t.required],subCategoryName:[""],productWeightType:["",V.t.required],productPrice:["",V.t.required],productWeight:["",V.t.required],productCode:["",V.t.required],productDescription:["",V.t.required],productRating:["",V.t.required],status:["",V.t.required]})}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this._categoryService.getAllStoreCategory("").subscribe((function(e){t.storeCategories=e.store_categories,t.productId=t._activatedRoute.snapshot.paramMap.get("id"),0!==t.productId&&(t.productData=t._activatedRoute.snapshot.data.productData.product,t.addProductForm.get("storeCategoryName").setValue(t.productData.store_category_id),t.addProductForm.get("storeSubCategoryName").setValue(t.productData.store_sub_category_id),t.addProductForm.get("subCategoryName").setValue(t.productData.sub_category_id),t.addProductForm.get("productName").setValue(t.productData.productName),t.addProductForm.get("productPrice").setValue(t.productData.price),t.addProductForm.get("productCode").setValue(t.productData.productCode),t.addProductForm.get("productWeightType").setValue(t.productData.productWeightType),t.addProductForm.get("productWeight").setValue(t.productData.product_weight),t.addProductForm.get("productDescription").setValue(t.productData.description),t.addProductForm.get("productRating").setValue(t.productData.starRating),t.addProductForm.get("status").setValue(t.productData.available),console.log(t.productData),t.storeCategoryChange(t.productData.store_category_id,+t.productData.store_sub_category_id))}))}},{key:"fetchSubCategories",value:function(t){}},{key:"deleteProduct",value:function(){var t=this;0!=this.productId&&confirm("Are you sure to delete ")&&this._productService.deleteProduct(this.productId).subscribe((function(e){console.log(e),t._router.navigate(["products"])}))}},{key:"onSubmit",value:function(){var t=this;console.log(this.addProductForm.value),this.submitted=!0,this.addProductForm.invalid||(0==this.productId?this._productService.createProduct(this.addProductForm.value).subscribe((function(e){200==e.status?t._router.navigate(["products"]):400==e.status&&alert("Product Not Added . Internal Server Error")}),(function(t){console.log(t)})):this._productService.updateProduct(this.addProductForm.value,this.productId).subscribe((function(e){console.log(e),200==e.status?t._router.navigate(["products"]):400==e.status&&alert("Product Not Added . Internal Server Error")}),(function(e){t.errorMessage=e})))}},{key:"storeCategoryChange",value:function(t,e){var r=this;this.storeSubCategoryData=[],this.subCategoryData=[],this._categoryService.getStoreCategoryData(+t).subscribe((function(t){r.storeSubCategoryData=t.store_categories[0].store_sub_category_name,0==+e||(r.subCategoryData=r.storeSubCategoryData.filter((function(t){return t.store_sub_category_id===e}))[0].sub_category_data)}))}},{key:"storeSubCategoryChange",value:function(t){var e=this;this.storeSubCategoryData.filter((function(r){r.store_sub_category_id===+t&&(e.subCategoryData=r.sub_category_data,e.subCategoryData.length<1&&(e.addProductForm.patchValue({subCategoryName:""}),e.subCategoryData=[]))}))}},{key:"f",get:function(){return this.addProductForm.controls}}]),t}(),ur.ngComponentDef=c.Mb({type:ur,selectors:[["app-product-shell-add"]],factory:function(t){return new(t||ur)(c.Sb(V.c),c.Sb(a.f),c.Sb(a.a),c.Sb(ue.a),c.Sb(o.a))},consts:89,vars:29,template:function(t,e){1&t&&(c.Yb(0,"div",de),c.Yb(1,"div",se),c.Yb(2,"div",le),c.Yb(3,"div",be),c.Yb(4,"h2"),c.Mc(5,"Add New Product"),c.Wb(),c.Yb(6,"form",pe),c.jc("ngSubmit",(function(t){return e.onSubmit()})),c.Yb(7,"div",ve),c.Yb(8,"label"),c.Mc(9,"Product Name"),c.Wb(),c.Tb(10,"input",ge),c.Kc(11,Ue,2,1,"div",fe),c.Wb(),c.Yb(12,"div",ve),c.Yb(13,"label"),c.Mc(14,"Store Category Name"),c.Wb(),c.Yb(15,"div"),c.Yb(16,"select",me),c.jc("change",(function(t){return e.storeCategoryChange(t.target.value,0)})),c.Kc(17,Le,2,2,"option",Ce),c.Wb(),c.Wb(),c.Wb(),c.Yb(18,"div",le),c.Yb(19,"div",he),c.Yb(20,"div",ve),c.Yb(21,"label"),c.Mc(22,"Store Sub Category"),c.Wb(),c.Yb(23,"div"),c.Yb(24,"select",We),c.jc("change",(function(t){return e.storeSubCategoryChange(t.target.value)})),c.Kc(25,Je,3,4,"option",Ce),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Yb(26,"div",he),c.Yb(27,"div",ve),c.Yb(28,"label"),c.Mc(29,"Sub Category"),c.Wb(),c.Yb(30,"div"),c.Yb(31,"select",Ye),c.Kc(32,Ze,3,4,"option",Ce),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Yb(33,"div",ve),c.Yb(34,"label"),c.Mc(35,"Weight Type"),c.Wb(),c.Yb(36,"div"),c.Yb(37,"select",ye),c.Yb(38,"option",De),c.Mc(39,"kg"),c.Wb(),c.Yb(40,"option",_e),c.Mc(41,"gms"),c.Wb(),c.Yb(42,"option",Pe),c.Mc(43,"litre"),c.Wb(),c.Yb(44,"option",Me),c.Mc(45,"ml"),c.Wb(),c.Yb(46,"option",ke),c.Mc(47,"packet"),c.Wb(),c.Yb(48,"option",Ie),c.Mc(49,"pieces"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Yb(50,"div",ve),c.Yb(51,"label"),c.Mc(52,"Orignal Price(M.R.P)"),c.Wb(),c.Tb(53,"input",Ne),c.Kc(54,$e,2,1,"div",fe),c.Wb(),c.Yb(55,"div",ve),c.Yb(56,"label"),c.Mc(57,"Product Weight"),c.Wb(),c.Tb(58,"input",Se),c.Kc(59,Qe,2,1,"div",fe),c.Wb(),c.Yb(60,"div",ve),c.Yb(61,"label"),c.Mc(62,"Product Code"),c.Wb(),c.Tb(63,"input",Oe),c.Kc(64,tr,2,1,"div",fe),c.Wb(),c.Yb(65,"div",ve),c.Yb(66,"label"),c.Mc(67,"Product Desciption"),c.Wb(),c.Tb(68,"textarea",we),c.Kc(69,rr,2,1,"div",fe),c.Wb(),c.Yb(70,"div",ve),c.Yb(71,"label"),c.Mc(72,"Product Rating"),c.Wb(),c.Tb(73,"input",je),c.Kc(74,or,2,1,"div",fe),c.Wb(),c.Yb(75,"div",ve),c.Yb(76,"label",Re),c.Mc(77,"Status"),c.Wb(),c.Yb(78,"div"),c.Yb(79,"select",Fe),c.Yb(80,"option",Ke),c.Mc(81,"Enabled"),c.Wb(),c.Yb(82,"option",Te),c.Mc(83,"Disabled"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Yb(84,"div",ve),c.Yb(85,"button",xe),c.Tb(86,"i",qe),c.Mc(87," Save"),c.Wb(),c.Kc(88,nr,3,0,"button",Ae),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb()),2&t&&(c.Cc(6),c.sc("formGroup",e.addProductForm),c.Cc(10),c.sc("ngClass",c.vc(17,sr,e.submitted&&e.f.productName.errors)),c.Cc(11),c.sc("ngIf",e.submitted&&e.f.productName.errors),c.Cc(17),c.sc("ngForOf",e.storeCategories),c.Cc(25),c.sc("ngForOf",e.storeSubCategoryData),c.Cc(32),c.sc("ngForOf",e.subCategoryData),c.Cc(53),c.sc("ngClass",c.vc(19,sr,e.submitted&&e.f.productPrice.errors)),c.Cc(54),c.sc("ngIf",e.submitted&&e.f.productPrice.errors),c.Cc(58),c.sc("ngClass",c.vc(21,sr,e.submitted&&e.f.productWeight.errors)),c.Cc(59),c.sc("ngIf",e.submitted&&e.f.productWeight.errors),c.Cc(63),c.sc("ngClass",c.vc(23,sr,e.submitted&&e.f.productCode.errors)),c.Cc(64),c.sc("ngIf",e.submitted&&e.f.productCode.errors),c.Cc(68),c.sc("ngClass",c.vc(25,sr,e.submitted&&e.f.productDescription.errors)),c.Cc(69),c.sc("ngIf",e.submitted&&e.f.productDescription.errors),c.Cc(73),c.sc("ngClass",c.vc(27,sr,e.submitted&&e.f.productRating.errors)),c.Cc(74),c.sc("ngIf",e.submitted&&e.f.productRating.errors),c.Cc(88),c.sc("ngIf",0!=e.productId))},directives:[V.v,V.l,V.e,V.b,V.k,V.d,i.k,i.m,V.s,i.l,V.o,V.u],pipes:[G.a],styles:[""]}),ur),resolve:{productData:w}}],br=((dr=function t(){_classCallCheck(this,t)}).ngModuleDef=c.Qb({type:dr}),dr.ngInjectorDef=c.Pb({factory:function(t){return new(t||dr)},imports:[[a.j.forChild(lr)],a.j]}),dr);a.j.forChild(lr),r.d(e,"ProductModule",(function(){return vr}));var pr,vr=((pr=function t(){_classCallCheck(this,t)}).ngModuleDef=c.Qb({type:pr}),pr.ngInjectorDef=c.Pb({factory:function(t){return new(t||pr)},providers:[],imports:[[x.j.forFeature("products",A),br,V.q,I.a]]}),pr);x.j.forFeature("products",A)}}]);