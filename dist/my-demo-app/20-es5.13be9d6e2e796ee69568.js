function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function _createClass(t,n,i){return n&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"la9/":function(t,n,i){"use strict";i.r(n),i.d(n,"SubscriptionsModule",(function(){return J}));var e,r=i("ofXK"),o=i("tyNb"),s=i("R5w1"),c=i("vkgz"),u=i("/uUt"),b=i("Kj3r"),a=i("eIep"),l=i("fXoL"),p=i("3Pt+"),f=i("z6cu"),d=i("lJxs"),h=i("JIr8"),g=i("tk/3"),C=((e=function(){function t(n){_classCallCheck(this,t),this.httpClient=n,this.subscriptionServiceUrl="https://api.grostep.com/customerapi/"}return _createClass(t,[{key:"fetchAllSubscriptons",value:function(t,n,i){var e={};return e.pageNumber=t,e.pageSize=n,e.filterBy=i,console.log(e),this.httpClient.post(this.subscriptionServiceUrl+"subscriptioninfo",e).pipe(Object(c.a)((function(t){})),Object(d.a)((function(t){return t})),Object(h.a)(this.handleError))}},{key:"handleError",value:function(t){var n=new s.a;return n.errorNumber=100,n.errorMessage="Server returned code: ".concat(t.status,", error message is: ").concat(t.message),n.friendlyMessage="An error retriving data",Object(f.a)(n)}}]),t}()).\u0275fac=function(t){return new(t||e)(l.Zb(g.a))},e.\u0275prov=l.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e),v=["app-subscription-data",""],m=function(t){return["/customer",t]};function I(t,n){if(1&t&&(l.Rb(0,"a",3),l.Cc(1),l.Qb()),2&t){var i=l.fc();l.lc("routerLink",l.pc(2,m,null==i.subscriptionInfo?null:i.subscriptionInfo.customer_id)),l.zb(1),l.Ec(" ",null==i.subscriptionInfo?null:i.subscriptionInfo.customer_id," ")}}var _,y=function(t,n){return{"text-success":t,"text-danger":n}},R=((_=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){console.log(this.subscriptionInfo)}}]),t}()).\u0275fac=function(t){return new(t||_)},_.\u0275cmp=l.Gb({type:_,selectors:[["","app-subscription-data",""]],inputs:{subscriptionInfo:"subscriptionInfo"},attrs:v,decls:18,vars:18,consts:[["target","_blank",3,"routerLink",4,"ngIf"],[2,"width","50px"],[2,"font-weight","bold",3,"ngClass"],["target","_blank",3,"routerLink"]],template:function(t,n){1&t&&(l.Rb(0,"td"),l.Cc(1),l.Qb(),l.Rb(2,"td"),l.Ac(3,I,2,4,"a",0),l.Qb(),l.Rb(4,"td",1),l.Cc(5),l.Qb(),l.Rb(6,"td"),l.Cc(7),l.Qb(),l.Rb(8,"td",2),l.Cc(9),l.Qb(),l.Rb(10,"td"),l.Cc(11),l.Qb(),l.Rb(12,"td"),l.Cc(13),l.gc(14,"date"),l.Qb(),l.Rb(15,"td"),l.Cc(16),l.gc(17,"date"),l.Qb()),2&t&&(l.zb(1),l.Ec(" ",null==n.subscriptionInfo?null:n.subscriptionInfo.user_subscribed_id,"\n"),l.zb(2),l.lc("ngIf",null==n.subscriptionInfo?null:n.subscriptionInfo.customer_id),l.zb(2),l.Ec(" ",null==n.subscriptionInfo?null:n.subscriptionInfo.customer_phone," "),l.zb(2),l.Ec(" ",null==n.subscriptionInfo?null:n.subscriptionInfo.customer_name,"\n"),l.zb(1),l.lc("ngClass",l.qc(15,y,1===(null==n.subscriptionInfo?null:n.subscriptionInfo.subscribed),0===(null==n.subscriptionInfo?null:n.subscriptionInfo.subscribed))),l.zb(1),l.Ec(" ",1===(null==n.subscriptionInfo?null:n.subscriptionInfo.subscribed)?"Subscribed":"Not Subscribed","\n"),l.zb(2),l.Ec(" ",1===(null==n.subscriptionInfo?null:n.subscriptionInfo.channel)?"Web":"Others","\n"),l.zb(2),l.Ec(" ",l.ic(14,9,null==n.subscriptionInfo?null:n.subscriptionInfo.added_date,"medium"),"\n"),l.zb(3),l.Ec(" ",l.ic(17,12,null==n.subscriptionInfo?null:n.subscriptionInfo.registered_date,"medium"),"\n"))},directives:[r.m,r.k,o.i],pipes:[r.d],styles:['td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-size:14px}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:45px;height:20px;margin:20px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none;background-color:#ccc}.slider[_ngcontent-%COMP%]{cursor:pointer;top:0;bottom:0;background-color:#ccc}.slider[_ngcontent-%COMP%], .slider[_ngcontent-%COMP%]:before{position:absolute;left:0;right:0;transition:.4s}.slider[_ngcontent-%COMP%]:before{content:"";height:26px;width:26px;bottom:-3px;background-color:#2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateX(20px)}.slider.round[_ngcontent-%COMP%]{border-radius:20px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}']}),_),k=i("Exvd");function Q(t,n){1&t&&l.Nb(0,"tr",18),2&t&&l.lc("subscriptionInfo",n.$implicit)}function O(t,n){if(1&t&&(l.Rb(0,"table",15),l.Rb(1,"thead"),l.Rb(2,"tr"),l.Rb(3,"th",16),l.Cc(4,"Id"),l.Qb(),l.Rb(5,"th"),l.Cc(6,"Customer Id"),l.Qb(),l.Rb(7,"th"),l.Cc(8,"Phone"),l.Qb(),l.Rb(9,"th"),l.Cc(10,"Name"),l.Qb(),l.Rb(11,"th"),l.Cc(12,"Subscribed"),l.Qb(),l.Rb(13,"th"),l.Cc(14,"Channel"),l.Qb(),l.Rb(15,"th"),l.Cc(16,"Added Date"),l.Qb(),l.Rb(17,"th"),l.Cc(18,"Registration Date"),l.Qb(),l.Qb(),l.Qb(),l.Rb(19,"tbody"),l.Ac(20,Q,1,1,"tr",17),l.Qb(),l.Qb()),2&t){var i=l.fc();l.zb(20),l.lc("ngForOf",i.subscriptions)}}function z(t,n){if(1&t){var i=l.Sb();l.Rb(0,"app-pagination",19),l.dc("currentPage",(function(t){return l.uc(i),l.fc().currentPageFn(t)})),l.Qb()}if(2&t){var e=l.fc();l.lc("totalItemCount",e.subscriptiontotalcount)}}function P(t,n){1&t&&(l.Rb(0,"div"),l.Cc(1," No Subscription Data Found "),l.Qb())}function w(t,n){if(1&t&&(l.Rb(0,"div",20),l.Cc(1),l.Qb()),2&t){var i=l.fc();l.zb(1),l.Ec(" Error: ",i.errorMessage,"\n")}}var S,M,x,j,E=function(){return["/subscriptions/",0,"edit"]},A=((S=function(){function t(n,i,e){_classCallCheck(this,t),this.activatedRoute=n,this.formBuilder=i,this.subscriptionService=e,this.filterBy="",this.pageTitle="Subscription Dashboard",this.currentPage=1,this.pageSize=20,this.searchCriteriaForm=this.formBuilder.group({searchCriteria:[""]})}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this.activatedRoute.snapshot.data.resolvedSubscriptions;t instanceof s.a?this.errorMessage=t.errorMessage:(this.subscriptiontotalcount=t.subscriptions_count[0].subscriptions_count,this.subscriptions=t.subscriptions_info,console.log(this.subscriptiontotalcount),console.log(this.subscriptions))}},{key:"onChanges",value:function(){var t=this;this.searchCriteriaForm.get("searchCriteria").valueChanges.pipe(Object(c.a)((function(t){})),Object(u.a)(),Object(b.a)(200),Object(a.a)((function(n){return t.filterBy=n,t.subscriptionService.fetchAllSubscriptons(t.currentPage,t.pageSize,n)}))).subscribe((function(n){console.log(n),t.subscriptiontotalcount=n.subscriptions_count[0].subscriptions_count,t.subscriptions=n.subscriptions_info}))}},{key:"currentPageFn",value:function(t){var n=this;console.log(t),this.subscriptionService.fetchAllSubscriptons(t,this.pageSize,this.filterBy).subscribe((function(t){n.subscriptiontotalcount=t.subscriptions_count[0].subscriptions_count,n.subscriptions=t.subscriptions_info}))}}]),t}()).\u0275fac=function(t){return new(t||S)(l.Mb(o.a),l.Mb(p.c),l.Mb(C))},S.\u0275cmp=l.Gb({type:S,selectors:[["app-subscription-dashboard"]],decls:18,vars:8,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-2"],[1,"col-md-4"],[3,"formGroup"],["formControlName","searchCriteria","type","text","id","keyword","placeholder","Search By Phone Number","autocomplete","off","autofocus","",1,"form-control",3,"keyup"],[1,"col-md-6"],["type","button",1,"btn","btn-outline-secondary",2,"float","right","font-size","14px",3,"routerLink"],[1,"table-responsive"],["style","width:1200px !important","class","table",4,"ngIf"],[3,"totalItemCount","currentPage",4,"ngIf"],[4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"table",2,"width","1200px !important"],[2,"width","90px !important"],["app-subscription-data","",3,"subscriptionInfo",4,"ngFor","ngForOf"],["app-subscription-data","",3,"subscriptionInfo"],[3,"totalItemCount","currentPage"],[1,"alert","alert-danger"]],template:function(t,n){1&t&&(l.Rb(0,"div",0),l.Rb(1,"div",1),l.Cc(2),l.Qb(),l.Rb(3,"div",2),l.Rb(4,"div",3),l.Rb(5,"div",4),l.Cc(6,"Filter by:"),l.Qb(),l.Rb(7,"div",5),l.Rb(8,"form",6),l.Rb(9,"input",7),l.dc("keyup",(function(){return n.onChanges()})),l.Qb(),l.Qb(),l.Qb(),l.Rb(10,"div",8),l.Rb(11,"a",9),l.Cc(12," Add New Subscriber "),l.Qb(),l.Qb(),l.Qb(),l.Rb(13,"div",10),l.Ac(14,O,21,1,"table",11),l.Ac(15,z,1,1,"app-pagination",12),l.Ac(16,P,2,0,"div",13),l.Qb(),l.Qb(),l.Qb(),l.Ac(17,w,2,1,"div",14)),2&t&&(l.zb(2),l.Ec(" ",n.pageTitle," "),l.zb(6),l.lc("formGroup",n.searchCriteriaForm),l.zb(3),l.lc("routerLink",l.oc(7,E)),l.zb(3),l.lc("ngIf",n.subscriptiontotalcount),l.zb(1),l.lc("ngIf",n.subscriptiontotalcount),l.zb(1),l.lc("ngIf",0==n.subscriptiontotalcount),l.zb(1),l.lc("ngIf",n.errorMessage))},directives:[p.u,p.l,p.e,p.b,p.k,p.d,o.i,r.m,r.l,R,k.a],styles:["td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{font-size:14px}"]}),S),N=i("LRne"),F=[{path:"",component:A,resolve:{resolvedSubscriptions:(M=function(){function t(n){_classCallCheck(this,t),this.subscriptionService=n,this.pagenumber=1,this.pagesize=20,this.filterBy=""}return _createClass(t,[{key:"resolve",value:function(t,n){return this.subscriptionService.fetchAllSubscriptons(this.pagenumber,this.pagesize,this.filterBy).pipe(Object(h.a)((function(t){return Object(N.a)(t)})))}}]),t}(),M.\u0275fac=function(t){return new(t||M)(l.Zb(C))},M.\u0275prov=l.Ib({token:M,factory:M.\u0275fac,providedIn:"root"}),M)}}],B=((x=function t(){_classCallCheck(this,t)}).\u0275mod=l.Kb({type:x}),x.\u0275inj=l.Jb({factory:function(t){return new(t||x)},imports:[[o.j.forChild(F)],o.j]}),x),L=i("PCNd"),J=((j=function t(){_classCallCheck(this,t)}).\u0275mod=l.Kb({type:j}),j.\u0275inj=l.Jb({factory:function(t){return new(t||j)},imports:[[r.b,B,p.p,L.a]]}),j)}}]);